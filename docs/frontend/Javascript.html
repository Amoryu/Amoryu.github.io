<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.67">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <title>JavaScript | ZavacのWorld</title><meta name="description" content="Just playing around">
    <link rel="modulepreload" href="/assets/app-52249f43.js"><link rel="modulepreload" href="/assets/Javascript.html-ef798ea5.js"><link rel="modulepreload" href="/assets/Javascript.html-4b822efa.js"><link rel="prefetch" href="/assets/index.html-0a05feab.js" as="script"><link rel="prefetch" href="/assets/index.html-8c2edf06.js" as="script"><link rel="prefetch" href="/assets/index.html-4b3ba946.js" as="script"><link rel="prefetch" href="/assets/index.html-30178123.js" as="script"><link rel="prefetch" href="/assets/index.html-e901a9ed.js" as="script"><link rel="prefetch" href="/assets/index.html-adbe0805.js" as="script"><link rel="prefetch" href="/assets/index.html-6cf06f14.js" as="script"><link rel="prefetch" href="/assets/index.html-185fe8cd.js" as="script"><link rel="prefetch" href="/assets/Chromediaoshigongjujiqiao.html-faa64074.js" as="script"><link rel="prefetch" href="/assets/Reactzhishilianluyudicengluoji.html-518dd636.js" as="script"><link rel="prefetch" href="/assets/Vue3dicengshixianyuanli.html-c5b7079c.js" as="script"><link rel="prefetch" href="/assets/kaifamoshi.html-9c8e0c04.js" as="script"><link rel="prefetch" href="/assets/guide.html-fc3bc744.js" as="script"><link rel="prefetch" href="/assets/Ajax.html-f6f3ed9a.js" as="script"><link rel="prefetch" href="/assets/CSS3.html-31687947.js" as="script"><link rel="prefetch" href="/assets/express.html-7ee8dd2e.js" as="script"><link rel="prefetch" href="/assets/Git.html-6fee2f57.js" as="script"><link rel="prefetch" href="/assets/HTML.html-45692408.js" as="script"><link rel="prefetch" href="/assets/Http.html-7a5edcb0.js" as="script"><link rel="prefetch" href="/assets/Node.html-331608e3.js" as="script"><link rel="prefetch" href="/assets/React18.html-37380785.js" as="script"><link rel="prefetch" href="/assets/TCP.html-4c1b71c6.js" as="script"><link rel="prefetch" href="/assets/TypeScript.html-63df2845.js" as="script"><link rel="prefetch" href="/assets/Vite.html-b1855b23.js" as="script"><link rel="prefetch" href="/assets/Vue3.html-b9f6ca48.js" as="script"><link rel="prefetch" href="/assets/Webpack.html-0e689b73.js" as="script"><link rel="prefetch" href="/assets/404.html-60b35caa.js" as="script"><link rel="prefetch" href="/assets/index.html-005e5362.js" as="script"><link rel="prefetch" href="/assets/index.html-e8d2b1cf.js" as="script"><link rel="prefetch" href="/assets/index.html-692a8270.js" as="script"><link rel="prefetch" href="/assets/index.html-43f50799.js" as="script"><link rel="prefetch" href="/assets/index.html-bb166755.js" as="script"><link rel="prefetch" href="/assets/index.html-9c33564c.js" as="script"><link rel="prefetch" href="/assets/index.html-4a6efcd0.js" as="script"><link rel="prefetch" href="/assets/index.html-58f3343b.js" as="script"><link rel="prefetch" href="/assets/Chromediaoshigongjujiqiao.html-3cb8b130.js" as="script"><link rel="prefetch" href="/assets/Reactzhishilianluyudicengluoji.html-775d75ae.js" as="script"><link rel="prefetch" href="/assets/Vue3dicengshixianyuanli.html-df0da5fe.js" as="script"><link rel="prefetch" href="/assets/kaifamoshi.html-5c417b5e.js" as="script"><link rel="prefetch" href="/assets/guide.html-987e9958.js" as="script"><link rel="prefetch" href="/assets/Ajax.html-8dde4d04.js" as="script"><link rel="prefetch" href="/assets/CSS3.html-12a32d41.js" as="script"><link rel="prefetch" href="/assets/express.html-3ba90657.js" as="script"><link rel="prefetch" href="/assets/Git.html-ad048ceb.js" as="script"><link rel="prefetch" href="/assets/HTML.html-4d445b31.js" as="script"><link rel="prefetch" href="/assets/Http.html-744a3f3a.js" as="script"><link rel="prefetch" href="/assets/Node.html-bc1ced32.js" as="script"><link rel="prefetch" href="/assets/React18.html-2dd3b8ed.js" as="script"><link rel="prefetch" href="/assets/TCP.html-6b1e7920.js" as="script"><link rel="prefetch" href="/assets/TypeScript.html-66e6ea10.js" as="script"><link rel="prefetch" href="/assets/Vite.html-d325245b.js" as="script"><link rel="prefetch" href="/assets/Vue3.html-0178adc8.js" as="script"><link rel="prefetch" href="/assets/Webpack.html-742cefba.js" as="script"><link rel="prefetch" href="/assets/404.html-69b82a76.js" as="script"><link rel="prefetch" href="/assets/reco-valine-a195b6e9.js" as="script"><link rel="prefetch" href="/assets/giscus-2a044aea-497f0bd4.js" as="script">
    <link rel="preload" href="/assets/style-77970919.css" as="style"><link rel="stylesheet" href="/assets/style-77970919.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><div class="common-wrapper show-series show-catalog"><header class="navbar-container" style="top:0;"><div class="site-brand nav-item"><img class="logo" src="/logo.png" alt="ZavacのWorld"><a href="/" class="site-name can-hide">ZavacのWorld</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/frontend/1/" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文档"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文档<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文档"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文档<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/frontend/JavaScript" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/guide" class="link" aria-label="使用指引"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->使用指引<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/tags/tag1/1/" class="link" aria-label="工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->工具<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><span class="xicon-container btn-toggle-dark-mode btn--dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></header><header class="sub-navbar-container"><span class="nav-item"><div class="toggle-series-button" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div> Series </span></header><div class="mobile-menus-container"><nav class="navbar-links mobile"><!--[--><div class="navbar-links__item"><a href="/" class="link router-link-active" aria-label="首页"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->首页<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/frontend/1/" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><div class="dropdown-link"><button class="dropdown-link__title" type="button" aria-label="文档"><span class="xicon-container left title"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文档<!--]--></span></span><span class="arrow down"></span></button><button class="dropdown-link--mobile__title" type="button" aria-label="文档"><span class="title"><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->文档<!--]--></span></span></span><span class="right arrow"></span></button><ul style="display:none;" class="dropdown-link__container"><!--[--><li class="dropdown-link__item"><a href="/docs/frontend/JavaScript" class="link" aria-label="前端"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><!--[--><!--]--></a></li><li class="dropdown-link__item"><a href="/blogs/other/guide" class="link" aria-label="使用指引"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->使用指引<!--]--></span></span><!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links__item"><a href="/tags/tag1/1/" class="link" aria-label="工具"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->工具<!--]--></span></span><!--[--><!--]--></a></div><!--]--></nav><div class="appearance"><span>Appearance</span><span class="xicon-container btn-toggle-dark-mode"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span></div></div><div class="series-mask"></div><aside class="series-container"><div class="site-brand"><img class="logo" src="/logo.png" alt="ZavacのWorld"><a href="/" class="site-name can-hide">ZavacのWorld</a></div><!--[--><!--[--><section class="series-group series-item"><h5 class="series-heading active">基础<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/docs/frontend/HTML.html" class="link series-item" aria-label="HTML"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTML<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/CSS3.html" class="link series-item" aria-label="CSS"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->CSS<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a aria-current="page" href="/docs/frontend/Javascript.html" class="router-link-active router-link-exact-active link router-link-active series-item active" aria-label="JavaScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->JavaScript<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/TypeScript.html" class="link series-item" aria-label="TypeScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TypeScript<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">框架/库<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/docs/frontend/Vue3.html" class="link series-item" aria-label="Vue3"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vue3<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/React18.html" class="link series-item" aria-label="React"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->React<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">构建工具<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/docs/frontend/Webpack.html" class="link series-item" aria-label="Webpack"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Webpack<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/Vite.html" class="link series-item" aria-label="Vite"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Vite<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/Node.html" class="link series-item" aria-label="Node"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Node<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/express.html" class="link series-item" aria-label="express"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->express<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">网络通信<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/docs/frontend/HTTP.html" class="link series-item" aria-label="HTTP"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->HTTP<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/TCP.html" class="link series-item" aria-label="TCP"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->TCP<!--]--></span></span><!--[--><!--]--></a><!--]--></li><li><!--[--><a href="/docs/frontend/Ajax.html" class="link series-item" aria-label="Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Ajax<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--[--><section class="series-group series-item"><h5 class="series-heading">Git版本控制<span class="arrow down"></span></h5><ul style="display:block;"><li><!--[--><a href="/docs/frontend/Git.html" class="link series-item" aria-label="Git"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Git<!--]--></span></span><!--[--><!--]--></a><!--]--></li></ul></section><!--]--><!--]--></aside><!--[--><main class="page-container"><h1 class="page-title">JavaScript</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->jiahua<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->2023/11/08<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->前端<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:inherit;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->tag1<!--]--></span></span><!----></div><div class="theme-reco-default-content"><div><h2 id="一、ecmascript" tabindex="-1"><a class="header-anchor" href="#一、ecmascript" aria-hidden="true">#</a> 一、ECMAScript</h2><h3 id="一-js运行机制" tabindex="-1"><a class="header-anchor" href="#一-js运行机制" aria-hidden="true">#</a> (一) JS运行机制</h3><h4 id="_1-javascript-是一门动态类型的解释型脚本语言" tabindex="-1"><a class="header-anchor" href="#_1-javascript-是一门动态类型的解释型脚本语言" aria-hidden="true">#</a> 1.JavaScript 是一门动态类型的解释型脚本语言</h4><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">JavaScript为什么是单线程？</p><p>JavaScript 的单线程特点与它的用途有关: 作为浏览器脚本语言，JavaScript 的主要用途是与用户互动，操作 DOM。<br> 举个例子：如果 JavaScript 同时有多个线程，一个线程在给 DOM 节点添加内容，另一个线程删除了这个 DOM 节点，这就造成了很复杂的同步问题</p><p>不过，H5 提出了 WebWorker 标准，<strong>允许 JavaScript 创建多个线程，但是子线程完全受主线程控制，而且不得操作 DOM</strong>，并没有改变 JavaScript 单线程的本质</p></div><h4 id="_2-事件循环-event-loop" tabindex="-1"><a class="header-anchor" href="#_2-事件循环-event-loop" aria-hidden="true">#</a> 2.事件循环（Event loop）</h4><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">面试题</p><p>事件循环⼜叫做消息循环，是浏览器渲染主线程的⼯作⽅式。渲染主线程会开启⼀个死循环，每次循环从消息队列中取出第⼀个任务执⾏，⽽其他线程则在合适的时候将任务加⼊到队列末尾。 <br> (消息队列过去只是简单分为宏队列和微队列，但是现在已经⽆法满⾜复杂的浏览器环境，取⽽代之的是⼀种更加灵活多变的处理⽅式)<br> W3C官⽅的解释是，每个任务有不同的类型，并根据类型加入到不同的任务队列。 不同的任务队列有着不同的优先级，但是必须有⼀个具有最⾼优先级的微队列，但在⼀次事件循环中，微队列的任务必须优先调度执⾏。</p></div><h4 id="_1-执行栈-事件循环-和任务队列" tabindex="-1"><a class="header-anchor" href="#_1-执行栈-事件循环-和任务队列" aria-hidden="true">#</a> (1)执行栈（事件循环）和任务队列</h4><p>由于JavaScript单线程的特性，所有任务需要排队，前一个任务结束，才会执行后一个任务。<br> 所有任务可以分成两种，一种是同步任务（synchronous），另一种是异步任务（asynchronous）。</p><ul><li><h5 id="同步任务与调用栈" tabindex="-1"><a class="header-anchor" href="#同步任务与调用栈" aria-hidden="true">#</a> 同步任务与调用栈</h5><blockquote><p><strong>同步任务</strong>指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；</p><p>所有同步任务都在主线程上执行，形成一个<a href="https://www.ruanyifeng.com/blog/2013/11/stack.html" target="_blank" rel="noopener noreferrer">执行栈<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>（execution context stack）</p><p>一旦&quot;执行栈&quot;中的所有同步任务执行完毕，系统就会读取&quot;任务队列&quot;，看看里面有哪些事件，哪些对应的异步任务，于是结束等待状态，将异步任务放入执行栈，开始执行。</p></blockquote><p>主线程之外，还存在一个&quot;<strong>任务队列</strong>&quot;(task queue)。只要异步任务有了运行结果，就在&quot;任务队列&quot;之中放置一个事件。</p></li><li><h5 id="异步任务与任务-消息-队列" tabindex="-1"><a class="header-anchor" href="#异步任务与任务-消息-队列" aria-hidden="true">#</a> 异步任务与任务（消息）队列</h5><blockquote><p><strong>异步任务</strong>指的是，不进入主线程、而进入&quot;任务队列&quot;（task queue）的任务，只有&quot;任务队列&quot;通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。</p></blockquote></li><li><h5 id="回调函数" tabindex="-1"><a class="header-anchor" href="#回调函数" aria-hidden="true">#</a> 回调函数</h5><blockquote><p>只要指定过<strong>回调函数</strong>，这些事件发生时就会进入&quot;任务队列&quot;，等待主线程读取。</p><p>所谓&quot;回调函数&quot;（callback），就是那些会被主线程挂起来的代码。<strong>异步任务必须指定回调函数，当主线程开始执行异步任务，就是执行对应的回调函数。</strong></p></blockquote></li></ul><h5 id="主线程从-任务队列-中读取事件-这个过程是循环不断的-所以整个的这种运行机制又称为-event-loop-事件循环-。" tabindex="-1"><a class="header-anchor" href="#主线程从-任务队列-中读取事件-这个过程是循环不断的-所以整个的这种运行机制又称为-event-loop-事件循环-。" aria-hidden="true">#</a> 主线程从&quot;任务队列&quot;中读取事件，这个过程是循环不断的，所以整个的这种运行机制又称为 Event Loop（事件循环）。</h5><hr><h3 id="二-内存与性能" tabindex="-1"><a class="header-anchor" href="#二-内存与性能" aria-hidden="true">#</a> (二) 内存与性能</h3><ol><li>最好限制一个页面中事件处理程序的数量。因为会占用过多内存，导致页面响应缓慢</li><li>利用事件冒泡，事件委托可以解决第一点中的问题</li><li>最好在页面卸载之前删除所有事件处理程序（为事件处理程序赋值 null）</li></ol><h4 id="_1-垃圾回收" tabindex="-1"><a class="header-anchor" href="#_1-垃圾回收" aria-hidden="true">#</a> 1.垃圾回收</h4><p>基本思路：确定哪个变量不会再被使用，然后释放它占用内存</p><ul><li><h5 id="_1-标记清理-最常用" tabindex="-1"><a class="header-anchor" href="#_1-标记清理-最常用" aria-hidden="true">#</a> (1)<strong>标记清理（最常用）</strong>：</h5><p>先标记内存中存储的所有变量，然后将上下文中的变量，以及被其引用的变量的标记去掉，除此之外被标记的变量，就是待删除的。<strong>（离开作用域的变量就会被标记为可回收）</strong></p></li><li><h5 id="_2-引用计数" tabindex="-1"><a class="header-anchor" href="#_2-引用计数" aria-hidden="true">#</a> (2)引用计数：</h5><p>对每个值都记录它被引用的次数，声明一个变量并赋给一个引用值时，引用数加一，如果该变量被其他值给覆盖了，引用数减一，引用数为 0 的值，就释放掉。</p><p><strong>缺点是：会产生循环引用，比如对象 A 有一个指针指向对象 B，对象 B 也引用了对象 A</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> objectA <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> objectB <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  objectA<span class="token punctuation">.</span>someOtherobject <span class="token operator">=</span> objectB
  objectB<span class="token punctuation">.</span>anotherobject <span class="token operator">=</span> objectA
<span class="token punctuation">}</span>
<span class="token comment">//函数结束后，两个对象都不在作用域中，但还会存在，所以引用数永远不会变为0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>循环引用的解决方案：<strong>在确保不适用的情况下切断互相引用的连接</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>objectA<span class="token punctuation">.</span>someOtherobject <span class="token operator">=</span> <span class="token keyword">null</span>
objectB<span class="token punctuation">.</span>anotherobject <span class="token operator">=</span> <span class="token keyword">null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_2-内存管理" tabindex="-1"><a class="header-anchor" href="#_2-内存管理" aria-hidden="true">#</a> 2.内存管理</h4><ul><li><p>解除引用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> location <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    location<span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">return</span> location
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> global <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span>

  global <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//解除global对值的引用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>隐藏类和 delete 操作</p><p>Chrome 的 V8 引擎会将创建的对象和隐藏类关联起来</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;jake&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> global <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> global1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//global和global1共享同一个构造函数，则共享相同的隐藏类</span>

global<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;21&#39;</span> <span class="token comment">//此时两个对象就会对应两个不同的隐藏类</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>最好的解决方法就是避免</strong>“<strong>先创建再补充</strong>”</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token parameter">age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;jake&#39;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&#39;21&#39;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> global <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> global1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">create</span><span class="token punctuation">(</span><span class="token string">&#39;21&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>动态删除属性或动态增加属性，都会导致不再共享一个隐藏类</strong></p><ol><li><p>delete 操作会导致不再共享一个隐藏类，最好是把不想要的属性设置为 null</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">delete</span> global1<span class="token punctuation">.</span>age
<span class="token comment">//替换成</span>
global1<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token keyword">null</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ul><h4 id="_3-内存泄露" tabindex="-1"><a class="header-anchor" href="#_3-内存泄露" aria-hidden="true">#</a> 3.内存泄露</h4><blockquote><ul><li>在函数没有声明变量直接给其赋值，会导致解释器将该变量当作全局变量，也就是 window 的属性来创建，导致即使函数结束，但 window 本身不被清理，该变量就不会消失</li></ul></blockquote><h4 id="_4-静态分配和对象池" tabindex="-1"><a class="header-anchor" href="#_4-静态分配和对象池" aria-hidden="true">#</a> 4.静态分配和对象池</h4><blockquote><ul><li>在一个函数里面有创建对象的语句，若该函数被频繁调用，就会导致对象的更替速度很快，从浏览器就会更频繁地安排垃圾回收**（减少浏览器执行垃圾回收的次数，就能节省因频繁释放内存而损失的性能）**</li><li>解决方法：不要动态创建对象，使用<strong>对象池</strong>，创建一个对象池，用来管理一组可回收的对象，<strong>需要创建对象的操作时就向对象池请求一个对象，操作完成后再把它还给对象池</strong>，从而没发生对象的初始 化，垃圾回收程序就不 hi 探测到对象更替</li><li>对象池是在对象不存在时创建新的，在对象存在时复用存在的，数组时很好的实现方法，但是要避免招致额外的垃圾回收</li><li><strong>静态分配是一种极端形式，如果应用程序因为垃圾回收拉低了性能，可以利用它提升性能，属于过早优化</strong></li></ul></blockquote><h3 id="三-执行上下文和作用域" tabindex="-1"><a class="header-anchor" href="#三-执行上下文和作用域" aria-hidden="true">#</a> (三) 执行上下文和作用域</h3><p>作用域是在函数定义时确定的,执行上下文是在函数调用时确定的</p><p>一个作用域下可能包含零个或多个执行上下文(函数未被调用或函数被调用多次)</p><ul><li><p>执行上下文和作用域的典型例子</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token function">fn</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建执行上下文fn, this绑定为global, 词法环境记录了参数b, 创建阶段完成</span>
<span class="token comment">//执行变量赋值,b赋值为传入的200, 执行代码, 执行到b=20,b重新被赋值为20, 执行到console.log(a,b,),</span>
<span class="token comment">//当前作用域(词法环境)没有a,通过out外部环境引用指针向父级作用域(词法环境)去找a,找到了a,</span>
<span class="token comment">// 因此输出10, 20</span>

<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//创建执行上下文fn1, this绑定为global, 创建阶段完成</span>
<span class="token comment">//执行变量赋值, 作用域没有a变量,默认创建一个全局变量a为undefined, 执行代码, 执行到a=100,全局变量a被赋值为100,</span>
<span class="token comment">//执行到fn(a), 创建执行上下文fn, this绑定为global, 词法环境记录了参数b, 创建阶段完成</span>
<span class="token comment">//执行变量赋值,b赋值为传入的a,即100, 执行代码, 执行到b=20,b重新被赋值为20, 执行到console.log(a,b,),</span>
<span class="token comment">//当前作用域(词法环境)没有a,通过out外部环境引用指针向父级作用域(词法环境)去找a,找到了a(此时a为100),</span>
<span class="token comment">// 因此输出100, 20</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>函数作用域可以比作一个城市，在该城市中可以进行各种操作和访问资源。而函数的词法环境可以比作记录了该城市以及城市所在的省份和国家的所有资源集合。</p><p>在函数作用域中，只能访问该函数内部定义的变量和函数，这就如同在一个城市中只能访问该城市内部的资源。<br> 而在函数的词法环境中，可以访问该函数所在的城市、省份和国家中定义的变量和函数，这就如同在一个集合中可以访问多个城市、省份和国家的资源。</p><p>因此，函数的词法环境和作用域都是为了控制变量的可见性和生命周期，以确保程序的正确性和可维护性。</p></div></li></ul><h4 id="_1-执行上下文" tabindex="-1"><a class="header-anchor" href="#_1-执行上下文" aria-hidden="true">#</a> 1. 执行上下文</h4><p>代码或函数执行期间，分配变量和内存空间(<strong>是函数调用时在执行栈中产生的变量对象</strong>，是代码运行时的场景、环境的概念)<br> 在代码执行完毕后会销毁</p><ul><li>全局（执行）上下文： <blockquote><ol><li>在浏览器环境下是window对象,Node环境下是global对象</li><li><strong>执行</strong>(<strong>上下文)栈</strong>最底层的就是全局上下文</li><li>在关闭浏览器或退出浏览器时销毁</li></ol></blockquote></li><li>函数（执行）上下文 <blockquote><p><strong>每次函数调用都会创建一个函数执行上下文</strong><br> 当代码流进入函数时，函数上下文就会创建并推入到<strong>执行</strong>(<strong>上下文)栈</strong><br> 1.创建阶段:</p><ul><li>创建 arguments 对象，函数声明，var 变量声明</li><li>生成作用域链</li><li>确定 this 指向</li></ul><p>2.执行阶段:</p><ul><li>按顺序执行函数体代码：变量赋值，函数调用，条件判断和表达式计算</li><li>函数执行完之后，执行栈弹出函数的上下文，把控制权返回给下一层上下文</li></ul></blockquote></li></ul><h5 id="执行上下文的组成" tabindex="-1"><a class="header-anchor" href="#执行上下文的组成" aria-hidden="true">#</a> 执行上下文的组成</h5><ol><li>词法环境（词法环境对象，执行过程中可能改变）：解析代码创建的标识符引用，存储 let 和 const 声明的变量 <blockquote><p>环境记录器组件：存储变量和函数声明的实际位置</p><p>outer 指针组件：对外部环境（父级作用域）的引用</p></blockquote></li><li>变量环境（词法环境对象，执行过程中永远不变）：保存上下文代码中通过变量表达式或函数表达式创建的绑定关系，存储 var 声明的变量 <blockquote><p>环境记录器组件：变量声明语句在执行上下文中创建的绑定关系</p><p>outer 指针组件：对外部环境（父级作用域）的引用</p></blockquote></li><li>代码执行状态</li></ol><h4 id="_2-作用域" tabindex="-1"><a class="header-anchor" href="#_2-作用域" aria-hidden="true">#</a> 2. 作用域</h4><ul><li><h5 id="_1-词法-作用域-词法分析创建-静态" tabindex="-1"><a class="header-anchor" href="#_1-词法-作用域-词法分析创建-静态" aria-hidden="true">#</a> 1.(词法)作用域（词法分析创建，静态）：</h5><p><strong>函数声明时</strong>所在的位置决定，是在编译阶段产生的一整套函数内标识符的访问规则</p></li><li><h5 id="_2-块作用域" tabindex="-1"><a class="header-anchor" href="#_2-块作用域" aria-hidden="true">#</a> 2.块作用域</h5><ul><li><p>with()内部</p></li><li><p>try/catch 中 catch 分句内部</p></li><li><p>let</p><ul><li>给块级作用域使用{ }显式创建块，将 let 关键字声明的变量绑定到这个显式块中</li><li>显示创建块有助于垃圾回收</li></ul></li></ul></li><li><h5 id="_3-函数作用域" tabindex="-1"><a class="header-anchor" href="#_3-函数作用域" aria-hidden="true">#</a> 3.函数作用域</h5><p>将变量和函数包装在函数里面，最小限度地暴露必要的内容，将其他内容隐藏起来</p><p><strong>在行内表达式外</strong>最好给函数指定函数名</p></li><li><h5 id="_4-作用域链" tabindex="-1"><a class="header-anchor" href="#_4-作用域链" aria-hidden="true">#</a> 4.作用域链</h5><p>内部函数访问外部函数的变量，采取链式查找的方式访问，这种结构就是作用域链<br> 是一个指向变量对象的指针列表，就是执行上下文中的词法环境和变量环境可以访问到的所有记录项的总和。</p><ul><li><p>上下文中的代码在执行时，会创建变量对象的一个作用域链</p></li><li><p><strong>作用域链增强</strong>：在当前作用域前端临时添加一个上下文，代码执行后会删除</p><ul><li><p>try/catch 语句的 catch 块</p><p>catch 语句会创建一个新的变量对象，包含要抛出的错误对象的声明</p></li><li><p>with 语句</p><p>with 语句会在作用域前端添加指定的对象，从而在大括号内，不用声明对象的引用</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> ob1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">sd</span><span class="token operator">:</span> <span class="token string">&#39;dsa&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ff</span><span class="token operator">:</span> <span class="token string">&#39;ttt&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">aa</span><span class="token operator">:</span> <span class="token string">&#39;sfew&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">with</span> <span class="token punctuation">(</span>ob1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> b1 <span class="token operator">=</span> sd <span class="token comment">//在作用域前端添加ob1对象的上下文</span>
  <span class="token keyword">let</span> a1 <span class="token operator">=</span> ff
  <span class="token keyword">let</span> c1 <span class="token operator">=</span> aa
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li><li><h5 id="_5-词法作用域和动态作用域" tabindex="-1"><a class="header-anchor" href="#_5-词法作用域和动态作用域" aria-hidden="true">#</a> 5.词法作用域和动态作用域</h5><ul><li>词法作用域关注<strong>在何处声明</strong>，动态作用域关注<strong>从何处调用</strong></li></ul></li><li><h5 id="_6-动态作用域-this-机制" tabindex="-1"><a class="header-anchor" href="#_6-动态作用域-this-机制" aria-hidden="true">#</a> 6.动态作用域（this 机制）</h5><blockquote><ul><li><strong>this 是在运行时绑定的，和函数的声明没有任何关系，只取决于函数的调用方式</strong></li><li><strong>this 既不指向函数自身也不指向函数的词法作用域</strong></li><li>通过函数的直接调用位置，判断函数内部 this 的绑定对象</li><li>this 的代码风格与箭头函数的代码风格最好二选一，利于维护</li></ul></blockquote><ul><li>(1)默认绑定</li></ul><blockquote><p>独立函数调用时，函数应用了 this 的默认绑定，因此 this 指向全局对象</p></blockquote><ul><li>(2)隐式绑定：在某个上下文对象中调用，this 绑定该上下文对象</li></ul><blockquote><p>调用位置有上下文对象，则函数调用中的 this 会绑定到这个上下文对象，</p><p>对象属性引用链只有上一层在调用位置中起作用</p></blockquote><ul><li>(3)显示绑定： 通过 call()或 apply()调用，this 绑定指定的对象</li></ul><blockquote><p><strong>call() 和 apply() 将 this 绑定到指定对象的上下文中</strong></p><p>第一个参数就是这个 this 对象，（如果该参数是原始值，则这个原始值会诶转换为它的对象形式，又称为“装箱”）</p></blockquote><ul><li>(4)硬绑定</li></ul><blockquote><p>当一个函数通过 bind（）手动调用去绑定 this，this 就会被强制绑定到被绑定的对象上，无论之后如何对该函数进行调用，都不会改变 this 的绑定</p></blockquote><ul><li>(5)软绑定</li></ul><blockquote><p>通过 softbind()将 this 绑定到除全局对象或 undefined 之外的一个默认对象，且不影响后期进行隐式绑定或显示绑定</p></blockquote><ul><li>(6)new 绑定</li></ul><blockquote><p>通过 new 调用，this 绑定的是新创建的对象</p></blockquote><ul><li>(7)忽略 this：</li></ul><blockquote><p>在 call 或者 apply 中第一个参数为 null，则 this 进行默认绑定</p><p><strong>安全的做法</strong>: 传入一个特殊的空对象，使用 Object.create(null)创建，将 this 限制在这个空对象中，避免 this 不小心默认绑定</p></blockquote><blockquote><ol><li>间接引用：将一个绑定的对象赋值给变量，会导致这个变量中的 this 应用默认绑定</li><li>箭头函数内部的 this 是绑定到箭头函数外层的作用域，而且绑定后无法被修改</li></ol></blockquote></li></ul><h3 id="五-模块化" tabindex="-1"><a class="header-anchor" href="#五-模块化" aria-hidden="true">#</a> (五) 模块化</h3><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">为什么要模块化？</p><p><strong>解决全局变量污染，命名冲突，文件依赖繁琐等问题</strong></p><ul><li><strong>必须具备的条件</strong><ol><li>必须有外部的封闭函数，这个函数至少被调用一次，创建这个函数的模块实例</li><li>封闭函数内部必须返回至少一个内部函数，这样内部函数才能在私有作用域中形成闭包，访问或修改私有的状态</li><li>import 可以将一个模块中的一个或多个 API 导入当前作用域中，module 则会将整个模块的 API 导入并绑定到一个变量上</li></ol></li></ul></div><h4 id="_1-commonjs-规范" tabindex="-1"><a class="header-anchor" href="#_1-commonjs-规范" aria-hidden="true">#</a> 1.CommonJS 规范</h4><p>只适合服务端，服务器端所有的模块都存放在本地，等待时间就是硬盘的读取时间，可以同步加载完成。但是，对于<strong>浏览器</strong>，模块都放在服务器端，等待时间取决于网速的快慢，可能要等很长时间，浏览器处于&quot;假死&quot;状态。 <strong>因此，浏览器端的模块，不能采用&quot;同步加载&quot;（synchronous），只能采用&quot;异步加载&quot;（asynchronous）</strong></p><ul><li><h5 id="输出的是值的拷贝-对值的修改不会影响模块内部" tabindex="-1"><a class="header-anchor" href="#输出的是值的拷贝-对值的修改不会影响模块内部" aria-hidden="true">#</a> 输出的是值的拷贝，对值的修改不会影响模块内部</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//导出方法</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> xxx
exports<span class="token punctuation">.</span>xxx <span class="token operator">=</span> xxx

<span class="token comment">//导入方式</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./module.js&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><h5 id="一切文件皆是模块" tabindex="-1"><a class="header-anchor" href="#一切文件皆是模块" aria-hidden="true">#</a> 一切文件皆是模块</h5><p>每个模块都有一个 module 实例，带有以下属性</p><ol><li>id/fileName</li><li>loaded</li><li>parent/children</li><li><strong>exports</strong></li></ol></li><li><h5 id="特点" tabindex="-1"><a class="header-anchor" href="#特点" aria-hidden="true">#</a> 特点</h5><ol><li>所有代码都运行在模块作用域，不会污染全局作用域</li><li>模块可以多次加载，且第一次加载后会被缓存，后续加载直接读取缓存结果</li><li>模块加载顺序按代码书写顺序（同步方法加载）</li><li>运行时确定模块的依赖关系</li></ol></li></ul><h4 id="_2-es-module" tabindex="-1"><a class="header-anchor" href="#_2-es-module" aria-hidden="true">#</a> 2.ES Module</h4><p>异步加载，独立模块依赖解析，编译时就能确定模块的依赖关系</p><ul><li><h5 id="输出的是对模块的引用" tabindex="-1"><a class="header-anchor" href="#输出的是对模块的引用" aria-hidden="true">#</a> 输出的是对模块的引用</h5><ol><li>不能在导入后对基本类型的数据进行修改，或者重新对引用类型赋值（会抛出错误）</li><li>模块内部或外部对引用类型的属性修改会互相反映出来</li></ol></li><li><h5 id="import-动态加载模块-不必预先加载所有模块" tabindex="-1"><a class="header-anchor" href="#import-动态加载模块-不必预先加载所有模块" aria-hidden="true">#</a> import()：动态加载模块，不必预先加载所有模块</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;./modules.js&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//返回一个Promise</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="六-变量" tabindex="-1"><a class="header-anchor" href="#六-变量" aria-hidden="true">#</a> (六) 变量</h3><h4 id="_1-变量声明关键字" tabindex="-1"><a class="header-anchor" href="#_1-变量声明关键字" aria-hidden="true">#</a> 1.变量声明关键字</h4><ul><li><p><strong>var</strong></p><ul><li>可用 var 关键字定义任何类型的数据</li><li>缺点：存在“声明提升”<strong>: 把所有</strong>变量声明<strong>提前到</strong>全局作用域顶部**或者 <strong>函数作用域的顶部</strong></li><li>var 在全局作用域中声明的变量会成为 window 的对象属性</li></ul></li><li><p><strong>let</strong></p><ul><li><p>块级作用域</p><p><strong>let 关键字定义的变量，作用域仅限于{... }内</strong></p></li><li><p>let<strong>不可重复声明</strong>（但 var 可以）</p></li><li><p>暂时性死区 TDZ (Temporal Dead Zone)</p><blockquote><p>在 let 关键字<strong>声明变量之前访问该变量</strong>，会抛出 ReferenceError，这就是暂时性死区</p></blockquote></li></ul></li><li><p><strong>const</strong></p><ul><li><strong>必须在声明变量的同时初始化变量</strong></li><li>尝试修改 const 变量的值会导致运行时报错 //TypeError:给常量赋值**（不能作为 for 循环中的迭代变量）**</li><li><strong>如果 const 变量存储的是引用值，修改引用值内部的属性不受限制</strong></li></ul></li></ul><h4 id="_2-变量提升" tabindex="-1"><a class="header-anchor" href="#_2-变量提升" aria-hidden="true">#</a> 2.变量提升</h4><ul><li><p><strong>任何变量和函数在内的所有声明都会在任何代码被执行前首先被处理</strong>：先声明后赋值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//2   函数声明被提升了</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo12</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//TypeError</span>

<span class="token keyword">var</span> <span class="token function-variable function">foo12</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//foo12的声明被提升，但是foo12的赋值在执行之后，所以会报错</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>函数声明会被提升到变量声明之前</strong></p><p><strong>要避免重复声明</strong>（重复定义函数声明，会导致后面的函数声明覆盖前面的声明）</p></li><li><p>变量提升的原因</p><p>JS 引擎在代码执行前会有一个预解析的过程，创建执行上下文，初始化声明的变量和函数。此时变量先赋值为 undefined，函数声明好可以使用</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">为什么要进行变量提升</p><ol><li>提高性能<br> JS 代码执行之前，先进行语法检查和预编译，解析变量和函数，分配内存空间</li><li>提高容错性<br> 使一些不规范的代码也可以正常运行</li></ol></div></li></ul><h3 id="七-数据类型" tabindex="-1"><a class="header-anchor" href="#七-数据类型" aria-hidden="true">#</a> (七) 数据类型</h3><p>不同于其他语言，<strong>JavaScript 中的变量没有类型，值才有</strong>，所以变量可以随时持有任何类型的值，主要分为以下两种类型</p><ul><li><p><strong>基本数据类型：最简单的数据(也叫原始值)</strong></p><blockquote><ul><li>6 种原始值：undefined,null,number,symbol,string,boolean</li><li>原始值不能有属性，尝试给原始值添加属性不会报错，但是会显示 undefined</li><li>通过值的复制进行赋值和传递</li></ul></blockquote></li><li><p><strong>引用数据类型：对象数据(也叫引用值)</strong></p><blockquote><ul><li>由多个值构成的<strong>对象</strong>,javascript 不允许直接访问内存位置，不能直接操作对象所在的内存空间，<strong>在操作对象时，实际上操作的是对该对象的引用</strong></li><li>把引用值从一个变量复制到另一个变量时，两个变量实际上指向同一个对象，因此<strong>在一个变量在对象上面的变化，也会在另一个变量上反映出来(通过引用复制的方式进行赋值和传递</strong>)</li><li>两个引用指向同一个值时，其中一个引用的修改不会影响另一个引用的指向</li></ul></blockquote><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> obj2 <span class="token operator">=</span> obj1
obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;zhuangjiahua&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//’zhuangjiahua</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_1-基本数据类型" tabindex="-1"><a class="header-anchor" href="#_1-基本数据类型" aria-hidden="true">#</a> 1.基本数据类型</h4><h5 id="_1-null" tabindex="-1"><a class="header-anchor" href="#_1-null" aria-hidden="true">#</a> (1) null</h5><ul><li>在定义将要保存引用值的变量时，使用 null 来初始化<div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">typeof(null)返回子为&#39;object&#39;</p><p>在 JavaScript 中，不同对象在底层都表现为二进制，<strong>前三位为 0 就会被判断为 object</strong><br> 而 <strong>null 的二进制全为 0</strong>，所以执行 typeof 时根据前三位为 0 也会返回 object</p></div></li></ul><h5 id="_2-undefined" tabindex="-1"><a class="header-anchor" href="#_2-undefined" aria-hidden="true">#</a> (2) undefined</h5><ul><li><p>仅声明变量而不进行初始化，会返回 undefined</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> a
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//undefined</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">//undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">undefined和null的异同</p><ul><li><p>进行数值转换时，undefined 转换为 NaN,而 null 会转化为 0</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">undefined</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token comment">//NaN</span>
<span class="token keyword">null</span> <span class="token operator">+</span> <span class="token number">0</span> <span class="token comment">//0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>typeof 操作符检测时，undefined 返回 undefined，而 null 会返回 object</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//object</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>undefined 的值时由 null 派生来的，非严格相等比较时会返回true</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">null</span> <span class="token operator">==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>null 指空值，undefined 指没有值</p></li><li><p>null 指目前没有值，undefined 指从未赋值</p></li><li><p>null 不能用来为当作变量使用和赋值，undefined 可以用来被当作变量使用和赋值</p></li></ul></div></li></ul><h5 id="_3-boolean" tabindex="-1"><a class="header-anchor" href="#_3-boolean" aria-hidden="true">#</a> (3) boolean</h5><p>两个字面值 true和false</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><ul><li>true/false和1/0没有必然的联系，只在类型转换时才相等</li></ul><blockquote><p><strong>假值</strong>(逻辑上讲，假值之外的值都是真值)</p><ul><li><code>undefined</code></li><li><code>null</code></li><li><code>0</code>,<code>-0</code>，<code>NaN</code></li><li><code>false</code></li><li><code>“ ”</code></li></ul></blockquote></div><h5 id="_4-number" tabindex="-1"><a class="header-anchor" href="#_4-number" aria-hidden="true">#</a> (4) number</h5><ul><li><h6 id="无穷值-infinity和-infinity" tabindex="-1"><a class="header-anchor" href="#无穷值-infinity和-infinity" aria-hidden="true">#</a> 无穷值 <code>Infinity</code>和<code>-Infinity</code></h6><blockquote><ul><li>数值运算结果溢出时，结果为 <code>Infinity</code> 或 <code>-Infinity</code></li><li>无穷数除以无穷数，结果返回 NaN</li><li>有穷数和 Infinity 的除法中，任意一者为负，则结果为 -0； 二者都为负数，结果为 0</li></ul></blockquote></li><li><h6 id="零值-0和-0" tabindex="-1"><a class="header-anchor" href="#零值-0和-0" aria-hidden="true">#</a> 零值 <code>0</code>和<code>-0</code></h6><blockquote><ul><li><strong>加减法运算不会得到负零</strong></li><li>对<code>-0</code>进行字符串化会返回 0，但是<code>“-0”</code>数值化会返回 <code>-0</code></li><li>JSON.stringify(-0)返回”0“，JSON.parse(“ -0 ”)返回 -0</li><li><strong>0 === -0返回true</strong>，但<strong>Object.is(0, -0)返回false</strong></li></ul></blockquote></li><li><h6 id="nan-not-a-number-不是数字的数字" tabindex="-1"><a class="header-anchor" href="#nan-not-a-number-不是数字的数字" aria-hidden="true">#</a> NaN (Not a Number)不是数字的数字</h6><p><strong>用于表示本来要返回数值的操作失败了</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//NaN</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">5</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//Infinity</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">//-Infinity</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p>NaN 不等于包括 NaN 本身在内的任何值 (这是JS早期被保留的错误)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">//false, </span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>isNaN()函数：接收任意数据类型的参数，函数会尝试将该参数转换为数值，<strong>任何不能转换为数值的都会返回 true</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false 10是数值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&#39;10&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false &quot;10&quot;可以转换为数值10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token string">&#39;blue&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true  &quot;blue&quot;不可以转换为数值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false  可以转换为数值1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>使用Number.isNaN()判断比较可靠(因为字符串不是数值类型，isNaN却返回true)</p><p>进行某些特殊数值的比较，使用<strong>Object.is(value1，value2)<strong>判断两个值是否</strong>绝对相等</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div></li></ol></li><li><h6 id="number-函数-将任何数据类型的值转换为数值" tabindex="-1"><a class="header-anchor" href="#number-函数-将任何数据类型的值转换为数值" aria-hidden="true">#</a> Number()函数：将任何数据类型的值转换为数值</h6><table><thead><tr><th>数据类型</th><th>Number()转换规则</th></tr></thead><tbody><tr><td>数值</td><td>直接返回</td></tr><tr><td>布尔值</td><td>true 转换为 1，false 转换为 0</td></tr><tr><td>null</td><td>0</td></tr><tr><td>undefined</td><td>NaN</td></tr><tr><td>对象</td><td>调用 valueOf()方法，若结果为 NaN，则调用 toString()方法</td></tr></tbody></table><table><thead><tr><th>数据类型(字符串)</th><th>Number()转换规则</th></tr></thead><tbody><tr><td>包含数值字符（带正负号，小数点，十六进制）</td><td>转换为对应的十进制数值，或浮点值</td></tr><tr><td>空字符串 “ ”</td><td>0</td></tr><tr><td>包含上述之外的其他字符</td><td>NaN</td></tr></tbody></table></li><li><h6 id="parseint-parsefloat-函数-用于将字符串转换为数值-有效的数字字符范围是0-到-9-a-到-i-区分大小写" tabindex="-1"><a class="header-anchor" href="#parseint-parsefloat-函数-用于将字符串转换为数值-有效的数字字符范围是0-到-9-a-到-i-区分大小写" aria-hidden="true">#</a> parseInt()，parseFloat()函数，用于将字符串转换为数值,有效的数字字符范围是<strong>0 到 9，a 到 i（区分大小写）</strong></h6><table><thead><tr><th>parseInt（）</th><th>转换规则</th></tr></thead><tbody><tr><td>第一个字符不是数值或者正负号，或者没有数值字符</td><td>NaN</td></tr><tr><td>第一个字符开始直至字符串末尾</td><td>只输出数值字符</td></tr><tr><td><strong>双参数，字符加数值格式（建议始终使用双参数）</strong></td><td>parseInt（&quot;0xA&quot;,16）转换为 10</td></tr></tbody></table><table><thead><tr><th>parseFloat（）</th><th>转换规则</th></tr></thead><tbody><tr><td>十六进制数值</td><td>0</td></tr><tr><td>浮点数只取第一个小数点</td><td>如 22.4.5，转换为 22.4</td></tr></tbody></table><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">值的范围</p><p><strong>ECMAscript 可以表示的最大值最小值保存在 Number. MAX_VALUE，Number. MIN_VALUE中</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  Number<span class="token punctuation">.</span><span class="token constant">MAX_VALUE</span>  <span class="token comment">//1.7976931348623157e+308</span>
  Number<span class="token punctuation">.</span><span class="token constant">MIN_VALUE</span>  <span class="token comment">//5e-324，  无限接近于 0</span>
  <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></li></ul><h5 id="_5-string" tabindex="-1"><a class="header-anchor" href="#_5-string" aria-hidden="true">#</a> (5) String</h5><ul><li><p>可以用双引号&quot; &quot;，单引号 &#39; &#39;，反引号 `` 表示</p><table><thead><tr><th>字符字面量</th><th>含义</th></tr></thead><tbody><tr><td>\t \n \b \f \r</td><td>制表，换行，退格，换页，回车</td></tr><tr><td>\</td><td>反斜杠</td></tr><tr><td>\xnn \unnnn</td><td>十六进制 nn 或 nnnn 表示的字符</td></tr></tbody></table><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">字符串特点</p><p><strong>字符串创建后，其值就不能更改</strong>,要修改某个变量中的字符串值，必须先销毁原始字符串</p></div></li><li><p><strong>toString()</strong>: 转换为字符串</p><ul><li>可接收数值，布尔值，字符串值（返回自身的一个副本），对象；null 和 undefined 没有该方法</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">11</span>
<span class="token keyword">let</span> ageString <span class="token operator">=</span> age<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//字符串&quot;11&quot;</span>
<span class="token keyword">let</span> bool <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token keyword">let</span> booString <span class="token operator">=</span> boo<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//字符串&quot;true&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>toString()<code>&lt;u&gt;</code>默认转换为十进制数值字符串表示 <code>&lt;/u&gt;</code></th><th>let num=10</th><th>输出</th></tr></thead><tbody><tr><td>toString(2)</td><td>10</td><td>&quot;1010&quot;</td></tr><tr><td>toString(8)</td><td>10</td><td>&quot;12&quot;</td></tr><tr><td>toString(10)</td><td>10</td><td>&quot;10&quot;</td></tr><tr><td>toString(16)</td><td>10</td><td>&quot;a&quot;</td></tr></tbody></table></li><li><p><strong>String()转型函数</strong>：</p><ul><li><p>功能和 toString()相同，但需要传入参数</p></li><li><p>不确定某个值是不是 null 或 undefined，可使用 String()函数，转换结果返回 null 或 undefined</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token keyword">null</span>
<span class="token keyword">let</span> textString <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">//null</span>

<span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token keyword">undefined</span>
<span class="token keyword">let</span> textString <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">//undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>模板字面量</strong>：可以保留换行字符，可跨行定义字符</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">&#39;java\nscript	&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">//保留换行字符</span>
<span class="token comment">//java</span>
<span class="token comment">//script</span>

<span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">java	
script</span><span class="token template-punctuation string">`</span></span> <span class="token comment">//跨行定义字符串，但必须使用反引号</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token comment">//保留换行字符</span>
<span class="token comment">//java</span>
<span class="token comment">//script</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol><li><p><strong>字符串插值:</strong> <strong>在＄{ }中使用一个 JavaScript 表达式实现</strong>，所有插入的值都会使用 toString()强制转换为字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">&#39;second&#39;</span>
<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> to the </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>text<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> power is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>value <span class="token operator">*</span> value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token template-punctuation string">`</span></span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>模板字面量标签函数</strong></p></li><li><p><strong>原始字符串</strong>：使用默认的 String.raw 标签函数(转义字符无法转换成转义序列的形式)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">first line \n second line</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token comment">//first line</span>
<span class="token comment">//second line</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span>raw<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">first line \n second line</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token comment">//first line \n second line				换行符不起作用</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li></ul></li></ul><h5 id="_6-symbol" tabindex="-1"><a class="header-anchor" href="#_6-symbol" aria-hidden="true">#</a> (6) symbol</h5><p>符号是原始值，符号实例是唯一，不可变的</p><ol><li>符号用途：<strong>确保对象属性使用唯一标识符，不会发生属性冲突的危险</strong></li><li>符号需要使用 Symbol（）函数初始化，（不能通过 new 关键字创建）</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token comment">//Symbol()</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> sym<span class="token punctuation">)</span> <span class="token comment">//symbol</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>通过 Symbol（）函数初始化时，也可以传入一个字符串参数<strong>作为对符号的描述</strong>，</li></ol><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>let sym=Symbol(&#39;foo&#39;);
console.log(sym);		//symbol(foo)
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>但该参数和符号的定义或标识完全无关</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span> <span class="token comment">//symbol(foo)</span>

<span class="token keyword">let</span> bol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bol<span class="token punctuation">)</span> <span class="token comment">//symbol(foo)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sym <span class="token operator">==</span> bol<span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>Symbol()函数不能与 new 关键字一起使用，为了避免创建符号包装对象</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> mysymbol <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//TypeError: Symbol is not a constructor</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>若确实想使用符号包装对象，可借用 Object（）函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> mySymbol <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> mySymbolObject <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>mySymbol<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mySymbolObject<span class="token punctuation">)</span> <span class="token comment">//object</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li><strong>使用全局注册表</strong>：先检查注册表，若不存在对应的符号，则创建新符号并添加到注册表中，</li></ol><p>若存在与该字符串对应的符号，则返回该符号实例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> fooGlobalSymbol<span class="token operator">=</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//创建新符号，并添加到全局注册表中</span>

<span class="token keyword">let</span> otherGlobalSymbol<span class="token operator">=</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>；
<span class="token comment">//重用已有符号</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fooGlobalSymbol<span class="token operator">==</span>otherGlobalSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>在全局注册表中定义的符号和 Symbol（）定义的符号并不等同</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> localSymbol<span class="token operator">=</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> otherGlobalSymbol<span class="token operator">=</span>Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>；

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>localSymbol<span class="token operator">==</span>otherGlobalSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>传给 Symbol.for()的值都会被转换为字符串</p></li><li><p>使用 Symbol.keyFor()查询全局注册表，接收符号，返回全局符号对应的字符串键值，如果查询的不是全局符号，则返回 undefined</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> global <span class="token operator">=</span> Symbol<span class="token punctuation">.</span><span class="token function">for</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>global<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//foo  返回全局符号对应的字符串值</span>

<span class="token keyword">let</span> sym <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Symbol<span class="token punctuation">.</span><span class="token function">keyFor</span><span class="token punctuation">(</span>sym<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//undefined  查询的不是全局符号</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="6"><li><p>使用符号作为属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">3132</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;fool&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token string">&#39;fssd&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> s2<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;bar val&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span> <span class="token comment">//{Symbol(foo): &quot;fssd&quot;, Symbol(3132): &quot;bar val&quot;}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span>s1<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;fssd&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span>s2<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;gggg&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//{Symbol(foo): &quot;fssd&quot;, Symbol(3132): &quot;gggg&quot;}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="_2-引用数据类型" tabindex="-1"><a class="header-anchor" href="#_2-引用数据类型" aria-hidden="true">#</a> 2.引用数据类型</h4><h5 id="_1-基本引用类型" tabindex="-1"><a class="header-anchor" href="#_1-基本引用类型" aria-hidden="true">#</a> (1)基本引用类型</h5><ul><li><h6 id="date" tabindex="-1"><a class="header-anchor" href="#date" aria-hidden="true">#</a> Date</h6><p>只有构造形式，没有字面量形式</p><ol><li>创建日期对象 <strong>let now =new Date();</strong>（在不给 Date 构造函数传参数的情况下啊，创建的对象保存当前日期和时间）、</li><li><strong>Date.parse()</strong> 接收一个表示日期的字符串参数</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">&#39;may,23,2019&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span> <span class="token comment">//Thu May 23 2019 00:00:00 GMT+0800 (GMT+08:00)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li><strong>Date.UTC()，<strong>传的参数是 <strong>年，零起点月数</strong>（1 月是 0，2 月是 1，以此类推），<strong>日</strong>（1 - 31），<strong>时</strong>（0 - 23）只有</strong>前两个参数是必需的</strong></li><li>Date.now()</li><li><strong>继承的方法</strong></li></ol></li><li><h6 id="regexp" tabindex="-1"><a class="header-anchor" href="#regexp" aria-hidden="true">#</a> RegExp</h6><ol><li>支持正则表达式</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> pattern <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">cat</span><span class="token regex-delimiter">/</span><span class="token regex-flags">gi</span></span> <span class="token comment">//匹配所有&#39;cat&#39;，忽略大小写（字面量创建）</span>
<span class="token keyword">let</span> pattern2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&#39;.at&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;gi&#39;</span><span class="token punctuation">)</span> <span class="token comment">//匹配所有&#39;at&#39;结尾的三字符组合，忽略大小写(RegExp构造函数创建)</span>

<span class="token keyword">let</span> string <span class="token operator">=</span> <span class="token string">&#39;bat cat fat rat&#39;</span>
<span class="token keyword">let</span> match <span class="token operator">=</span> pattern<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>index<span class="token punctuation">)</span> <span class="token comment">//3         字符串中匹配模式的起始位置，从0开始</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>捕获组</strong>：捕获组是<strong>正则表达示中以()括起来的部分</strong>，每一对()是一个捕获组。</p><p>创建正则表达式</p><ol><li><p>构造函数（不常用，但灵活）</p><blockquote><p>let reg = new RegExp(arg1,arg2)</p><ol><li>arg1:正则表达式，字符串类型</li><li>arg2：匹配模式，字符串类型</li><li>i 忽略大小写</li><li>g 全局匹配</li></ol></blockquote><p>字面量（常用，但简单）</p><blockquote><p>语法 let 变量 =/正则表达式/匹配模式</p><ol><li>/[]/中的内容为或关系，例如[a-z]表示任意小写字母，[A-z]表示任意大小写字母</li><li>/[^]/查找不在方括号之间的字符，例如 <code>[^ab]</code>表示查找不在方括号内的字符</li><li>// 正好出现 n 次</li><li>/a/ (n&gt;m) 表示 a 出现 m 到 n 次</li><li>/a/ 表示 a 出现 m 次及以上</li><li>/n+ / 表示至少一个 n</li><li>/n* / 表示 0 个或多个 n</li><li>/n?/ 表示 0 个或 1 个 n</li><li>^n 匹配开头的 n</li><li>n$ 匹配结尾的 n （$后面不能有其他内容）</li><li>/^xxxx$/ 同时出现^和$ 表示必须完全符合正则表达式 xxxx</li><li><code>/./</code>表示任意字符，所以需要加转义字符/\./</li><li>斜杠 <code>\</code>也需要转义</li><li>\w 任意数字，字母，下划线 （相当于 <code>[A-z0-9_]</code>） \W 除了任意数字，字母，下划线</li><li>\s 空格 \S 除了空格</li><li><code>/^\s*|\s*$/g</code> 匹配开头或结尾的多个空格</li><li>\b 单词边界（首尾带空格的单词） \B</li><li>\d 任意数字 \D 除了任意数字</li></ol></blockquote></li></ol></li></ul><h5 id="_2-原始值封装" tabindex="-1"><a class="header-anchor" href="#_2-原始值封装" aria-hidden="true">#</a> (2)原始值封装</h5><p>如果想要使用原始值上的方法(<strong>把原始值当成对象使用时</strong>)，JavaScript 会<strong>自动将这个值”封箱“为其对应的对象封装</strong></p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>Number，Boolean，String 三种类型可以作为特殊的引用类型，也就是创建这三种类型的实例（对象），可以让原始值拥有对象的行为，<strong>特别地，null 和 undefined 不能被封装</strong></p><ul><li><p>创建实例，调用实例的特定方法，销毁实例</p></li><li><p>原始值的包装类型与引用类型（对象）的主要区别是：<strong>生命周期短</strong></p></li><li><p><strong>引用类型会在离开作用域时被销毁，原始值包装类型则只存在于访问它的代码执行期间</strong>，所以不能在运行期间给原始值添加属性和方法</p></li></ul></div><ul><li><p>使用 new 调用原始值包装类型的构造函数，区别于调用同名的转型函数（得到的对象为封装对象）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token string">&#39;1227&#39;</span>
<span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">//构造函数（包装函数）</span>
<span class="token comment">//不等价于</span>
<span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">//转型函数</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> num<span class="token punctuation">)</span> <span class="token comment">//object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> num1<span class="token punctuation">)</span> <span class="token comment">//number</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用valueOf()可以将封装对象拆封为基本类型值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> aaaa <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> aaaa<span class="token punctuation">)</span> <span class="token comment">//object</span>
<span class="token keyword">let</span> bbbb <span class="token operator">=</span> aaaa<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> bbbb<span class="token punctuation">)</span> <span class="token comment">//string</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><h6 id="boolean-包装类型" tabindex="-1"><a class="header-anchor" href="#boolean-包装类型" aria-hidden="true">#</a> Boolean 包装类型</h6><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> falseValue <span class="token operator">=</span> <span class="token boolean">false</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> falseValue <span class="token operator">&amp;&amp;</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">//false</span>

<span class="token keyword">let</span> falseobj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> falseobj <span class="token operator">&amp;&amp;</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">//true   因为所有对象在Boolean表达式中都会被转化为true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>最好不要使用 Boolean 包装类型</strong></p></li><li><h6 id="number-包装类型" tabindex="-1"><a class="header-anchor" href="#number-包装类型" aria-hidden="true">#</a> Number 包装类型</h6><p>重写了 valueof()，toString()，toLocaleString()方法，valueof()返回 Number 对象表示的原始数值</p><ul><li><p><strong>toFixed()</strong>：返回包含指定小数点位数的数字字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//10.000</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>toExpomemtial();</strong> 传入的参数指定小数点的位数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> number <span class="token operator">=</span> <span class="token number">10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>number<span class="token punctuation">.</span><span class="token function">toExponential</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//1.00e+1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>toPrecision()</strong>： 接收一个参数，表示结果中的总位数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">99</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPercision</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//1e+2		向上舍入</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPercision</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//99</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span><span class="token function">toPercision</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//99.0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>isInteger()</strong> : 用于辨别一个数值是否保存为整数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">1.0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span><span class="token number">1.001</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><h6 id="string-包装类型" tabindex="-1"><a class="header-anchor" href="#string-包装类型" aria-hidden="true">#</a> String 包装类型</h6><ul><li><p><strong>charAt()</strong>：返回给定索引位置的字符</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> jiahua <span class="token operator">=</span> <span class="token string">&#39;zhuangjiahua&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jiahua<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//z</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>charCodeAt()</strong> :</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&#39;zhuangjiahua&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//99   a的十六进制数为63，对应十进制数为99</span>

<span class="token keyword">let</span> jiahua <span class="token operator">=</span> <span class="token string">&#39;ab😊N&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jiahua<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//98</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jiahua<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//55357</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jiahua<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//56842</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>codePointAt():</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> jiahua <span class="token operator">=</span> <span class="token string">&#39;ab😊N&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jiahua<span class="token punctuation">.</span><span class="token function">codePointAt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//128522</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>fromCharCode()</strong> :</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//abN</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p><strong>fromCodePoint()</strong> : 返回对应字符拼接起来的字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">128522</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//😊</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>String<span class="token punctuation">.</span><span class="token function">fromCodePoint</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">,</span> <span class="token number">98</span><span class="token punctuation">,</span> <span class="token number">128522</span><span class="token punctuation">,</span> <span class="token number">78</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//ab😊N</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>normalize()</p></li></ul><p>Unicode 字符有多种编码方式，不同编码方式可以表示同一个字符，但是比较操作符只看编码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> a1 <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">0x00c5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
a2 <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">0x212b</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
a3 <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token number">0x0041</span><span class="token punctuation">,</span> <span class="token number">0x030a</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1<span class="token punctuation">,</span> a2<span class="token punctuation">,</span> a3<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1 <span class="token operator">==</span> a2<span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>concat()</strong> : 字符串拼接，（不改变被拼接的字符串）<strong>一般情况下使用+号比较方便</strong></p></li><li><p><strong>提取子字符串方法</strong></p><ul><li><p>substring(startIndex, endIndex?)：</p><p>从 <code>startIndex</code> 开始提取字符，直到（<em>但不包括</em>）<code>endIndex</code>部分的字符串。</p><table><thead><tr><th>参数</th><th></th></tr></thead><tbody><tr><td>startIndex</td><td>返回子字符串中第一个要包含的字符的索引。</td></tr><tr><td>endIndex?</td><td>(可选) 返回子字符串中第一个要排除的字符的索引。</td></tr><tr><td></td><td></td></tr></tbody></table></li><li><p>substr(startIndex, length) <strong>避免使用这个</strong></p></li></ul></li><li><p><strong>字符串位置方法</strong></p><ul><li><p><strong>indexOf()</strong> 从字符串开头开始查找子字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//从字符串开头开始查找，返回匹配到的第一个目标字符的位置</span>
<span class="token keyword">let</span> mgs <span class="token operator">=</span> <span class="token string">&quot;huizhou university&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;i&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//2</span>

<span class="token comment">//有第2个参数时</span>
<span class="token comment">//从第2个参数位置开始查找（忽略该位置之前的字符），返回匹配到的第一个目标字符的位置</span>
<span class="token keyword">let</span> mgs <span class="token operator">=</span> <span class="token string">&quot;huizhou university&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mgs<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">&#39;i&#39;</span>，<span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>lastIndexOf()</strong> 从字符串末尾开始反向查找子字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//从字符串尾部开始查找，返回匹配到的第一个目标字符的位置（位置仍然是字符串正数的位置）</span>
<span class="token keyword">let</span> mgs <span class="token operator">=</span> <span class="token string">&quot;huizhou university&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mgs<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&#39;i&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//15</span>

<span class="token comment">//有第2个参数时</span>
<span class="token comment">//从第2个参数位置反向开始查找（忽略该位置之后的字符），返回匹配到的第一个目标字符的位置</span>
<span class="token keyword">let</span> mgs <span class="token operator">=</span> <span class="token string">&quot;huizhou university&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mgs<span class="token punctuation">.</span><span class="token function">lastIndexOf</span><span class="token punctuation">(</span><span class="token string">&#39;i&#39;</span>，<span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>字符串包含方法</strong></p><p>ES6 新增了 3 个用于<strong>判断字符串中是否包含另一个字符串</strong>的方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&#39;JavaScript not Java&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p><strong>startsWith()</strong></p><p>检查<strong>从 0 位置开始的匹配项</strong>，返回布尔值 true 或者 false</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;Java&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;Script&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>endsWith()</strong></p><p>检查从 <strong>（原字符串长度 — 要检查的字符串长度）</strong> <strong>的位置开始的匹配项</strong>，返回布尔值 true 或者 false</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;Java&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;Script&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//false;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>includes()</strong></p><p><strong>检查整个字符串中的匹配项</strong>，返回布尔值 true 或者 false</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;Java&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">&#39;Script&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//true;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>trim()</strong></p></li></ul><p><strong>创建字符串的一个副本，并删除字符串前后的空格符</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&#39;   JavaScript not Java   &#39;</span>
<span class="token keyword">let</span> msgg <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msgg<span class="token punctuation">)</span> <span class="token comment">//&#39;JavaScript not Java&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span> <span class="token comment">//&#39;   JavaScript not Java   &#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>repeat（）</strong></li></ul><p><strong>接收一个参数，并将字符串复制对应的次数</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&#39;Java &#39;</span>
<span class="token keyword">let</span> stringcopy <span class="token operator">=</span> message<span class="token punctuation">.</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringcopy<span class="token punctuation">)</span> <span class="token comment">//Java Java Java</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>padStart()和 padEnd()</strong></li></ul><p>在字符串开头或结尾的一边复制字符，</p><p><strong>第一个参数为填充字符串之后，字符串字符的个数</strong>（只有一个参数时，默认填充空格）</p><p><strong>第二个参数为指定的字符（若为多个字符的字符串，会自动截断以匹配指定长度）</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> foosrt <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foosrt<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&#39;     foo&#39;		自动填充空格</span>

<span class="token keyword">let</span> foosrt <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foosrt<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//&#39;foo     &#39;	    自动填充空格</span>

<span class="token keyword">let</span> foosrt <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foosrt<span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;23&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//23232foo</span>

<span class="token keyword">let</span> foosrt <span class="token operator">=</span> <span class="token string">&#39;foo&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foosrt<span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token string">&#39;23&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//foo23232</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>字符串迭代与解构</strong></p><p>字符串原型上暴露了迭代器@iterator 方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&#39;jia&#39;</span>
<span class="token keyword">let</span> stringIter <span class="token operator">=</span> message<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//{value: &quot;j&quot;, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//{value: &quot;i&quot;, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//{value: &quot;a&quot;, done: false}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stringIter<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//{value: undefined, done: true}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>for-of 循环可以通过迭代器按序号访问每个字符</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> a <span class="token keyword">of</span> <span class="token string">&#39;hua&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//h</span>
<span class="token comment">//u</span>
<span class="token comment">//a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>字符串大小写转换 toLowerCase() ，toUpperCase()</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&quot;huizhou university&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//&quot;HUIZHOU UNIVERSITY&quot;</span>

<span class="token keyword">let</span> message1 <span class="token operator">=</span> <span class="token string">&quot;HUIZHOU UNIVERSITY&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//&quot;huizhou university&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>字符串模式匹配</strong></p><p>与正则表达式 RegExp 相似</p><ul><li><p>search()</p></li><li><p><strong>replace()</strong> : 第一个参数是 RegExp 对象或字符串，第二个参数是字符串或函数</p><p>如果第一个参数是字符串，则会替换匹配的第一个字符串，第一个参数是带全局标记的正则表达式，则替换所有字符串</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> text <span class="token operator">=</span> <span class="token string">&#39;bat cat fat rat&#39;</span>
<span class="token keyword">let</span> string <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;at&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ond&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token comment">//bond cat fat rat</span>

<span class="token keyword">let</span> string <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&#39;/at/g&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ond&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token comment">//bond cond fond rond</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>localeCompare()</strong></p><p>按照字母表顺序比较两个字符串，<strong>调用该方法的原字符串在前头则返回-1，相等则返回 0，在后头则返回 1</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> message <span class="token operator">=</span> <span class="token string">&#39;aboard&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>message<span class="token punctuation">.</span><span class="token function">localeCompare</span><span class="token punctuation">(</span><span class="token string">&#39;brush&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//-1  因为 aboard 在 brush前头</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h5 id="_3-单例内置对象" tabindex="-1"><a class="header-anchor" href="#_3-单例内置对象" aria-hidden="true">#</a> (3)单例内置对象</h5><ul><li><h6 id="global-对象" tabindex="-1"><a class="header-anchor" href="#global-对象" aria-hidden="true">#</a> Global 对象</h6><p>事实上，不存在全局变量或全局函数，<strong>每一个在全局作用域定义的变量或函数，都会成为 Global 的属性。</strong>,包括所有原生引用类型构造函数，特殊值（undefined，null，NaN，Infinity）都是 Global 对象的属性</p><ul><li><p>URI 编码方法</p><blockquote><ul><li>encodeURI()不会编码属于 URI 组件的特殊字符（ 如**：<strong>，</strong>/** ，<strong>？</strong>，<strong>#</strong> ）</li><li><strong>encodeURIComponent()<strong>会将所有非字母字符替换成相应的编码形式</strong>(使用频率较高)</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> uri <span class="token operator">=</span> <span class="token string">&#39;http://www.baidu.com/illegal value.js#start&#39;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURI</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//http://www.baidu.com/illegal%20value.js#start</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>uri<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//http%3A%2F%2Fwww.baidu.com%2Fillegal%20value.js%23start</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li><li><p>eval()</p><blockquote><p>**接收一个字符串，是任意一个要执行的 ECMAscript 字符串（JavaScript 代码)**PS：！需谨慎使用 eval（）</p><ul><li><strong>在 eval()内部定义的任何变量或函数都不会被提升</strong></li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;var mhj=&#39;jijijiji&#39;; var kkk=&#39;dssds&#39;&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>kkk<span class="token punctuation">)</span> <span class="token comment">//dssds</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mhj<span class="token punctuation">)</span> <span class="token comment">//jijijiji</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>严格模式下，eval(）内部定义的变量和函数无法被外部访问。</li></ul></blockquote></li></ul></li><li><h6 id="window-对象" tabindex="-1"><a class="header-anchor" href="#window-对象" aria-hidden="true">#</a> window 对象</h6><ul><li><p>浏览器环境下的Global对象就是window对象</p></li><li><p><strong>当一个函数没有明确指定 this 值的情况下，this值等于 Global 对象</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;jiahua&#39;</span> <span class="token comment">//全局变量，也就是Global的属性</span>
<span class="token keyword">var</span> name1 <span class="token operator">=</span> <span class="token string">&#39;huizhou&#39;</span> <span class="token comment">//全局变量，也就是Global的属性</span>

<span class="token keyword">function</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token comment">//this值就是Global对象，等价于 return Global.name;</span>
<span class="token punctuation">}</span>

<span class="token function">setName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//jiahua</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><h6 id="math-对象" tabindex="-1"><a class="header-anchor" href="#math-对象" aria-hidden="true">#</a> Math 对象</h6><table><thead><tr><th>方法</th><th>作用</th></tr></thead><tbody><tr><td>Math.min()</td><td>两数取最小</td></tr><tr><td>Math.max()</td><td>两数取最大</td></tr><tr><td>Math.<strong>random()</strong></td><td><strong>返回一个 0~1 范围的随机数（包含 0 但不包含 1）</strong></td></tr><tr><td>Math.ceil()</td><td>向上舍入为最接近的整数</td></tr><tr><td>Math.floor()</td><td>向下舍入为最接近的整数</td></tr><tr><td>Math.round()</td><td>四舍五入</td></tr><tr><td>Math.fround()</td><td>返回数值最接近的单精度（32 位）浮点值</td></tr></tbody></table></li></ul><h5 id="_4-集合引用类型" tabindex="-1"><a class="header-anchor" href="#_4-集合引用类型" aria-hidden="true">#</a> (4)集合引用类型</h5><ul><li><h5 id="object-对象" tabindex="-1"><a class="header-anchor" href="#object-对象" aria-hidden="true">#</a> Object（对象）</h5><ul><li><p>属性的增加，修改，删除</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;jiahja&#39;</span> <span class="token comment">//若obj对象没有name属性，则增加一个键值为&#39;jiahua&#39;的name属性</span>
<span class="token comment">//若obj对象已有name属性，则修改该属性的键值为&#39;jiahua&#39;</span>

<span class="token keyword">delete</span> obj<span class="token punctuation">.</span>name <span class="token comment">//删除obj对象的name属性</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>若想让属性不能再被赋值，可用 Object.freeze()创建对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> obj <span class="token operator">=</span> Objecet<span class="token punctuation">.</span><span class="token function">freeze</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;object&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;newObject&#39;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">//{name:&#39;object&#39;}	无法再给对象的属性赋值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对象的属性名永远是字符串，<strong>.</strong> 点操作符要求满足标识符的命名规范，[]操作符则可以接收任何字符串</p><table><thead><tr><th>Object 的方法</th><th></th></tr></thead><tbody><tr><td>hasOwnProperty(propertyName)</td><td>只判断对象自身指定名称的属性，不会检查原型链上的属性**（要检查的属性名必须是字符串）**</td></tr><tr><td>constructor</td><td>用于创建当前对象的函数</td></tr><tr><td>valueof()</td><td></td></tr><tr><td>getOwnPropertyNames()</td><td>获取对象的所有实例属性和函数（不包含原型链继承的属性和函数）</td></tr><tr><td><strong>assign()</strong></td><td>浅赋值，第一个参数接收目标对象，其余参数接收源对象，且对函数只复制引用，不会赋值对象属性的特性（无法回滚已经完成的修改）</td></tr><tr><td><strong>defineProperty()和defineProperties()</strong></td><td>自定义对象的属性，包含了属性值，可写，可枚举，可修改</td></tr><tr><td>for..in</td><td>遍历对象中的可枚举属性，检查对象中的属性名是否存在，<strong>会搜索原型链</strong></td></tr></tbody></table></li><li><p>属性值简写</p><p>当属性名和变量名一样时，会被自动解释为同名的属性键，若没找到该同名变量，会抛出错误</p></li><li><p>属性的类型</p><ul><li><strong>属性描述符 (也叫属性的特性)</strong><blockquote><ul><li><p><strong>属性值 value</strong></p><ul><li>任意类型数据</li><li>访问器函数 { get: [Function: get], set: [Function: set] },</li></ul></li><li><p><strong>可写 writable</strong><br> writable：false ：对于具有不可写特性的属性，修改其属性的值会静默失败，不报错(严格模式下会报错)</p></li><li><p><strong>可枚举 enumerable</strong><br> 属性的枚举性会影响以下行为的结果</p><ol><li>for in （不可枚举的属性不会被遍历出来）</li><li>Object.keys（只返回对象本身具有的可枚举的属性）</li><li>JSON.stringify() （此方法也只读取对象本身可枚举属性，并序列化为 JSON 字符串）</li><li>Object.assign() （此方法也是复制自身可枚举的属性，进行浅拷贝）</li></ol></li><li><p><strong>可配置 configurable</strong><br> configurable：false：不可配置的属性，尝试修改其属性的特性会报错 TypeError<br><strong>configurable 修改为 false 时单向操作，设置后无法撤销，也会导致这个属性无法被删除</strong></p></li></ul></blockquote></li></ul><ol><li><p><strong>数据属性 （作为数据本身的特性）</strong></p><p>属性描述符value保存数据值本身，并从这个位置读取或写入</p><p>其余属性描述符 Configurable，Enumerable，Writable只能通过 Object.defineProperty设置</p></li><li><p><strong>访问器属性 （数据访问行为的特性）</strong></p><p>属性描述符value包含一个获取函数 getter 和一个设置函数 setter</p><p>其余属性描述符 Configurable，Enumerable，Writable只能通过 Object.defineProperty设置</p></li><li><p><strong>Object.getOwnPropertyDescriptor()</strong>: 取得指定属性的属性描述符对象 (以此判断属性的类型)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span> <span class="token comment">//数据属性</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token literal-property property">learn</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//访问器属性</span>
    <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> newName
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">/*
{
  value: &#39;jiahua&#39;, //数据属性
  writable: true,
  enumerable: true,
  configurable: true
}
*/</span>

 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&#39;learn&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
 <span class="token comment">/*
 {
   value: { get: [Function: get], set: [Function: set] },  //访问器属性
   writable: true,
   enumerable: true,
   configurable: true
 }
 */</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><h6 id="合并对象" tabindex="-1"><a class="header-anchor" href="#合并对象" aria-hidden="true">#</a> 合并对象</h6><p><strong>Object.assign()</strong>：接收一个目标对象，和一个或多个源对象（多个源对象有相同值时，使用最后一个属性的值）</p><p><strong>注意</strong>：Object.assign()无法“回滚”，在赋值期间出错，则操作会中途退出，同时抛出错误</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//一个源对象</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>des<span class="token punctuation">,</span> src<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result <span class="token operator">===</span> des<span class="token punctuation">)</span> <span class="token comment">//true</span>

<span class="token comment">//多个源对象</span>
<span class="token keyword">let</span> result <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>des<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;baz&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">//{		foo:&quot;baz&quot;	}   多个源对象有相同值时，使用最后一个属性的值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><h5 id="array-数组" tabindex="-1"><a class="header-anchor" href="#array-数组" aria-hidden="true">#</a> Array（数组）</h5><p>数组可以<strong>存储任意数据类型的数据, 且长度是动态大小</strong>，会随着数据添加和删除而自动增长或删除</p><ul><li><h6 id="_1-array-构造函数" tabindex="-1"><a class="header-anchor" href="#_1-array-构造函数" aria-hidden="true">#</a> 1.Array 构造函数</h6><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//创建一个空数组</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//创建一个初始长度为10的空数组（最好不要这样做）</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token string">&#39;jia&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;hua&#39;</span><span class="token punctuation">)</span> <span class="token comment">//长度为2，包含两个元素的数组</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>永远不要创建和使用空单元数组</p></li><li><h6 id="_2-数组字面量" tabindex="-1"><a class="header-anchor" href="#_2-数组字面量" aria-hidden="true">#</a> 2.数组字面量</h6><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">//创建一个空数组</span>
<span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;jiji&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jijiji&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dddsa&#39;</span><span class="token punctuation">]</span> <span class="token comment">//创建一个包含3个元素的数组</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><h6 id="拼接和删除" tabindex="-1"><a class="header-anchor" href="#拼接和删除" aria-hidden="true">#</a> 拼接和删除</h6><ol><li><p>concat()：返回一个拼接之后的<strong>新数组</strong></p></li><li><p><strong>splice</strong>(start, howmany, item1...itemX)：始终返回<strong>被删除的元素组成的数组</strong>，没有被删除的元素（增加元素）则返回空数组，<strong>会影响原数组</strong></p><table><thead><tr><th>参数</th><th></th><th></th></tr></thead><tbody><tr><td>start</td><td>删除的起始索引</td><td></td></tr><tr><td></td><td>大于 length 则不删除，负数则索引从后往前算</td><td></td></tr><tr><td>howmany</td><td>删除元素的个数，大于零时生效（<strong>负数、NaN 或者任意类型的参数都视为 0</strong> ）</td><td></td></tr><tr><td>item1...itemX</td><td>插入的元素序列</td><td></td></tr></tbody></table><p>总结：增加或删除元素 splice(开始索引，删除元素个数 = length，插入的元素)</p></li><li><p><strong>slice</strong>(start, end)：接收两个参数，返回包含开始索引到结束索引（不包含结束索引的元素）的元素组成的<strong>新数组</strong>，只有一个参数时就返回该索引到数组末尾的所有元素</p><table><thead><tr><th>参数</th><th></th></tr></thead><tbody><tr><td>start</td><td>不传则复制一份原数组返回</td></tr><tr><td></td><td>数的绝对值如果大于数组长度，返回空数组</td></tr><tr><td>end</td><td>不传则默认截取到结束位置，<strong>不包含末尾元素</strong></td></tr><tr><td></td><td>小于 start 返回空数组</td></tr></tbody></table></li></ol></li><li><h6 id="查找元素" tabindex="-1"><a class="header-anchor" href="#查找元素" aria-hidden="true">#</a> 查找元素</h6><blockquote><ul><li><p>indexOf()：接收两个参数，要查找的元素，起始搜索的位置，lastIndexOf()则是从数组末尾反向查找</p></li><li><p><strong>includes</strong>()：接收一个匹配数组，判断数组中是否有匹配数组中存在的元素</p></li><li><p><strong>find</strong>()：接收两个参数，返回第一个匹配的元素</p><p>断言函数（对每个元素调用这个函数，根据返回值决定元素是否匹配）<br> 断言函数内部的 this 值</p></li><li><p>findIndex()：接收两个参数，返回第一个匹配的元素的索引</p></li></ul></blockquote></li><li><h6 id="迭代" tabindex="-1"><a class="header-anchor" href="#迭代" aria-hidden="true">#</a> 迭代</h6><blockquote><ul><li><strong>filter</strong>()：对数组每个元素执行传入的函数，将函数返回值为 true 的所有元素组成<strong>新数组返回</strong></li><li><strong>map</strong>()：对数组的每个元素执行传入的函数，将函数执行后的结果构成的<strong>新数组返回</strong></li><li><strong>forEach</strong>()：对数组的每个元素执行传入的函数，没有返回值<br><strong>forEach 的循环次数是在循环前确定的，内部修改原数组不会影响循环次数</strong></li><li><strong>every</strong>()：对数组每一项执行传入的函数，有一个为 false 则返回 false（不会检测剩余元素），否则返回 true<br><strong>every() 不会对空数组进行检测</strong></li><li><strong>some</strong>()：对数组每一项执行传入的函数，只要有一个为 true，则最终返回 true<br><strong>some() 不会对空数组进行检测</strong></li></ul></blockquote></li><li><h6 id="归并" tabindex="-1"><a class="header-anchor" href="#归并" aria-hidden="true">#</a> 归并</h6><blockquote><ol><li><p><strong>reduce</strong>：传入一个归并函数，以及归并的初始值（如果不传入这个参数，则将数组第二项作为该参数）</p><p>归并函数接收 4 个参数</p></li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">preReturn<span class="token punctuation">,</span> curItem<span class="token punctuation">,</span> curIndex<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//preReturn 上一次归并的值</span>
  <span class="token comment">//curItem 当前元素</span>
  <span class="token comment">//curIndex 当前元素的索引</span>
  <span class="token comment">//array 数组本身</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>reduceRight：功能相同，只是反向归并</li></ol></blockquote></li><li><h6 id="迭代器" tabindex="-1"><a class="header-anchor" href="#迭代器" aria-hidden="true">#</a> 迭代器</h6><blockquote><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>const a=[&#39;jia&#39;,&#39;hua&#39;,&#39;javascript&#39;,&#39;html&#39;,&#39;css&#39;];
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>keys():返回数组索引的迭代器</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> akey <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>akey<span class="token punctuation">)</span> <span class="token comment">//[0, 1, 2, 3, 4]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>values:返回数组元素的迭代器（相当于返回了整个数组）</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> avalue <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>avalue<span class="token punctuation">)</span> <span class="token comment">//[&quot;jia&quot;, &quot;hua&quot;, &quot;javascript&quot;, &quot;html&quot;, &quot;css&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>entries()：返回数组 <strong>[索引，键值]</strong> 的迭代器</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> aentry <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aentry<span class="token punctuation">)</span> <span class="token comment">//[Array(2), Array(2), Array(2), Array(2), Array(2)]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>for-of 循环拆分键值对</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> arrrr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Python&#39;</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> <span class="token punctuation">[</span>index<span class="token punctuation">,</span> value<span class="token punctuation">]</span> <span class="token keyword">of</span> arrrr<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> value<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
 <span class="token comment">//0 &quot;C&quot;</span>
 <span class="token comment">//1 &quot;java&quot;</span>
 <span class="token comment">//2 &quot;C++&quot;</span>
 <span class="token comment">//3 &quot;Python&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li><li><h6 id="转换" tabindex="-1"><a class="header-anchor" href="#转换" aria-hidden="true">#</a> 转换</h6><blockquote><ol><li>toString()：返回一个用逗号隔开所有数组元素的字符串</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Python&#39;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//C,java,C++,Python</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>valueOf() ：返回数组本身</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Python&#39;</span><span class="token punctuation">]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>array<span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[&#39;C&#39;, &#39;java&#39;, &#39;C++&#39;, &#39;Python&#39;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li><li><h6 id="栈操作" tabindex="-1"><a class="header-anchor" href="#栈操作" aria-hidden="true">#</a> 栈操作</h6><p>数组对象使用栈的方法实现栈的数据结构 (后进先出)</p><blockquote><ul><li>push() 在数组的末尾推入元素，同时增加数组长度</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;jia&#39;</span><span class="token punctuation">)</span>
arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;hui&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;zhou&#39;</span><span class="token punctuation">,</span> <span class="token number">10222</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">valueof</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//[&#39;jia&#39;,&#39;hui&#39;,&#39;zhou&#39;,10222];</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>pop() 在数组的末尾删除一个元素，同时减少数组长度</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>let arr=new Array(&#39;jia&#39;,&#39;hui&#39;,&#39;zhou&#39;,10222);
let item= arr.pop();
console.log(arr.legnth);		//3
console.log(item);			//10222

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></blockquote></li><li><h6 id="队列操作" tabindex="-1"><a class="header-anchor" href="#队列操作" aria-hidden="true">#</a> 队列操作</h6><p>数组使用队列的方法实现队列数据结构</p><blockquote><ul><li><p>shift() ：移除数组开头的第一项，<strong>返回移除的元素</strong></p></li><li><p>unshift() ： 在数组开头添加一个或多个元素 （队头插队），<strong>返回新数组的长度</strong></p></li><li><p>push() ：在数组末尾推入元素 （排队），<strong>返回新数组的长度</strong></p></li><li><p>pop()：将数组末尾的元素弹出，<strong>返回弹出的元素</strong></p></li><li><p><strong>返回值总结：增加则返回新长度，移除则返回移除元素</strong></p></li></ul></blockquote></li><li><h6 id="排序" tabindex="-1"><a class="header-anchor" href="#排序" aria-hidden="true">#</a> 排序</h6><blockquote><ul><li><p><strong>reverse()</strong>：将数组元素反向排列,<strong>返回颠倒顺序后的数组，会改变原数组</strong></p></li><li><p><strong>sort(compareFn)</strong>： 对数组每个元素调用 String()转型函数，通过<strong>比较字符串</strong>决定顺序（默认按照字母升序排序）</p><ol><li>比较函数 compareFn(a，b)：相邻的两个元素作为参数传入比较函数，根据返回值的正负或等于 0，决定先后顺序</li><li><strong>返回值是对数组的引用，所以会改变原数组</strong></li></ol></li></ul></blockquote></li><li><h6 id="打平数组" tabindex="-1"><a class="header-anchor" href="#打平数组" aria-hidden="true">#</a> 打平数组</h6><ol><li>flat(n)：n 代表打平嵌套的层级深度，回一个包含将数组与子数组中所有元素的<strong>新数组</strong>。</li><li>flatMap</li></ol></li></ul></li></ul><hr><ul><li><h5 id="map-映射" tabindex="-1"><a class="header-anchor" href="#map-映射" aria-hidden="true">#</a> Map（映射）</h5><ul><li>创建 Map</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">//给Map构造函数传入一个可迭代对象</span>
<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">&#39;key1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;key2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>Map 可以使用任何数据类型作为键</p></li><li><p>使用 set（）方法添加键值对，使用 get()和 has()方法获取和查询，size 属性获取键值对的数量，delete（）和 clear（）方法清除值</p></li><li><p>set 返回映射实例，所以可以把多个操作连缀起来</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val1&#39;</span><span class="token punctuation">)</span>
m<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;key3&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val3&#39;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">//3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>顺序与迭代</p><p>Map 会维护键值对的插入顺序, 提供迭代器</p><ol><li>entries（）方法取得迭代器，返回以[key,value]形式的数组的迭代器</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pair <span class="token keyword">of</span> m<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//entries()方法的迭代器</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pair<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
[ &#39;key1&#39;, &#39;val1&#39; ]
[ &#39;key2&#39;, &#39;val2&#39; ]
[ &#39;key3&#39;, &#39;val3&#39; ]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>keys()和 value()分别返回以插入顺序生成键和值的迭代器</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pair <span class="token keyword">of</span> m<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//keys()方法的迭代器</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pair<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
key1
key2
key3
*/</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> pair <span class="token keyword">of</span> m<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//value()方法的迭代器</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>pair<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
val1
val2
val3
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>可以直接对集合使用扩展操作</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>m<span class="token punctuation">)</span>
<span class="token comment">//[ &#39;key1&#39;, &#39;val1&#39; ] [ &#39;key2&#39;, &#39;val2&#39; ] [ &#39;key3&#39;, &#39;val3&#39; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><h5 id="weakmap-弱映射" tabindex="-1"><a class="header-anchor" href="#weakmap-弱映射" aria-hidden="true">#</a> WeakMap（弱映射）</h5><ul><li>弱映射中的键只能是 Object 或继承自 Object 的类型，使用非对象设置键会抛出错误 TypeError</li><li>初始化弱映射只能是全有或全无，只要有一个键无效就会抛出错误，导致整个初始化失败</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> key1<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      key2<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      key3<span class="token operator">=</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> wm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span>key1<span class="token punctuation">,</span><span class="token string">&quot;val1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>key2<span class="token punctuation">,</span><span class="token string">&quot;val2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>key3<span class="token punctuation">.</span><span class="token string">&quot;val3&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//若某个键无效，初始化失败，抛出错误</span>
<span class="token keyword">const</span> wm2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">[</span>key1<span class="token punctuation">,</span><span class="token string">&quot;val1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>key2<span class="token punctuation">,</span><span class="token string">&quot;val2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>key3<span class="token punctuation">.</span><span class="token string">&quot;val3&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//TypeError</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>弱键：只要键存在，键值对就会存在映射中，并被当作是对值的引用，不会被垃圾回收</p></li><li><p>不可迭代键</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> wm<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//wm[Symbol.iterator] is not iterable</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>弱映射造就实现私有变量的方式</p></li></ul></li></ul><hr><ul><li><h5 id="set-集合" tabindex="-1"><a class="header-anchor" href="#set-集合" aria-hidden="true">#</a> Set（集合）</h5><ul><li><p>创建集合</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//创建一个空集合</span>
<span class="token comment">//向Set构造函数传入可迭代对象</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;val1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;val3&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用 add()增加值(也支持连缀操作)，使用 has()查询值，使用 size 获取元素数量，使用 delete()和 clear()删除元素</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;C++&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">&#39;java&#39;</span><span class="token punctuation">)</span>

s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token string">&#39;C++&#39;</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
s<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">&#39;C++&#39;</span><span class="token punctuation">)</span>

s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//销毁集合中的所有值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token comment">//0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p><strong>(Set 集合里面不能出现相同类型的同个元素)</strong></p><ul><li><p>顺序与迭代</p><p>Set 会维护插入时的顺序，支持顺序迭代</p><p>values()默认迭代器</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> s<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
val1
val2
val3
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>entries()方法返回集合中每个元素重复出现的迭代器</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> s<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">/*
[ &#39;val1&#39;, &#39;val1&#39; ]
[ &#39;val2&#39;, &#39;val2&#39; ]
[ &#39;val3&#39;, &#39;val3&#39; ]
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>也可以直接对集合使用扩展操作，将集合转化为数组</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">...</span>s<span class="token punctuation">)</span> <span class="token comment">//[ &#39;val1&#39;, &#39;val2&#39;, &#39;val3&#39; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><h5 id="weakset-弱集合" tabindex="-1"><a class="header-anchor" href="#weakset-弱集合" aria-hidden="true">#</a> WeakSet(弱集合)</h5><ul><li>弱集合中的值只能是 Object 或继承自 Object 的类型，使用非对象设置值会抛出错误 TypeError</li><li>初始化弱集合只能是全有或全无，只要有一个值无效就会抛出错误，导致整个初始化失败</li><li>使用 add()增加值(也支持连缀操作)，使用 has()查询值，使用 size 获取元素数量，使用 delete()和 clear()删除元素</li><li>不可迭代值</li></ul></li></ul><h4 id="_3-类型判断" tabindex="-1"><a class="header-anchor" href="#_3-类型判断" aria-hidden="true">#</a> 3.类型判断</h4><ul><li><p><strong>typeof()</strong>：判断一个值的数据类型 (返回结果为以下字符串)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> number
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token string">&#39;123&#39;</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> string
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> boolean
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token keyword">undefined</span>
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> <span class="token keyword">function</span>
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token parameter"><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span></span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> symbol
<span class="token keyword">typeof</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">--</span><span class="token operator">&gt;</span> object
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>instanceof()</strong>: 判断一个变量是否是某个引用类型的实例 (原始值则返回 false,否则为true)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> num1 <span class="token operator">=</span> <span class="token number">100</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_4-类型转换" tabindex="-1"><a class="header-anchor" href="#_4-类型转换" aria-hidden="true">#</a> 4.类型转换</h4><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><ul><li><strong>隐式类型转换</strong>：发生在编译阶段，通常在遇到操作符，或者函数操作时，自动转换</li><li><strong>强制类型转化</strong>：发生在运行时，通过封装函数转化</li></ul></div><ol><li>一元运算符+常被认为是强制类型转化，将非数值转化为数值</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token string">&#39;229&#39;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token operator">+</span>c <span class="token comment">//b为数值229</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><p>一元运算符！！进行布尔值的强制类型转化</p></li><li><p>字位操作符~：强制操作数使用 32 位格式，即通过抽象操作 ToInt32 实现</p><p>~num 返回 num 的补码， ~x 相当于-（x+1）</p></li><li><p>~和 indexOf()可以将结果强制类型转化</p><p>indexOf()检查字符串中是否包含指定的子字符串，返回子字符串的位置（否则返回-1）</p></li></ol><h3 id="八-解构赋值" tabindex="-1"><a class="header-anchor" href="#八-解构赋值" aria-hidden="true">#</a> (八) 解构赋值</h3><p>ECMAscript 允许按照一定模式从数组和对象中提取值，然后对变量赋值</p><h4 id="_1-数组的解构赋值" tabindex="-1"><a class="header-anchor" href="#_1-数组的解构赋值" aria-hidden="true">#</a> 1.数组的解构赋值</h4><ul><li><p>只要等号两边的模式相同，左边的变量就会被赋予对应的值**(模式匹配)**</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
a <span class="token comment">//1</span>
b <span class="token comment">//2</span>
c <span class="token comment">//3</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>若等号两边的部分变量模式不匹配，解构失败，则不匹配变量的值为 undefined</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> bar<span class="token punctuation">,</span> baz<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>
foo <span class="token comment">//1</span>
bar <span class="token comment">//2</span>
baz <span class="token comment">//undefined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>等号两边必须是数组（可遍历的解构），否则会报错</p></li><li><p>解构时允许指定默认值，若没有变量与之匹配，就赋予该默认值，否则覆盖默认值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>x <span class="token operator">=</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
x <span class="token comment">//jiahua</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_2-对象解构赋值" tabindex="-1"><a class="header-anchor" href="#_2-对象解构赋值" aria-hidden="true">#</a> 2.对象解构赋值</h4><ul><li><p><strong>不同于数组解构赋值，对象的属性没有次序，变量必须与属性同名才能正确赋值</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">//未使用对象解构</span>
<span class="token keyword">let</span> personName <span class="token operator">=</span> person<span class="token punctuation">.</span>name
<span class="token keyword">let</span> personAge <span class="token operator">=</span> person<span class="token punctuation">.</span>age

<span class="token comment">//使用对象解构</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age <span class="token punctuation">}</span> <span class="token operator">=</span> person
name <span class="token comment">//jiahua</span>
age <span class="token comment">//21</span>
<span class="token comment">//解构的同时赋默认值</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job <span class="token operator">=</span> <span class="token string">&#39;engineer&#39;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> person <span class="token comment">//job属性不存在，为其设置默认值</span>
name <span class="token comment">//jiahua</span>
age <span class="token comment">//21</span>
job <span class="token comment">//engineer</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>若变量名与属性名不一致，必须使用冒号加上变量名**（实际的对象解构赋值模式，冒号前面为匹配的模式，后面为被赋值的变量）**</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> personName<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> personAge <span class="token punctuation">}</span> <span class="token operator">=</span> person
<span class="token comment">//可以这样理解 let { name =&gt; personName, age =&gt; personAge } = person;</span>
personName <span class="token comment">//jiahua</span>
personAge <span class="token comment">//21</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> personName<span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> personAge<span class="token punctuation">,</span> job <span class="token operator">=</span> <span class="token string">&#39;engineer&#39;</span> <span class="token punctuation">}</span> <span class="token operator">=</span> person <span class="token comment">//job属性不存在，为其设置默认值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_3-字符串解构赋值" tabindex="-1"><a class="header-anchor" href="#_3-字符串解构赋值" aria-hidden="true">#</a> 3.字符串解构赋值</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&#39;hello&#39;</span>
a <span class="token comment">//h</span>
b <span class="token comment">//e</span>
c <span class="token comment">//l</span>
d <span class="token comment">//l</span>
e <span class="token comment">//o</span>

<span class="token keyword">let</span> <span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> len <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">&#39;javascript&#39;</span> <span class="token comment">//字符串具有length属性</span>
len <span class="token comment">//10</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4-函数参数解构赋值" tabindex="-1"><a class="header-anchor" href="#_4-函数参数解构赋值" aria-hidden="true">#</a> 4.函数参数解构赋值</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token comment">//实际上 x,y = [x,y]</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//3</span>

<span class="token comment">//使用默认值</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token comment">//实际上  { x, y } = { x: 0, y: 0 }</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">8</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//[3,8]</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//[3,0]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>undefined 会触发函数的默认值</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> m <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5-圆括号问题" tabindex="-1"><a class="header-anchor" href="#_5-圆括号问题" aria-hidden="true">#</a> 5.圆括号问题</h4><p>只要有导致解构歧义的解构，就不得使用圆括号，（模式中最好不要放置圆括号）</p><h4 id="_6-解构的用途" tabindex="-1"><a class="header-anchor" href="#_6-解构的用途" aria-hidden="true">#</a> 6.解构的用途</h4><ul><li><p>交换变量的值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>y <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span>x<span class="token punctuation">,</span> y<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>y<span class="token punctuation">,</span> x<span class="token punctuation">]</span> <span class="token comment">//y=1,x=2</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>从函数返回多个值</p><p>若要函数返回多个值，可以将返回的值放到数组或对象里返回，再对函数进行解构赋值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>可以方便函数定义时，将一组参数和变量名对应起来 (使用时无需注意函数参数的顺序)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">z</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>提取 JSON 数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> jsonData <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">21</span><span class="token punctuation">,</span>
  <span class="token literal-property property">number</span><span class="token operator">:</span> <span class="token number">12345</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token punctuation">{</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token literal-property property">number</span><span class="token operator">:</span> phone <span class="token punctuation">}</span> <span class="token operator">=</span> jsonData
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> phone<span class="token punctuation">)</span> <span class="token comment">//jiahua, 21, 12345</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>遍历 Map 解构</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">of</span> map<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="九-操作符" tabindex="-1"><a class="header-anchor" href="#九-操作符" aria-hidden="true">#</a> (九) 操作符</h3><h4 id="一元操作符-只操作一个值的操作符" tabindex="-1"><a class="header-anchor" href="#一元操作符-只操作一个值的操作符" aria-hidden="true">#</a> 一元操作符（只操作一个值的操作符）</h4><ul><li><p>递增递减<br> ++a 会在表达式返回结果之前将 a 递增，而 a++是在返回结果之后，再将 a 递增<br> 为避免 a++的副作用，可以使用逗号运算符，将多个表达式语句串联成一个语句</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">29</span>
age<span class="token operator">++</span> <span class="token comment">//此时age仍为29</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token comment">//30</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> age<span class="token operator">++</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//29  先将a返回，再递增</span>

<span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">29</span>
<span class="token operator">++</span>age <span class="token comment">//此时为age已经增1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token comment">//30</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token operator">++</span>age
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span> <span class="token comment">//30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>为避免 a++的副作用，可以使用逗号运算符，将多个表达式语句串联成一个语句</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">229</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token operator">++</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">//230  先执行b=a++,再执行b=a</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>位</p><ul><li><p>按位与 ~</p></li><li><p>按位非 ！</p></li><li><p>按位或 |</p></li><li><p>按位异或 ^</p></li><li><p>左移 &lt;&lt; (二进制的左移，相当于把原操作数乘以 2)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">//十进制10  即2</span>
<span class="token keyword">let</span> num1 <span class="token operator">=</span> num <span class="token operator">&lt;&lt;</span> <span class="token number">5</span> <span class="token comment">//十进制100000 即64</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>左移会保留操作数的符号，如-2 左移 5 位得到 -64</p><ul><li><p>有符号右移 &gt;&gt; （实际上就是左移的逆运算）</p></li><li><p>无符号右移 &gt;&gt;&gt;</p></li><li><p>操作数为正数时，效果与有符号右移相同</p></li><li><p><strong>操作数为负数时，将操作数当正数处理</strong></p></li></ul></li></ul></li><li><p>取反</p></li><li><p>类型推断</p></li></ul><h4 id="二元操作符" tabindex="-1"><a class="header-anchor" href="#二元操作符" aria-hidden="true">#</a> 二元操作符</h4><ul><li><p>加/减/乘/除法操作符</p></li><li><p>取模</p></li><li><p>比较</p></li><li><p>逻辑</p><ul><li>逻辑或 || <ul><li><strong>如果第一个表达式的值为真，则返回表达式 1</strong></li><li><strong>如果第一个表达式的值为假，则返回表达式 2</strong></li></ul></li><li>逻辑与 &amp;&amp; <ul><li><strong>如果第一个表达式的值为假，则返回表达式 1</strong></li><li><strong>如果第一个表达式的值为真，则返回表达式 2</strong></li><li>如果第一个操作数为真值，则返回第二个操作数（<strong>即前面的操作数为后面的表达式把关</strong>）</li></ul></li><li>逻辑非 !!</li></ul><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p><code>&amp;&amp;</code>和<code>||</code>的语句执行结果会返回其中一个操作数<br><strong>在作为判断条件时，再将返回的操作数进行强制类型转换为布尔值</strong></p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>let a=&quot;jiahua&quot;
let b=229;
console.log(a&amp;&amp;b);		//229
console.log(a||b);		//jiahua
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><ul><li><p>短路运算</p><ul><li>条件判断结果为 true 时，<strong>&amp;&amp;返回操作符右边的值，||返回操作符左边的值</strong>，</li><li>条件判断为 false 时，&amp;&amp;取左边的值，||取右边的值</li></ul></li><li><p>指数操作符</p><ul><li>** （相当于 Math.pow（））</li><li>指数赋值操作符 **=</li></ul></li><li><p>赋值操作符</p><p>副作用，对变量赋值的结果返回该结果，同时会给该变量赋值</p><p>可以利用在 if 语句判断</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>	<span class="token punctuation">{</span>						<span class="token comment">//先判断条件</span>
  matches <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[aeiou]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//条件成立，进行赋值操作</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>match<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> match<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">//等价于</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token operator">&amp;&amp;</span><span class="token punctuation">(</span>matches <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[aeiou]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token punctuation">{</span>	<span class="token comment">//将第一个if语句的判断和赋值一起进行</span>
    reutrn matches<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">加法运算规则</p><p>原始类型</p><p>先判断是否有字符串，有就将非字符串的变量转为字符串进行拼接</p><p>否则判断是否有数字，其他转为数字，加法运算</p><p>引用类型</p><p>调用 toString()转换为字符串 ====》 对象转换为[object object]，数组转换则直接去掉中括号</p></div></li><li><p>关系操作符</p><p>大于&gt;，小于&lt;，小于等于&lt;=，大于等于&gt;=，</p></li><li><p>相等比较</p><ol><li><p>等于 == （宽松相等，会进行强制类型转化，再检查值是否相等）</p><p>操作数相等返回 true</p></li><li><p>不等于 !=</p><p>操作数不等则返回 true 操作数在比较时会进行强制类型转换</p></li><li><p>类型转换规则</p></li></ol><table><thead><tr><th>操作数比较</th><th>类型转换规则</th><th>比较结果</th></tr></thead><tbody><tr><td>字符串和数值</td><td>将字符串转换为数值</td><td>相等返回 true</td></tr><tr><td>对象与非对象</td><td>使用 valueof()取得对象原始值，再进行类型转换</td><td></td></tr><tr><td>其中一个为布尔值</td><td>false 转为 0，true 转为 1</td><td></td></tr><tr><td>null 和 undefined</td><td>（不能转换为其他类型的值）</td><td>相等，返回 true</td></tr><tr><td>任一操作数是 NaN</td><td></td><td>相等操作符返回 false，不等操作符返回 true</td></tr><tr><td>两个操作数都是 NaN</td><td></td><td>false，NaN 不等于 NaN</td></tr><tr><td>对象与对象</td><td>看是否指向同一对象</td><td>是则返回 true，否则返回 false</td></tr><tr><td>字符串和布尔值</td><td>将布尔值和字符串都转化为数值</td><td>比较数值是否相等，相等返回 true，不等返回 false</td></tr></tbody></table><ol start="4"><li><p>全等于 === （严格相等，不会进行强制类型转化，同时检查类型和值是否相等）</p><p><strong>只有两个操作数不转换的前提下相等才返回 true</strong></p></li><li><p>不全等 ！==</p><p><strong>两个操作数在不转换的前提下不相等才返回 true</strong></p></li></ol></li><li><p>条件操作符</p><ul><li>三目运算符 ？：</li></ul><p>boolean_expression ？true_value:false_value</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> num <span class="token operator">=</span> a <span class="token operator">&gt;</span> b <span class="token operator">?</span> a <span class="token operator">:</span> b
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>扩展操作</p><p>点点点语法 [...arr]</p><ul><li>可以在函数调用/数组构造时, 将可迭代对象拆分，并将迭代返回的每个值单独传入</li><li><strong>将数组表达式或者 string 在语法层面展开</strong></li><li>还可以<strong>在构造字面量对象时, 将对象表达式按 key-value 的方式展开</strong></li></ul></li></ul></li></ul><h4 id="运算符优先级" tabindex="-1"><a class="header-anchor" href="#运算符优先级" aria-hidden="true">#</a> 运算符优先级</h4><ul><li><strong>&amp;&amp;返回操作符右边的值，||返回操作符左边的值</strong></li><li>&amp;&amp;运算符优先级高于||运算符，||运算符 高于 ?=运算符</li></ul><h4 id="关联" tabindex="-1"><a class="header-anchor" href="#关联" aria-hidden="true">#</a> 关联</h4><ul><li>&amp;&amp;和||运算符是左关联，从左到右顺序依次组合</li><li>？=运算符 和 =运算符 都是右关联</li></ul><h3 id="十-语句" tabindex="-1"><a class="header-anchor" href="#十-语句" aria-hidden="true">#</a> (十) 语句</h3><ul><li><p>if 语句</p></li><li><p>else if 语句</p><p>else if 后面的 if 是 else 后面单独的一个语句</p></li><li><p>while 语句</p><p>先测试循环语句，先检测推出条件，条件不满足则执行循环体的代码</p></li><li><p>do-while 语句</p><p>后测试循环语句，循环体中的代码语句执行后才会对退出条件进行求值**，循环体的代码至少执行一次**</p></li><li><p>for 语句</p><p><code>&lt;font color=&quot;red&quot;&gt;</code>for 语句的本质：<strong>满足循环条件的情况下多次执行相同的循环体</strong> <code>&lt;/font&gt;</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//输出：0，1，2</span>
<span class="token comment">//本质是下面的流程</span>
<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">{</span>
  i <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">//满足条件，继续执行循环体</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  i <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">//满足条件，继续执行循环体</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">{</span>
  i <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">//满足条件，继续执行循环体</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

i <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">//不满足条件，不再执行循环体</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>for-in 语句</strong></p><ul><li>可枚举属性决定了是否被 for in 遍历</li><li>for-in 语句是严格的迭代语句，用于<strong>枚举对象中的非符号键属性</strong></li><li>for-in 不能保证返回对象属性的顺序，因为 ECMAscript 中对象的属性是无序的</li><li>遍历得到的是 key(索引，下标，键)，且为 string 类型</li><li>作用于数组的 <code>for-in</code>循环除了遍历数组元素以外,<strong>还会遍历自定义属性</strong>，所以遍历数组建议用 for of</li></ul></li><li><p><strong>for-of 语句</strong></p><ul><li>for-of 语句是严格的迭代语句，用于<strong>遍历可迭代对象的元素</strong>，用于遍历数组</li><li>循环出来的是值 value</li><li>不能遍历对象，要搭配 Object.keys()使用，不如直接使用 for in</li></ul></li><li><p>label 语句</p></li><li><p>switch case 语句</p></li><li><p>break 和 continue 语句</p><ul><li><strong>break</strong>：会立即退出循环，强制执行循环后面的下一条语句</li><li><strong>continue</strong>：会跳出当前循环体，继续从外循环顶部开始执行</li></ul></li><li><p>with 语句 <strong>用途：将代码作用域设置为指定的对象</strong></p><p>例如，针对一个对象反复操作，可以使用 with 语句简化代码</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> ob1 <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">sd</span><span class="token operator">:</span> <span class="token string">&#39;dsa&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">ff</span><span class="token operator">:</span> <span class="token string">&#39;ttt&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">aa</span><span class="token operator">:</span> <span class="token string">&#39;sfew&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b1 <span class="token operator">=</span> ob1<span class="token punctuation">.</span>sd <span class="token comment">//每行语句都要指明对象</span>
<span class="token keyword">let</span> a1 <span class="token operator">=</span> ob1<span class="token punctuation">.</span>ff
<span class="token keyword">let</span> c1 <span class="token operator">=</span> ob1<span class="token punctuation">.</span>aa

<span class="token comment">//使用with语句</span>
<span class="token keyword">with</span> <span class="token punctuation">(</span>ob1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> b1 <span class="token operator">=</span> sd <span class="token comment">//直接使用对象中的属性进行赋值</span>
  <span class="token keyword">let</span> a1 <span class="token operator">=</span> ff
  <span class="token keyword">let</span> c1 <span class="token operator">=</span> aa
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b1<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>严格模式不允许使用 with 语句</strong></li></ul></li></ul><h3 id="十一-函数" tabindex="-1"><a class="header-anchor" href="#十一-函数" aria-hidden="true">#</a> (十一) 函数</h3><p>函数也是一种对象，<strong>是 function（）的实例</strong></p><ul><li>使用 function 关键字声明函数</li><li>return 语句后面的语句不会被执行，只要碰到 return 语句，函数就会立即停止执行并退出</li><li>可以不用指定函数的返回值，而<strong>不指定返回值的函数实际上会返回 undefined</strong></li><li>严格模式下 <ol><li>不能以 eval 或 arguments 作为名称，也不能作为参数名</li><li>两个命名参数不能拥有同一个名称</li></ol></li></ul><p><strong>函数声明和函数表达式</strong></p><p><strong>函数声明存在声明提升，函数表达式不会</strong></p><ul><li>函数声明要求写出函数名称，但函数表达式不需要（没有名称的函数表达式称为<strong>匿名函数</strong>）</li><li>在 ECMAscript 中定义两个同名函数，后定义的会覆盖掉先定义的（没有函数重载）</li></ul><h4 id="_1-参数传递" tabindex="-1"><a class="header-anchor" href="#_1-参数传递" aria-hidden="true">#</a> 1.参数传递</h4><ul><li><p>在 ECMAscript 中<strong>所有函数的参数都是按值传递的</strong>（<strong>函数的参数</strong>就是<strong>局部变量</strong>）</p><ul><li><p><strong>当函数参数是对象时，仍然是按值传递</strong></p><p>当引用值作为函数的参数在内部被重写时，它变成一个向本地对象的指针，而这个本地对象在函数执行结束时就被销毁了</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">set</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hahahah&#39;</span>
  obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//指向本地对象的指针</span>
  obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;shshshshs&#39;</span> <span class="token comment">//函数执行结束，该本地对象就被销毁</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> ks <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">set</span><span class="token punctuation">(</span>ks<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ks<span class="token punctuation">)</span> <span class="token comment">//{name: &quot;hahahah&quot;}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>参数默认值</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">call</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  name <span class="token operator">=</span> <span class="token keyword">typeof</span> name <span class="token operator">!==</span> <span class="token string">&#39;undefined&#39;</span> <span class="token operator">?</span> name <span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">call me </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//call me jiahua</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&#39;java&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//call me java</span>

<span class="token comment">//使用默认参数值后</span>
<span class="token keyword">function</span> <span class="token function">call</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">call me </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//call me jiahua</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">&#39;HTML&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//call me HTML</span>

<span class="token comment">//给函数传undefined相当于没有传值</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//call me jiahua</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_2-箭头函数" tabindex="-1"><a class="header-anchor" href="#_2-箭头函数" aria-hidden="true">#</a> 2.箭头函数</h4><ol><li><p>使用=&gt;定义函数表达式 相当于 function（）{ }，任何可以使用函数表达式的地方，都可以使用箭头函数</p></li><li><p>参数的个数</p><table><thead><tr><th>参数个数</th><th>=&gt;函数</th><th>含义</th></tr></thead><tbody><tr><td>无参数</td><td>let fun=()=&gt;{ };</td><td></td></tr><tr><td>一个参数</td><td>let fun= (x)=&gt;{ } 等价于 let fun= x=&gt;{ };</td><td>一个参数时可以省略括号</td></tr><tr><td>多个参数</td><td>let fun =(x,y,z)=&gt;{ };</td><td></td></tr></tbody></table></li><li><p>省略大括号，表示箭头后面只能有一行代码，<strong>同时，会隐式返回这行代码的值</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">3</span> <span class="token operator">*</span> x
<span class="token comment">//等价于</span>
<span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">3</span> <span class="token operator">*</span> x
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b
<span class="token comment">//等价于</span>
<span class="token keyword">let</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="_3-arguments-对象" tabindex="-1"><a class="header-anchor" href="#_3-arguments-对象" aria-hidden="true">#</a> 3.arguments 对象</h4><p><strong>ECMAscript函数的参数在内部表现为一个数组</strong>，而函数不关心这个数组元素包含了什么，有多少个元素（也可以为空）</p><ul><li><p><strong>arguments 是类数组对象</strong>，通过数组形式取得函数传进来的每个参数值，<strong>因此函数声明时可以不需要声明参数</strong>，</p><p><strong>只有以 function 关键字定义函数才会有 arguments 对象</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">1222</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">230</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//1452</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">230</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//310</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_4-callee-属性" tabindex="-1"><a class="header-anchor" href="#_4-callee-属性" aria-hidden="true">#</a> 4.callee 属性</h4><p>使用 arguments.callee 代替函数名可以使<strong>函数逻辑</strong>和<strong>函数名</strong>解耦</p><p>(arguments.callee 就是一个指向正在执行的函数的指针)</p><ul><li><p><strong>若使用函数名</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">factor</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token function">factor</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">factor</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//1120</span>
<span class="token keyword">let</span> factornum <span class="token operator">=</span> factor
<span class="token function-variable function">factor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//factor函数被重写</span>
  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">factornum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//0		无法正确得出原factor的阶乘结果</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">factor</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>使用 arguments.callee 代替函数名</strong> (无论函数叫什么名称，都可以引用正确的函数)</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">factor</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> num <span class="token operator">*</span> arguments<span class="token punctuation">.</span><span class="token function">callee</span><span class="token punctuation">(</span>num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">factor</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//120</span>
<span class="token keyword">let</span> factornum <span class="token operator">=</span> factor
<span class="token function-variable function">factor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">factornum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//120   能正常输出原factor函数的结果</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">factor</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//0</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><h5 id="箭头函数没有-arguments-对象-但可以用扩展操作符实现-arguments-逻辑" tabindex="-1"><a class="header-anchor" href="#箭头函数没有-arguments-对象-但可以用扩展操作符实现-arguments-逻辑" aria-hidden="true">#</a> 箭头函数没有 arguments 对象，但可以用扩展操作符实现 arguments 逻辑</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> <span class="token function-variable function">getSum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>values</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> values<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//6</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr></li></ul><h4 id="_4-this-对象" tabindex="-1"><a class="header-anchor" href="#_4-this-对象" aria-hidden="true">#</a> 4.this 对象</h4><p>作用：为了在函数体内部，指代函数当前的执行上下文，因为函数体内部可以引用当前执行上下文的其他变量</p><ul><li>在标准函数中，this 引用的是 把函数当成方法调用 的上下文对象</li><li>在箭头函数中，this 引用的是 定义箭头函数 的上下文</li></ul><h5 id="this-的指向" tabindex="-1"><a class="header-anchor" href="#this-的指向" aria-hidden="true">#</a> this 的指向</h5><ol><li>作为对象的方法调用：指向该对象</li><li>作为普通函数调用：指向全局对象</li><li>构造器调用：指向构造器返回的那个创建对象</li><li>call、apply、bind 调用：指向调用的对象的上下文</li></ol><h5 id="call、apply、bind" tabindex="-1"><a class="header-anchor" href="#call、apply、bind" aria-hidden="true">#</a> call、apply、bind</h5><p><code>&lt;font style=&quot;color:red&quot;&gt;</code>记忆方法：知道接收参数个数就用 call（熟悉的朋友直接打电话绑定），不确定接收参数个数就用 apply（不熟悉的人要申请绑定）<code>&lt;/font&gt;</code></p><ul><li><p>apply() :接收两个参数，<strong>函数 this 的值</strong>，<strong>一个参数数组</strong>（可以是 Array 的实例，也可以是 arguments 对象）</p><p>使用率更高，因为函数内部参数表现为 arguments，也即是一个类数组</p></li><li><p>call() : 接收函数 this 的值，剩下的参数是逐个传递的参数</p><p>当我们确切知道函数接收多少个参数，想一目了然地表达形参和实参的关系，就可以用 call（）</p><ul><li>当 call（）和 apply（）的第一个参数为 null 时，默认指向宿主对象，也就是 window 对象</li><li>强大在于可以控制函数体内 this 值的能力</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> o<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">&#39;blue&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">showColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">showColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">//red</span>

<span class="token function">showColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//red</span>
<span class="token function">showColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//red</span>

<span class="token function">showColor</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>				<span class="token comment">//blue  call将函数的执行上下文切换为对象o</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>bind()</p><p>**(将任意对象设置为任意函数的作用域)：**返回一个新的函数，this 值会被绑定到 bind()调用的对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>window<span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">&#39;red&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> o<span class="token operator">=</span><span class="token punctuation">{</span>
  <span class="token literal-property property">color</span><span class="token operator">:</span><span class="token string">&#39;blue&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">showColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> bindObject <span class="token operator">=</span> <span class="token function">showColor</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bindObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>					<span class="token comment">//blue</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_5-new-target" tabindex="-1"><a class="header-anchor" href="#_5-new-target" aria-hidden="true">#</a> 5.new.target</h4><p>用于检测函数是否使用 new 关键字调用</p><table><thead><tr><th>函数调用</th><th>new.target 的值</th></tr></thead><tbody><tr><td>正常调用</td><td>undefined</td></tr><tr><td>new 关键字调用</td><td>引用被调用的构造函数</td></tr></tbody></table><h4 id="_6-函数的属性和方法" tabindex="-1"><a class="header-anchor" href="#_6-函数的属性和方法" aria-hidden="true">#</a> 6.函数的属性和方法</h4><ul><li>length 属性</li></ul><ol><li>是函数对象的一个属性值，指该函数有<strong>多少个必须要传入的参数</strong>，即形参的个数。形参的数量<strong>不包括剩余参数个数，</strong></li><li><strong>函数的 length 就是 <code>&lt;u&gt;</code>第一个具有默认值的参数之前的参数个数 <code>&lt;/u&gt;</code></strong></li></ol><h4 id="_7-立即执行函数表达式" tabindex="-1"><a class="header-anchor" href="#_7-立即执行函数表达式" aria-hidden="true">#</a> 7.立即执行函数表达式</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;hello&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//立即执行这个函数</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>立即执行函数创建了独立的作用域，里面的变量都是局部变量，函数执行完，就会释放，避免了命名冲突</strong></p><h4 id="_8-回调函数" tabindex="-1"><a class="header-anchor" href="#_8-回调函数" aria-hidden="true">#</a> 8.回调函数</h4><pre><code>将一个函数作为另一个函数的参数，待外层函数执行完，就执行该函数，这个函数就是回调函数
</code></pre><h4 id="_9-尾调用优化" tabindex="-1"><a class="header-anchor" href="#_9-尾调用优化" aria-hidden="true">#</a> 9.尾调用优化</h4><ul><li><p><strong>外部函数返回值是另一个函数的返回值</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">outerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">innerFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//尾调用</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="_10-闭包" tabindex="-1"><a class="header-anchor" href="#_10-闭包" aria-hidden="true">#</a> 10.闭包</h4><p>由于在 Javascript 中，只有函数内部的子函数才能读取局部变量，因此可以把闭包简单理解成&quot;定义在一个函数内部的函数&quot;。</p><p>所以，在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。</p><ul><li><p>**闭包就是能够读取其他函数内部变量的内部函数。**保持对外部作用域的引用</p><p>（在函数内部，为外部<strong>提供获取函数内部的局部变量的可能</strong>的内奸）</p></li><li><p><strong>闭包的作用域链中包含自己的变量对象，然后是包含函数的变量对象，最后是全局上下文的变量对象</strong></p></li><li><p>闭包会导致作用域无法被销毁，因为闭包的函数引用着该作用域的某个变量</p><p><strong>（外部利用着内奸提供的该组织的情报，因为情报正在被利用，所以这个组织无法解散）</strong></p></li><li><p><strong>只要使用了回调函数，那这个回调函数就是闭包</strong></p></li><li><p>作用：实现私有变量或特权方法</p></li></ul><h3 id="十二-迭代器与生成器" tabindex="-1"><a class="header-anchor" href="#十二-迭代器与生成器" aria-hidden="true">#</a> (十二) 迭代器与生成器</h3><h4 id="_1-迭代器" tabindex="-1"><a class="header-anchor" href="#_1-迭代器" aria-hidden="true">#</a> 1.迭代器</h4><blockquote><p>**迭代：**按照顺序反复多次执行一段程序，迭代会在一个有序集合上进行，（循环是迭代的基础）</p><p><strong>迭代器</strong>：按需创建的一次性对象，不需要暴露出内部的数据结构而进行遍历</p></blockquote><ul><li><p>迭代器模式</p><p>任何实现了迭代 Iterable 接口的数据结构，都可以被实现了 Iterator 接口的结构“消费”</p></li><li><p>可迭代协议</p><p>**必须暴露出一个属性作为默认迭代器，且这个属性必须以 Symbol.iterator 作为键，**<strong>这个属性必须返回一个迭代器工厂函数，调用这个工厂函数必须返回一个新迭代器</strong></p><p><strong>实现可迭代协议要求同时具备 2 种能力</strong></p><ol><li><p>支持迭代的自我识别能力（在任意数据结构上都能进行遍历，而不需要知道遍历的顺序或起始条件）</p></li><li><p>创建 实现 Iterable 接口的对象的能力</p><table><thead><tr><th>实现了 Iterable 接口的内置类型</th><th>变量</th><th>工厂函数</th></tr></thead><tbody><tr><td>字符串 String</td><td>string</td><td>string[Symbol.iterator]</td></tr><tr><td>数组 Array</td><td>array</td><td>array[Symbol.iterator]</td></tr><tr><td>映射 Map</td><td>map</td><td>map[Symbol.iterator]</td></tr><tr><td>集合 Set</td><td>set</td><td>set[Symbol.iterator]</td></tr><tr><td>arguments 对象</td><td>argument</td><td></td></tr><tr><td>NodeList 等 DOM 集合类型</td><td></td><td></td></tr></tbody></table></li><li><p>检查是否存在默认迭代器属性，暴露这个工厂函数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> bitt <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Python&#39;</span><span class="token punctuation">]</span>

<span class="token comment">//检查是否存在默认迭代器属性（ [Symbol.iterator] ）</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bitt<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//ƒ values() { [native code] }</span>

<span class="token comment">//检查这个默认迭代器属性，是否可以暴露出工厂函数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>bitt<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//Array Iterator {}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>不需要显示调用这个工厂函数来生成迭代器，几种内置类型都会自动兼容（接收可迭代对象）的任何语言特性</p></li></ol><p>接收可迭代对象的语言特性包括</p><ul><li>for-of 循环</li><li>数组解构</li><li>扩展操作符</li><li>Array.from()</li><li>创建集合，映射</li><li>yield * 操作符</li><li>Promise.all()接收由期约组成的可迭代对象</li><li>Promise.race()接收由期约组成的可迭代对象</li></ul></li><li><p>迭代器协议</p><p>迭代器接口使用 next()方法在可迭代对象种遍历数据，</p><p><strong>每次成功调用 next（）方法，都会返回一个 IteratorResult 对象，其中包含迭代器的下一个值</strong></p><p>IteratorResult 对象包含两个属性</p><ol><li><strong>done</strong>:布尔值，表示是否还可以再次调用 next()取得下一个值，</li></ol><ul><li>done:true 表示不可再次调用 next(), （到了可迭代对象的末尾元素）</li><li>done:false 表示还能继续调用 next()取得下一个值</li></ul><ol start="2"><li><strong>value</strong>: 包含可迭代对象的下一个值</li></ol><p><strong>迭代器</strong>不会与可迭代对象进行绑定，如果可迭代对象在迭代期间被修改了，迭代器也会反映相应的变化</p></li><li><p>自定义迭代器</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>count <span class="token operator">=</span> <span class="token number">1</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit <span class="token comment">//根据构造函数传入的参数自定义迭代次数</span>
  <span class="token punctuation">}</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> count<span class="token operator">++</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> counter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//只能进行一次迭代</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>将计数器变量放入闭包，实现一个可迭代对象创建多个迭代器</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit<span class="token punctuation">;</span> <span class="token comment">//根据构造函数传入的参数自定义迭代次数</span>
    <span class="token punctuation">}</span>


    <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
        limit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit<span class="token punctuation">;</span>		<span class="token comment">//将计数变量放入闭包，每次调用工厂函数[Symbol.iterator]()返回一个新计数器</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> count<span class="token operator">++</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> counter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> counter<span class="token punctuation">)</span>
    <span class="token operator">...</span><span class="token operator">...</span><span class="token punctuation">.</span>	<span class="token comment">//可进行多次迭代</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>提前终止迭代器</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>limit <span class="token operator">=</span> limit <span class="token comment">//根据构造函数传入的参数自定义迭代次数</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
      limit <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>limit
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;=</span> limit<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> count<span class="token operator">++</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>

      <span class="token keyword">return</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//提前终止迭代时，自动调用</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;结束啦&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span> <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Counter</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> counter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">break</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Ps：数组的迭代器不能关闭，因此提前终止数组的迭代，会在下一次迭代剩下的元素</strong></p></li></ul><h4 id="_2-生成器" tabindex="-1"><a class="header-anchor" href="#_2-生成器" aria-hidden="true">#</a> 2.生成器</h4><p><strong>在函数名称前面加一个星号 ✳，表示它是一个生成器</strong>，可以定义函数的地方，就可以定义生成器</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">//等价于</span>
<span class="token keyword">let</span> <span class="token function-variable function">generator</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//生成器函数表达式</span>

<span class="token keyword">let</span> gen <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">//作为对象字面量方法的生成器函数</span>
  <span class="token operator">*</span><span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">gen</span> <span class="token punctuation">{</span>
  <span class="token comment">//作为类实例方法的生成器函数</span>
  <span class="token operator">*</span><span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>（箭头函数不能用来定义生成器函数）</strong></p><ul><li><p>调用生成器函数会产生一个生成器对象，生成器对象一开始处于暂停执行（suspended）的状态</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&#39;jiahua&#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> gm <span class="token operator">=</span> <span class="token function">gem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gm<span class="token punctuation">)</span> <span class="token comment">//gem {&lt;suspended&gt;}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>生成器对象实现了 Iterator 接口，具有 next（）方法，调用这个方法会让生成器开始或恢复执行</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//生成器只会在初次调用next（）方法后开始执行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>gm<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//{value: &quot;jiahua&quot;, done: true}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>yield</p><ul><li><p>生成器函数在遇到 yield 关键字之前会正常执行，遇到 yield 之后会停止执行，函数作用域会保留。</p></li><li><p>停止执行的生成器函数，只能通过生成器对象调用 next()方法来恢复执行</p></li><li><p>生成器函数内部的执行流程会针对每个生成器对象区分作用域。<strong>（同一个生成器函数实例化的不同对象是相互独立的）</strong></p></li><li><p>yield 关键字只能在生成器函数内部使用，在其他地方使用会抛出错误，且必须直接位于生成器函数的定义中，对嵌套不成立。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">vall</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">yield</span> <span class="token string">&#39;hihi&#39;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> valii <span class="token operator">=</span> <span class="token function">vall</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>valii<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//抛出错误</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>生成器对象可作为可迭代对象, <strong>也就是生成器会返回一个迭代器 iterabale</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">nTime</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token function">nTime</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span> <span class="token comment">//⑤jiahua</span>
<span class="token punctuation">}</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">of</span> <span class="token function">nTime</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用 yield 实现输入和输出</p><ul><li><p>yield 可以作为函数的中间参数（<strong>第一次调用 next()传入的值不会被使用</strong>，因为第一次调用的作用就是开始执行生成器函数）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">ntime</span><span class="token punctuation">(</span><span class="token parameter">jiahua</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jiahua<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">yield</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">yield</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> ntim <span class="token operator">=</span> <span class="token function">ntime</span><span class="token punctuation">(</span><span class="token string">&#39;jia&#39;</span><span class="token punctuation">)</span>
ntim<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&#39;hah&#39;</span><span class="token punctuation">)</span> <span class="token comment">//jia    第一次调用next（），传入的值不会被打印</span>
ntim<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token string">&#39;sss&#39;</span><span class="token punctuation">)</span> <span class="token comment">//sss    正常输出</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>yield 的消息传递是双向的</p><p><strong>yield 作为一个表达式可以发出消息响应 next（）调用，next（）也可以向暂停的 yield 表达式发送值</strong></p></li><li><p>使用星号 ✳ 增强 yield 的作用，从而能够迭代一个可迭代对象，一次产出一个值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">gennn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> gemmm <span class="token operator">=</span> <span class="token function">gennn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> x <span class="token keyword">of</span> gemmm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token comment">//逐行打印1，2，3，3，3，4，5</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在生成器函数中的<strong>try..finally 语句总是运行</strong>，即使生成器外部已经结束（可用于清理资源，或断开数据库连接）</p></li><li><p>看似同步的异步代码</p></li><li><p>在生成器中 yield 另一个生成器，会将当前生成器的 it.next()调用控制（迭代控制）“委托”给另一个生成器</p></li></ul></li></ul><h3 id="十三-面向对象编程" tabindex="-1"><a class="header-anchor" href="#十三-面向对象编程" aria-hidden="true">#</a> (十三) 面向对象编程</h3><h4 id="_1-原型模式" tabindex="-1"><a class="header-anchor" href="#_1-原型模式" aria-hidden="true">#</a> 1.原型模式</h4><p>每个函数都有一个 prototype 属性，这个属性是指向该函数的<strong>原型对象</strong>的指针，而原型对象都有一个属性 constructor 指向该函数</p><ul><li><p>原型链的尽头是 Object.prototype，也就是 null</p></li><li><p>原型的动态性</p><p><strong>实例只有指向原型的指针，没有指向构造函数的指针</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">let</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//重写构造函数原型之前创建的实例，仍引用最初的原型</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;dsd&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
  <span class="token literal-property property">sex</span><span class="token operator">:</span> <span class="token string">&#39;nan&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> friend1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">//undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">//29</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>原型链的问题</p><p><strong>原型中包含的引用值会在所有实例间共享</strong></p><p><strong>解决方法：盗用构造函数（对象伪装，经典继承）</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;Javascript&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Subtype</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">//继承</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subtype</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
instance<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//&#39;java&#39;,&#39;C++&#39;,&#39;Javascript&#39;，’jiahua&#39;</span>

<span class="token keyword">let</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subtype</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance1<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//&#39;java&#39;,&#39;C++&#39;,&#39;Javascript&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>**优点：**可以在子类构造函数中向父类构造函数传参</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span><span class="token number">29</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token punctuation">)</span>&#39;
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//jiahua</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//29</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>属性设置和屏蔽</p><p>给实例的属性赋值时</p><ol><li>若实例中不存在该属性，就会搜索原型链，若原型链上也不存在该属性，则只在该实例中创建该属性</li><li>若实例中不存在该属性，而原型链上存在该属性</li><li>该属性被标记为不可写，那么无法在实例中创建该属性</li><li>该属性为可写，则在实例中创建该属性，并屏蔽掉原型链上的该属性</li></ol></li><li><p>构造函数</p><p>所有通过 new 调用的函数都是所谓的“构造函数”，本质其实是，函数在使用 new 进行了“构造函数调用”</p></li><li><p>Object.create() 创建一个新对象并将其关联到指定的对象上，直接把原始的原型对象抛弃掉</p><p><strong>通过 Object.create(null) 会创建一个空对象（没有原型链，没有.__proto__，也没有.constructor）</strong></p></li><li><p>Object.setPrototypeOf(sourceobj , targetobj)直接修改对象的默认原型对象</p><hr><p>对象关联与类继承</p><ul><li><p><strong>对象关联使用委托实现</strong></p><p><strong>当对象无法响应某个请求（需要某个变量或函数），它会把这个请求委托给它自己的构造函数的原型</strong></p></li><li><p>类继承使用基类和构造函数实现</p></li></ul></li></ul><h4 id="_2-抽象" tabindex="-1"><a class="header-anchor" href="#_2-抽象" aria-hidden="true">#</a> 2.抽象</h4><h4 id="_3-封装" tabindex="-1"><a class="header-anchor" href="#_3-封装" aria-hidden="true">#</a> 3.封装</h4><h4 id="_4-多态" tabindex="-1"><a class="header-anchor" href="#_4-多态" aria-hidden="true">#</a> 4.多态</h4><p>将“做什么”和“怎么做以及谁去做”分离开来，也就是将不变的事物和可能改变的事物分离开来，<strong>把不变的部分隔离出来，把可变的部分各自封装起来</strong></p><ul><li>最根本的作用：将过程化的条件分支语句转化为对象的多态性，从而消除这些条件分支语句</li></ul><h4 id="_5-继承" tabindex="-1"><a class="header-anchor" href="#_5-继承" aria-hidden="true">#</a> 5.继承</h4><p>面向对象语言都支持两种继承，<strong>但在 JavaScript 中唯一支持 <code>&lt;u&gt;</code>实现继承 <code>&lt;/u&gt;</code>，主要通过原型链实现</strong></p><ul><li><p>组合继承</p><p><strong>利用原型链继承属性和方法，利用盗用构造函数继承实例属性</strong></p></li><li><p>原型链继承</p><ul><li><p><strong>和原型模式一样，原型的引用值始终会在对象间共享</strong>，<strong>但非常适合不需要单独创建构造函数，但仍需要在对象间共享信息的场合</strong></p></li><li><p>Object.create()方法</p><ul><li><p>第一个参数作为新对象原型的对象（<strong>即这个参数的对象作为父类被新对象继承</strong>）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">book</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;javascript&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> friend <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
friend<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;jia&#39;</span>
friend<span class="token punctuation">.</span>book<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> friend2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
friend2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;hua&#39;</span>
friend2<span class="token punctuation">.</span>book<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;Html&#39;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>book<span class="token punctuation">)</span> <span class="token comment">// [&quot;java&quot;, &quot;C++&quot;, &quot;javascript&quot;, &quot;C&quot;, &quot;Html&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>第二个参数是<strong>给这个新对象定义额外属性的对象</strong>（可选，且这种方式添加的属性会遮蔽原型对象上的同名属性）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> Person <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">book</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;java&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;C++&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;javascript&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> friend <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>
friend<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&#39;jia&#39;</span>
friend<span class="token punctuation">.</span>book<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;C&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> friend2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token string">&#39;zhuangjiahua&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
friend2<span class="token punctuation">.</span>book<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;Html&#39;</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>friend<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//zhuangjiahua</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>book<span class="token punctuation">)</span> <span class="token comment">// [&quot;java&quot;, &quot;C++&quot;, &quot;javascript&quot;, &quot;C&quot;, &quot;Html&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul></li><li><p>寄生式继承</p></li><li><p>寄生式组合继承</p></li></ul><h4 id="_6-类" tabindex="-1"><a class="header-anchor" href="#_6-类" aria-hidden="true">#</a> 6.类</h4><h5 id="类定义" tabindex="-1"><a class="header-anchor" href="#类定义" aria-hidden="true">#</a> 类定义</h5><ul><li><p>class 关键字</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> Person <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p><strong>函数声明可以提升，但类定义不能，会抛出错误</strong></p></li><li><p><strong>函数受函数作用域限制，但类受块作用域限制（类似 let 变量）</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span><span class="token punctuation">{</span>
	<span class="token keyword">function</span> <span class="token function">Fun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
	<span class="token keyword">class</span> <span class="token class-name">Foo1</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Fun<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//ƒ Fun() { }</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Foo1<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//ReferenceError: Foo1 is not defined</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p><strong>静态方法无法调用实例方法</strong></p></li></ul></li><li><p>extends 继承</p><ul><li><p>super：本质是父类的类构造函数，只能进行父类的构造函数调用或者访问父类的静态方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">extends</span> <span class="token class-name">Super</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">//或者super.staticFunc()</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>派生类如果没有写构造函数，则默认调用 super()，实例化时传的参数等同于传给 super()进行调用</p></li><li><p><strong>派生类必须调用 super()后才能操作 this</strong></p></li></ul></li><li><p>抽象基类：不允许被实例化的类</p><p>可以通过 new.target 检测抽象基类是否被 new 调用</p></li></ul><h3 id="十四-proxy代理和reflect反射" tabindex="-1"><a class="header-anchor" href="#十四-proxy代理和reflect反射" aria-hidden="true">#</a> (十四) Proxy代理和Reflect反射</h3><p>代理是目标对象的抽象，类似 C++的指针，在代理对象上执行的所有操作都会无障碍地传播到目标对象</p><ul><li><h4 id="创建代理对象" tabindex="-1"><a class="header-anchor" href="#创建代理对象" aria-hidden="true">#</a> 创建代理对象</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> Proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span>handler<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>第一个参数接收<strong>目标对象，<strong>第二个参数接收</strong>处理程序对象</strong>（可以是简单的对象字面量，也就是创建一个空代理）</p></li><li><p>在代理对象上执行的任何操作实际上都会应用到目标对象上</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;target&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//target</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//target</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>代理的原型对象 prototype 是 undefined</p></li></ul></li><li><h4 id="可撤销代理" tabindex="-1"><a class="header-anchor" href="#可撤销代理" aria-hidden="true">#</a> 可撤销代理</h4><p><strong>revocable()方法</strong></p><p><strong>撤销函数 revoke（）</strong>：中断代理对象与目标对象之间的联系，且撤销操作时不可逆的，幂等的（执行多少次结果都一样）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;get success&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> proxy<span class="token punctuation">,</span> revoke <span class="token punctuation">}</span> <span class="token operator">=</span> Proxy<span class="token punctuation">.</span><span class="token function">revocable</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">//get success;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">//bar</span>

<span class="token function">revoke</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//执行撤销操作</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>foo<span class="token punctuation">)</span> <span class="token comment">//TypeError</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><h4 id="捕获器" tabindex="-1"><a class="header-anchor" href="#捕获器" aria-hidden="true">#</a> 捕获器</h4><p>使用代理的主要目的就是可以定义捕获器</p><ul><li><p>每个捕获器都对应一种基本操作，可以直接或间接在代理对象上调用</p></li><li><p>代理对象可以在这些操作传播到目标对象之前先调用捕获器函数，从而拦截并修改相应的行为</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&#39;target&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&#39;handler override&#39;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> handler<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//target</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//handler override</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>只有在代理对象上执行这些操作才会触发捕获器，在目标对象上仍然是正常的行为</p></li><li><p>全局 Reflect 对象（反射）</p><p>不需要为每一个捕获器手动重建原始行为，可以调用 Reflect 对象上的同名方法来重建</p></li></ul></li><li><h4 id="捕获器不变式" tabindex="-1"><a class="header-anchor" href="#捕获器不变式" aria-hidden="true">#</a> 捕获器不变式</h4><p>捕获器必须严格遵循目标对象属性的特性，防止捕获器出现过于反常的行为</p></li><li><h4 id="代理捕获器与-reflect-反射-方法" tabindex="-1"><a class="header-anchor" href="#代理捕获器与-reflect-反射-方法" aria-hidden="true">#</a> 代理捕获器与 Reflect（反射）方法</h4><table><thead><tr><th>返回值无限制</th><th>参数</th></tr></thead><tbody><tr><td>get()</td><td>target、property、receiver</td></tr><tr><td>apply()</td><td>target、this。arguments</td></tr></tbody></table><table><thead><tr><th>返回布尔值</th><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>set()</td><td>target、property、receiver、value</td><td>表示是否成功设置</td></tr><tr><td>defineProperty()</td><td>target、property、descriptor(属性的特性)</td><td>表示属性是否成功定义</td></tr><tr><td>has()</td><td>target、property</td><td>表示属性是否存在</td></tr><tr><td>deleteProperty()</td><td>target、property</td><td>表示属性是否成功删除</td></tr><tr><td>setPrototypeOf()</td><td>target、prototype(顶级原型则为 null)</td><td></td></tr><tr><td>perventExtensions()</td><td>target</td><td>表示是否已经不可扩展</td></tr><tr><td>isExtensible()</td><td>target</td><td>表示是否可扩展</td></tr></tbody></table><table><thead><tr><th>返回对象或者 null</th><th>参数</th><th>返回</th></tr></thead><tbody><tr><td>getOwnPropertyDescriptor()</td><td>target、property</td><td></td></tr><tr><td>ownKeys()</td><td>target</td><td>必须返回一个包含字符串或符号的可枚举对象</td></tr><tr><td>getPrototypeOf()</td><td>target</td><td></td></tr><tr><td>construct()</td><td>target、arguments、newTarget</td><td></td></tr></tbody></table></li><li><h4 id="代理模式" tabindex="-1"><a class="header-anchor" href="#代理模式" aria-hidden="true">#</a> 代理模式</h4><ol><li>跟踪属性访问</li><li>隐藏属性</li><li>属性验证</li><li>函数与构造函数验证</li><li>数据绑定与可观察对象</li></ol></li></ul><hr><h3 id="十五-promise与async-await" tabindex="-1"><a class="header-anchor" href="#十五-promise与async-await" aria-hidden="true">#</a> (十五) Promise与async/await</h3><h4 id="_1-promise" tabindex="-1"><a class="header-anchor" href="#_1-promise" aria-hidden="true">#</a> 1.Promise</h4><p>Promise 一旦决议，就永远保持这个状态，成为“不变值”</p><p>创建期约时必须传入执行器函数作为参数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//传入一个空函数对象</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token comment">//Promise &lt;pending&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>期约状态机</p><blockquote><ul><li>待定 pending</li><li>解决 fulfilled (或 resolved)</li><li>拒绝 rejected</li></ul></blockquote><hr></li><li><p>静态方法</p><ol><li><p>Promise.resolve()</p><p>实例化一个解决的期约</p><ol><li><strong>传入的第一个参数</strong>就是这个 <strong>实例化的解决的期约</strong> 的值，（多余的参数会被忽略）</li><li><strong>若传入的参数本身是一个期约</strong>，那它的行为类似于一个空包装，且因为其幂等性，会保留传入期约的状态</li><li>resolve（）既可能解决，也可能拒绝</li><li>传给 resolve 的是非 Promise，非 thenable 值，这个 promise 就会用这个值完成</li><li>传给 resolve 的是 Promise 或 thenable 值，这个值会被递归展开，要构造的 promise 将取用其最终决议值或状态</li></ol></li><li><p>Promise.reject()</p><p>实例化一个拒绝的期约，并抛出一个异步错误</p><ol><li><p>抛出的错误不能通过 try/catch 捕获，<strong>只能通过拒绝处理程序捕获</strong></p></li><li><p>不同于 Promise.resolve（），传入一个期约，<strong>这个期约会成为它返回的拒绝期约的理由</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">//Promise {&lt;rejected&gt;: Promise}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></li></ol></li><li><p>Promise.all()</p><p>Promise.all()接收一个可迭代对象，在可迭代对象每一项全部解决之后，合成 Promise 的解决值就是包含所有 Promise 解决值（按照迭代顺序）的数组</p><p>否则返回第一个失败的 Promise 的失败值</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;love&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;jiayu&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//[ &#39;jiahua&#39;, &#39;love&#39;, &#39;jiayu&#39;, undefined ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>Promise.race()</p><p>Promise.race 会根据<strong>第一个落定的期约（不论解决还是拒绝）</strong>，返回包含该期约的解决值或拒绝理由的新期约</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;love&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;jiayu&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//jiahua</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">TIP</p><p>注意不能向 all()或 race()传入空数组，Promise.all()会立刻完成，Promise.race()会挂住且永不决议</p></div></li><li><p>实例方法</p><p>then()方法</p><ol><li><p><strong>Promise.prototype.then()</strong>：为 Promise 实例添加处理程序的主要方法,返回值是一个新的 Promise 实例</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">then</span><span class="token punctuation">(</span>onFullfilled，onRejected<span class="token punctuation">)</span> <span class="token comment">//接收最多两个参数：（可选，且传入任何非函数类型的参数都会被忽略）</span>
<span class="token comment">//onFullfilled：进入”兑现“状态时执行</span>
<span class="token comment">//onRejected：进入”拒绝“状态时执行</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><p>串行期约合成</p><ul><li><p>Promise. then(). then(). then()</p><p>初始产生的期约值，逐级往后传递并消费该期约值，若下一步 then 需要用到上一步 then 的值，则需要在上一步添加 return 语句</p><p>实现 Promise 链条，将 Promise 决议结果在链条上传递，以完成多个异步操作</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">addlove</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token string">&#39; love &#39;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">addname</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token string">&#39;jiayu.&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>addlove<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>addname<span class="token punctuation">)</span> <span class="token comment">//jiahua love jiayu.</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="_2-async-await异步函数" tabindex="-1"><a class="header-anchor" href="#_2-async-await异步函数" aria-hidden="true">#</a> 2.async/await异步函数</h4><p><strong>async/await：使同步编写的代码可以异步执行</strong>（生成器的语法糖）</p><ul><li><p>用 async 关键字声明异步函数</p></li><li><p>异步函数若使用 return 语句返回值（也可以直接返回期约对象），这个值会被 Promise.resolve()包装成一个期约对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//声明为异步函数，返回一个期约对象</span>
  value <span class="token operator">+=</span> <span class="token string">&#39; loves &#39;</span>
  <span class="token keyword">return</span> value
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value <span class="token operator">+</span> <span class="token string">&#39;jiayu&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>await</p><p><strong>await 只能直接出现在异步函数的定义中</strong></p><p>await 关键字会暂停执行异步函数后面的代码，行为与 yield 是一样的</p><ul><li><p>await 关键字会期待一个实现 thenable 的对象，并对其” 解包 “，将这个值当作解决的期约的值</p></li><li><p>提出一个请求（要求一个值），分别由 Promisory 和 thunkory 表示对这个请求的未来的答复</p><p>实现 sleep</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//sleep函数实现</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> t0 <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> t0<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="十六-动画与canvas图形" tabindex="-1"><a class="header-anchor" href="#十六-动画与canvas图形" aria-hidden="true">#</a> (十六) 动画与Canvas图形</h3><ul><li><p>requestAnimationFrame（）</p><p>接收一个参数，要在重绘屏幕前调用的函数</p></li><li><p>cancelAnimationFrame()</p><p>取消加入队列的重绘任务</p></li><li><h4 id="_2d-绘图上下文" tabindex="-1"><a class="header-anchor" href="#_2d-绘图上下文" aria-hidden="true">#</a> 2D 绘图上下文</h4><ul><li><p>坐标原点在&lt; canvas&gt;元素的左上角，所有坐标值都相对于该点计算，x 坐标向右增长，y 坐标向下增长</p></li><li><p>填充和描边</p><ol><li>fillStyle（）：以指定样式（颜色，渐变或图像）自动填充形状，</li><li>strokeStyle（）：只为图形边界着色</li></ol></li><li><p>绘制矩形 Rectangle</p><p>接收四个参数：矩形 x 坐标，矩形 y 坐标，矩形宽度，矩形高度</p><p>fillRect()：在画布上绘制并填充矩形</p><p>strokeRect()：在画布上绘制矩形边框</p><p>clearRect()：擦除画布中的某个区域</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>canvas id<span class="token operator">=</span><span class="token string">&quot;draw&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;300px&quot;</span> height<span class="token operator">=</span><span class="token string">&quot;300px&quot;</span><span class="token operator">&gt;</span>Canvas Draw here<span class="token operator">&lt;</span><span class="token operator">/</span>canvas<span class="token operator">&gt;</span>

<span class="token keyword">let</span> drawing <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;draw&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>drawing<span class="token punctuation">.</span>getContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> context <span class="token operator">=</span> drawing<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">&quot;2d&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;#ff0000&quot;</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span>strokeStyle <span class="token operator">=</span> <span class="token string">&quot;#f00&quot;</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">strokeRect</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span>fillStyle <span class="token operator">=</span> <span class="token string">&quot;rgba(0,0,255,0.5)&quot;</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            context<span class="token punctuation">.</span><span class="token function">clearRect</span><span class="token punctuation">(</span><span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">35</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>绘制路径</p></li><li><p>绘制文本</p></li><li><p>变换</p></li><li><p>绘制图像</p></li><li><p>渐变</p></li></ul></li><li><h4 id="webgl" tabindex="-1"><a class="header-anchor" href="#webgl" aria-hidden="true">#</a> WebGL</h4></li></ul><h3 id="十七-表单脚本" tabindex="-1"><a class="header-anchor" href="#十七-表单脚本" aria-hidden="true">#</a> (十七) 表单脚本</h3><p>使用 document.forms 集合可以获取页面上所有表单元素，并通过中括号[]使用<strong>数字索引</strong>或<strong>表单名字</strong>来访问特定的表单</p><h4 id="自动切换" tabindex="-1"><a class="header-anchor" href="#自动切换" aria-hidden="true">#</a> 自动切换</h4><ul><li><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sds<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>3<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">maxlength</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>5<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> event<span class="token punctuation">.</span>target
  <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length <span class="token operator">==</span> target<span class="token punctuation">.</span>maxLength<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> form <span class="token operator">=</span> target<span class="token punctuation">.</span>form
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> form<span class="token punctuation">.</span>elements<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>form<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          form<span class="token punctuation">.</span>elements<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> inputIDs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;3&#39;</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> id <span class="token keyword">of</span> inputIDs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> textbox <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  textbox<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;keyup&#39;</span><span class="token punctuation">,</span> change<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="html5-约束验证-api" tabindex="-1"><a class="header-anchor" href="#html5-约束验证-api" aria-hidden="true">#</a> HTML5 约束验证 API</h4><ul><li><p>必填字段 required</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">required</span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>输入类型 email，url</p><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>数值范围 min max</p></li></ul><h3 id="十八-json" tabindex="-1"><a class="header-anchor" href="#十八-json" aria-hidden="true">#</a> (十八) JSON</h3><p>JavaScript 对象简谱（<em>JavaScript Object Notation</em>），是一种通用数据格式，没有变量，没有函数或对象实例的概念</p><ul><li><p>JSON 对象属性名必须使用双引号</p></li><li><p>JSON 对象属性<strong>支持的三种类型的值</strong></p><ul><li>简单值（JSON 字符串必须使用双引号）</li><li>对象</li><li>数组</li></ul></li><li><p>JSON 对象方法</p><ol><li><p><strong>JSON.stringify(序列化的对象，过滤器，缩进数值或字符)</strong>：将JavaScript值序列化JSON字符串</p><ul><li><p>第二个参数：<strong>过滤器 replacer</strong>(可以是数组或者函数)：（过滤结果，只序列化过滤器中的属性）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;version&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//序列化的字符串只包含name和version属性</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>第三个参数：<strong>缩进数值或字符</strong>space（字符串缩进，每一级缩进空格数）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>book<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;version&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//序列化的字符串只包含name和version属性,且每一级缩进4个空格</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>输出不包含空格或缩进的 JSON 字符串</p></li><li><p>对于不安全的 JSON 值，比如 undefined，function，symbol，会自动忽略</p></li><li><p><strong>所有函数和原型成员，以及都会被省略，值为 undefined 的属性也会被跳过</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> book <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;javascript&#39;</span><span class="token punctuation">,</span>
 <span class="token literal-property property">version</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
 <span class="token literal-property property">author</span><span class="token operator">:</span> <span class="token string">&#39;Matt Frisbie&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> jsontext <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>book<span class="token punctuation">)</span>
<span class="token comment">//输出 {&quot;name&quot;:&quot;javascript&quot;,&quot;version&quot;: 4,&quot;author&quot;:&quot;Matt Frisbie&quot;}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p>JSON.parse(JSON字符串，还原函数): 将JSON字符串解析为原生JavaScript值</p><ul><li><p>还原函数</p><div class="language-JavaScript line-numbers-mode" data-ext="JavaScript"><pre class="language-JavaScript"><code>let bookcopy = JSON.parse(jsontext,(key,value)=&gt;{
  //相关操作
})
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>还原函数返回 undefined，结果中会删除相应的键</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>  <span class="token keyword">let</span> bookcopy <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>jsontext<span class="token punctuation">)</span> <span class="token comment">//转换后的bookcopy和book是两个完全不同的对象，有相同的属性和值</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li><li><p>toJSON()方法</p><p>返回一个能够被字符串化的安全的 JSON 值</p><ul><li>自定义 JSON 序列化</li><li>箭头函数不能定义 toJSON()方法</li></ul></li></ol></li></ul><h3 id="十九-ajax" tabindex="-1"><a class="header-anchor" href="#十九-ajax" aria-hidden="true">#</a> (十九) Ajax</h3><p>Ajax，也就是<strong>Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）</strong>，主要依赖于服务器端处理，而非客户端处理，Ajax 技术的核心是 XMLHttpRequest 对象，作为浏览器和服务器之间的“中间人”，负责请求和响应</p><h4 id="xmlhttprequest-对象" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-对象" aria-hidden="true">#</a> XMLHttpRequest 对象</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><p>属性</p><ul><li><p>responseText: 作为响应体返回的文本</p></li><li><p><strong>status</strong>： 响应的 HTTP 状态</p><p><strong>HTTP 状态码</strong></p><ul><li><strong>2xx</strong>表示成功，此时 responseText 或 responseXML 会有内容</li><li><strong>304</strong>表示资源未修改过</li><li><strong>404</strong>表示请求的资源不存在</li><li><strong>500</strong>表示请求的 URL 抛出服务器错误</li></ul></li><li><p>statusText：响应的 HTTP 状态描述</p></li><li><p><strong>readyState</strong>：请求状态</p><ul><li>0：未初始化，尚未调用 open（）方法</li><li>1：已打开，已调用 open（），尚未调用 send()</li><li>2：已发送，已调用 send（）,尚未收到响应</li><li>3：接收中，已经收到部分响应</li><li>4：完成，已经收到所有响应</li></ul><p><strong>每次 readyState 的值发生变化，都会触发 readystatechange 事件</strong></p><ul><li>onreadystatechange 事件处理程序应该在 open 之前赋值，不会收到 event 对象</li><li>收到响应之前想取消异步请求，使用 abort（）方法</li></ul></li></ul></li><li><p>方法</p><ol><li><p>open()</p><p><strong>为发送做好准备，不会发送请求</strong>，只能访问同源 URL（域名相同，端口相同，协议相同）</p><p>三个参数</p><ol><li><p>指定的请求类型（三个指定请求类型：GET、POST、SEND）</p><p>GET：向服务器查询某些信息</p><p>POST：向服务器发送应该保存的数据</p><p>SEND: 发送请求</p></li><li><p>指定服务器上将要访问的文件</p></li><li><p>指定请求是否以异步方式发送和处理（布尔值）</p></li></ol></li></ol></li><li><p>异步请求不会等待响应返回，会继续执行</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">getNewContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> request <span class="token operator">=</span> <span class="token function">getObjHttp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    request<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&#39;GET&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;example.txt&#39;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    request<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>request<span class="token punctuation">.</span>readyState <span class="token operator">==</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//判断响应是否完成</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Response Received&#39;</span><span class="token punctuation">)</span> <span class="token comment">//这句后弹出</span>
        <span class="token keyword">var</span> para <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> txt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
        para<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>txt<span class="token punctuation">)</span>
        document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;new&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>para<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    request<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">//GET请求时，send不用传参，可设置为null</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;sorry,browser doesnt support XMLHttpRequest&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Function Done&#39;</span><span class="token punctuation">)</span> <span class="token comment">//这句先弹出</span>
<span class="token punctuation">}</span>
<span class="token function">addLoadEvent</span><span class="token punctuation">(</span>getNewContent<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="xmlhttprequest-level2" tabindex="-1"><a class="header-anchor" href="#xmlhttprequest-level2" aria-hidden="true">#</a> XMLHttpRequest Level2</h4><h5 id="设置-http-请求时限" tabindex="-1"><a class="header-anchor" href="#设置-http-请求时限" aria-hidden="true">#</a> 设置 HTTP 请求时限</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>xhr<span class="token punctuation">.</span>timeout <span class="token operator">=</span> <span class="token number">3000</span>

xhr<span class="token punctuation">.</span><span class="token function-variable function">ontimeout</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;请求超时&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="formdata-类型" tabindex="-1"><a class="header-anchor" href="#formdata-类型" aria-hidden="true">#</a> FormData 类型</h4><p>便于表单序列化</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jihua&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="formdata-对象管理表单数据" tabindex="-1"><a class="header-anchor" href="#formdata-对象管理表单数据" aria-hidden="true">#</a> FormData 对象管理表单数据</h4><h4 id="直接获取网页表单的数据" tabindex="-1"><a class="header-anchor" href="#直接获取网页表单的数据" aria-hidden="true">#</a> 直接获取网页表单的数据</h4><h4 id="上传文件" tabindex="-1"><a class="header-anchor" href="#上传文件" aria-hidden="true">#</a> 上传文件</h4><p>追加文件</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>let data=new FormData();
data.append(&quot;name&quot;,files[0]);
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>显示上传文件进度</p><p>监听 xhr.upload.onprogress</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
data<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jihua&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>append()方法接收两个值，键和值，相当于表单字段名称和该字段的值</p><h3 id="二十-fetch-api" tabindex="-1"><a class="header-anchor" href="#二十-fetch-api" aria-hidden="true">#</a> (二十) Fetch API</h3><p><strong>XMLHttpRequest 可以选择异步，Fetch 必须是异步</strong></p><p>关注分离的模式</p><h4 id="fetch-方法暴露在全局作用域中-浏览器给指定-url-发送请求" tabindex="-1"><a class="header-anchor" href="#fetch-方法暴露在全局作用域中-浏览器给指定-url-发送请求" aria-hidden="true">#</a> fetch（）方法暴露在全局作用域中，浏览器给指定 URL 发送请求</h4><ul><li><h4 id="fetch-只有一个必需的参数-要获取资源的-url-结果返回一个期约-promise" tabindex="-1"><a class="header-anchor" href="#fetch-只有一个必需的参数-要获取资源的-url-结果返回一个期约-promise" aria-hidden="true">#</a> fetch()只有一个必需的参数：要获取资源的 URL，结果返回一个期约 Promise</h4><p>只要服务器返回了响应，fetch（）期约都会解决</p><p>服务器没有响应，违反 CORS，无网络连接，HTTPS 错配，fetch（）失败会导致期约被拒绝</p></li></ul><p>请求完成，资源可用时，期约会解决为一个 Response 对象，这个对象是 API 的封装</p><h4 id="分派请求" tabindex="-1"><a class="header-anchor" href="#分派请求" aria-hidden="true">#</a> 分派请求</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/example.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resopnse<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//Response {type: &quot;basic&quot;, url: &quot;http://127.0.0.1:3000/example.txt&quot;, redirected: false, status: 404, ok: false, …}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="读取响应" tabindex="-1"><a class="header-anchor" href="#读取响应" aria-hidden="true">#</a> 读取响应</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/Ajax/example.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  response<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//&quot;jiahua哈哈哈哈顶顶顶顶顶急急急&quot;	(example.txt的内容)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="常见-fetch-请求模式" tabindex="-1"><a class="header-anchor" href="#常见-fetch-请求模式" aria-hidden="true">#</a> 常见 fetch 请求模式</h4><p><strong>fetch（）即可以发送数据也可以接收数据</strong></p><ol><li><p>发送 JSON 数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> payload <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> jsonHeader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Headers</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token string-property property">&#39;Content-type&#39;</span><span class="token operator">:</span> <span class="token string">&#39;application/json&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/send-me-json&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token string">&#39;payload&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">headers</span><span class="token operator">:</span> jsonHeader<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>在请求体中发送参数</p></li><li><p>发送文件</p></li><li><p>加载 blob 文件</p></li><li><p>发送跨源请求</p></li><li><p>中断请求</p></li></ol><h4 id="headers-对象" tabindex="-1"><a class="header-anchor" href="#headers-对象" aria-hidden="true">#</a> Headers 对象</h4><p><strong>所有外发请求和入站响应头部的容器</strong></p><ul><li><h4 id="headers-与-map-的相似之处" tabindex="-1"><a class="header-anchor" href="#headers-与-map-的相似之处" aria-hidden="true">#</a> Headers 与 Map 的相似之处</h4><p>1.HTTP 头部本质上是序列化后的键值对，都有 get(), set(), has(), delete()等实例方法</p><p>2.都可以使用一个可迭代对象来初始化</p><p>3.都有相同的 keys（），values()，entries（）迭代器接口</p></li><li><h4 id="headers-独有的特性" tabindex="-1"><a class="header-anchor" href="#headers-独有的特性" aria-hidden="true">#</a> Headers 独有的特性</h4><p>初始化时，也可以使用键值对形式的对象，而 Map 不可以</p></li></ul><h4 id="request-对象" tabindex="-1"><a class="header-anchor" href="#request-对象" aria-hidden="true">#</a> Request 对象</h4><p><strong>获取资源请求的对象</strong></p><ul><li><h4 id="创建-request-对象" tabindex="-1"><a class="header-anchor" href="#创建-request-对象" aria-hidden="true">#</a> 创建 Request 对象</h4><h5 id="request-构造函数接收两个参数-一个-url-参数-以及可选的-init-对象-包含-request-属性的键值对-没有就设置为默认值" tabindex="-1"><a class="header-anchor" href="#request-构造函数接收两个参数-一个-url-参数-以及可选的-init-对象-包含-request-属性的键值对-没有就设置为默认值" aria-hidden="true">#</a> Request 构造函数接收两个参数：一个 URL 参数，以及可选的 init 对象（包含 Request 属性的键值对，没有就设置为默认值）</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.wrox.com&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><h4 id="克隆-request-对象" tabindex="-1"><a class="header-anchor" href="#克隆-request-对象" aria-hidden="true">#</a> 克隆 Request 对象</h4><h5 id="构造函数方法-会使第一个请求的请求体标记为-已使用" tabindex="-1"><a class="header-anchor" href="#构造函数方法-会使第一个请求的请求体标记为-已使用" aria-hidden="true">#</a> 构造函数方法, 会使第一个请求的请求体标记为“已使用”</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.wrox.com&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> r3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>bodyUsed<span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="clone-方法-创建一摸一样的副本-不会覆盖任何值-不会将任何请求的请求体标记为已使用-bodyused-false" tabindex="-1"><a class="header-anchor" href="#clone-方法-创建一摸一样的副本-不会覆盖任何值-不会将任何请求的请求体标记为已使用-bodyused-false" aria-hidden="true">#</a> clone（）方法：创建一摸一样的副本，不会覆盖任何值，不会将任何请求的请求体标记为已使用（bodyUsed:false）</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.wrox.com&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> r2 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>bodyUsed<span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="bodyused-标记为-true-已使用后-不能再创建该请求的副本-否则抛出错误" tabindex="-1"><a class="header-anchor" href="#bodyused-标记为-true-已使用后-不能再创建该请求的副本-否则抛出错误" aria-hidden="true">#</a> bodyUsed 标记为 true 已使用后，不能再创建该请求的副本，否则抛出错误</h5></li><li><h4 id="在-fetch-中使用-request-对象" tabindex="-1"><a class="header-anchor" href="#在-fetch-中使用-request-对象" aria-hidden="true">#</a> 在 fetch 中使用 Request 对象</h4><h5 id="fetch-会在内部克隆-request-对象-且使用-request-对象会导致请求体标记为已使用-有请求体的-request-只能在一次-fetch-中使用" tabindex="-1"><a class="header-anchor" href="#fetch-会在内部克隆-request-对象-且使用-request-对象会导致请求体标记为已使用-有请求体的-request-只能在一次-fetch-中使用" aria-hidden="true">#</a> fetch（）会在内部克隆 Request 对象，且使用 Request 对象会导致请求体标记为已使用，有请求体的 Request 只能在一次 fetch 中使用</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.wrox.com&#39;</span><span class="token punctuation">)</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//会在内部克隆Request对象</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token comment">//抛出错误</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="要想在相同-request-上多次调用-fetch-必须在第一次发送-fetch-请求前调用-clone" tabindex="-1"><a class="header-anchor" href="#要想在相同-request-上多次调用-fetch-必须在第一次发送-fetch-请求前调用-clone" aria-hidden="true">#</a> 要想在相同 Request 上多次调用 fetch（），必须在第一次发送 fetch（）请求前调用 clone（）</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Request</span><span class="token punctuation">(</span><span class="token string">&#39;http://www.wrox.com&#39;</span><span class="token punctuation">)</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&#39;POST&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">//会在内部克隆Request对象</span>

<span class="token function">fetch</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span> <span class="token comment">//正常运行</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h4 id="resonse-对象" tabindex="-1"><a class="header-anchor" href="#resonse-对象" aria-hidden="true">#</a> Resonse 对象</h4><ul><li><h4 id="创建-response-对象" tabindex="-1"><a class="header-anchor" href="#创建-response-对象" aria-hidden="true">#</a> 创建 Response 对象</h4><h5 id="response-构造函数接收两个参数-可选的-body-参数-可选的-init-对象-包含-response-属性的键值对-没有就设置为默认值" tabindex="-1"><a class="header-anchor" href="#response-构造函数接收两个参数-可选的-body-参数-可选的-init-对象-包含-response-属性的键值对-没有就设置为默认值" aria-hidden="true">#</a> Response 构造函数接收两个参数：可选的 body 参数，可选的 init 对象（包含 Response 属性的键值对，没有就设置为默认值）</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">418</span><span class="token punctuation">,</span>
  <span class="token literal-property property">statusText</span><span class="token operator">:</span> <span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//Response {type: &quot;default&quot;, url: &quot;&quot;, redirected: false, status: 418, ok: false, …}</span>
<span class="token comment">//	...</span>
<span class="token comment">//	status: 418</span>
<span class="token comment">//	statusText: &quot;jiahua&quot;</span>
<span class="token comment">//	...</span>
<span class="token comment">//}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="大多数情况下-产生-response-对象的主要方式使调用-fetch-返回一个解决为-response-对象的期约-代表实际的-http-响应" tabindex="-1"><a class="header-anchor" href="#大多数情况下-产生-response-对象的主要方式使调用-fetch-返回一个解决为-response-对象的期约-代表实际的-http-响应" aria-hidden="true">#</a> <strong>大多数情况下，产生 Response 对象的主要方式使调用 fetch（），返回一个解决为 Response 对象的期约，代表实际的 HTTP 响应</strong></h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&#39;/example.txt&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>resopnse<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//Response {type: &quot;basic&quot;, url: &quot;http://127.0.0.1:3000/example.txt&quot;, redirected: false, status: 404, ok: false, …}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="生成-response-对象的静态方法" tabindex="-1"><a class="header-anchor" href="#生成-response-对象的静态方法" aria-hidden="true">#</a> 生成 Response 对象的静态方法</h4><ol><li><strong>Response.redirect()</strong>：接收一个 URL 和一个重定向状态码 status（301，302，303，307，308），返回重定向的 Response 对象</li><li>3<strong>Response.error()</strong> ：用于产生表示网络错误的 Response 对象，（网络错误会导致 fetch 期约被拒绝）</li></ol><h4 id="克隆-response-对象" tabindex="-1"><a class="header-anchor" href="#克隆-response-对象" aria-hidden="true">#</a> 克隆 Response 对象</h4><h5 id="clone-方法-创建一摸一样的副本-不会覆盖任何值-不会将任何请求的请求体标记为已使用-bodyused-false-1" tabindex="-1"><a class="header-anchor" href="#clone-方法-创建一摸一样的副本-不会覆盖任何值-不会将任何请求的请求体标记为已使用-bodyused-false-1" aria-hidden="true">#</a> clone（）方法：创建一摸一样的副本，不会覆盖任何值，不会将任何请求的请求体标记为已使用（bodyUsed:false）</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> r2 <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>bodyUsed<span class="token punctuation">)</span> <span class="token comment">//false</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="bodyused-标记为-true-已使用后-不能再创建该请求的副本-否则抛出错误-1" tabindex="-1"><a class="header-anchor" href="#bodyused-标记为-true-已使用后-不能再创建该请求的副本-否则抛出错误-1" aria-hidden="true">#</a> bodyUsed 标记为 true 已使用后，不能再创建该请求的副本，否则抛出错误</h5><h4 id="有响应体的-response-对象只能读取一次" tabindex="-1"><a class="header-anchor" href="#有响应体的-response-对象只能读取一次" aria-hidden="true">#</a> 有响应体的 Response 对象只能读取一次</h4><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> request <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Response</span><span class="token punctuation">(</span><span class="token string">&#39;javascript&#39;</span><span class="token punctuation">)</span>
r<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span> <span class="token comment">//javascript</span>
r<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">)</span> <span class="token comment">//TypeError</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><h3 id="二十一-javascript-api" tabindex="-1"><a class="header-anchor" href="#二十一-javascript-api" aria-hidden="true">#</a> (二十一) Javascript API</h3><h4 id="streams-api" tabindex="-1"><a class="header-anchor" href="#streams-api" aria-hidden="true">#</a> Streams API</h4><p>解决 Web 应用如何消费有序的小信息块而不是大块信息，<strong>直接解决的问题是处理网络请求和读写磁盘</strong></p><ul><li>大块信息可能不会一次性都可用，例如网络负载是以连续信息包形式交付的，而流式处理可以让应用在数据一到达就能使用</li><li>大块数据可能需要分小部分处理，视频处理，数据压缩，图像编码和 JSON 解析都是可以分成小部分进行处理</li></ul><h4 id="流" tabindex="-1"><a class="header-anchor" href="#流" aria-hidden="true">#</a> 流</h4><ul><li><h4 id="可读流" tabindex="-1"><a class="header-anchor" href="#可读流" aria-hidden="true">#</a> 可读流</h4><p>可以通过某个公共接口读取数据块的流，数据在内部底层源进入流，然后由消费者进行处理</p></li><li><h4 id="可写流" tabindex="-1"><a class="header-anchor" href="#可写流" aria-hidden="true">#</a> 可写流</h4><p>可以通过某个公共接口写入数据块的流。生产者将数据写入流，数据在内部传入底层数据槽</p></li><li><h4 id="转换流" tabindex="-1"><a class="header-anchor" href="#转换流" aria-hidden="true">#</a> 转换流</h4><p>由两种流组成，可写流用于接收数据（可写端），可读流用于输出数据（可读端）</p></li><li><p>流的基本单位是<strong>块</strong></p><ol><li><h5 id="块可以是任意数据类型-通常是定型数组" tabindex="-1"><a class="header-anchor" href="#块可以是任意数据类型-通常是定型数组" aria-hidden="true">#</a> 块可以是任意数据类型，通常是定型数组</h5></li><li>每个块都是离散的流片段</li><li>块不是固定大小的，也不一定按固定间隔到达</li></ol></li><li><h4 id="流平衡" tabindex="-1"><a class="header-anchor" href="#流平衡" aria-hidden="true">#</a> 流平衡</h4><p>流出口处理数据的速度比入口提供数据的速度块。出口经常空闲，会浪费一点内存或计算资源，但可以接收</p><p>流入口处理数据的速度比出口提供数据的速度块。此时会在某个地方出现数据积压，流必须做出相应处理</p><ul><li><p><strong>解决流不平衡问题：所有流都会为已进入流但尚未离开流的块提供一个内部队列。</strong></p><p>如果块入列速度快于出列速度，则内部队列不断增大，流不允许其无限增大，会使用<strong>反压</strong>通知流入口停止发送数据</p><p>因此定义了内部队列可以占用的最大内存，即<strong>高水位线</strong></p></li></ul></li></ul><h4 id="可读流-1" tabindex="-1"><a class="header-anchor" href="#可读流-1" aria-hidden="true">#</a> 可读流</h4><p>可读流是对底层数据源的封装，允许消费者通过流的公共接口读取数据</p><h5 id="readablestreamdefaultcontroller-可读流控制器" tabindex="-1"><a class="header-anchor" href="#readablestreamdefaultcontroller-可读流控制器" aria-hidden="true">#</a> ReadableStreamDefaultController（可读流控制器）</h5><p>使用 ReadableStreamDefaultController（）构造函数实例化一个控制器 controller，将值传入可读流</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> readableStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReadableStreamDefaultController</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function">start</span><span class="token punctuation">(</span><span class="token parameter">controller</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>controller<span class="token punctuation">)</span> <span class="token comment">//ReadableStreamDefaultController{}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>start()方法：在构造函数中定义 start()，并将 controller 作为参数传入，默认情况下，controller 就是该构造函数的一个实例</p><p>enqueue()方法：把值传入控制器，所有值传完后，调用 close()关闭流</p><h5 id="readablestreamdefaultreader" tabindex="-1"><a class="header-anchor" href="#readablestreamdefaultreader" aria-hidden="true">#</a> ReadableStreamDefaultReader</h5><p>调用 ReadableStream()构造一个实例，再通过流的 getReader()方法获取读取器 ReadableStreamDefaultReader 的实例</p><p>getReader()：调用这个方法会获得流的锁，保证只有这个读取器可以从流中读取值</p><p>read()：消费者调用读取器的这个方法可以读出值</p><h4 id="可写流-1" tabindex="-1"><a class="header-anchor" href="#可写流-1" aria-hidden="true">#</a> 可写流</h4><p>可写流是底层数据槽的封装，底层数据槽处理通过流的公共接口写入的数据</p><p>创建 WritableStream</p><p>在 WritableStream 构造函数中传入 write（），获得写入的数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>cosnt WritableStream <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WritableStream</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function">write</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>通过流的 getwriter()方法获得写入器的实例，这样会获得流的锁，确保只有一个写入器可以向流中写入数据</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>writableStream<span class="token punctuation">.</span>locked<span class="token punctuation">)</span> <span class="token comment">//false</span>
<span class="token keyword">const</span> writableStreamDefaultWriter <span class="token operator">=</span> writableStream<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//获得可写流的写入器的实例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>writableStream<span class="token punctuation">.</span>locked<span class="token punctuation">)</span> <span class="token comment">//true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在向流中写入数据前，必须确保写入器可以接收值，writableStreamDefaultWriter.ready 返回一个期约，能在向流中写入数据时解决。然后将值传给写入器的 write（）方法</p><p>写入数据后，调用 writableStreamDefaultWriter.close()关闭流</p><h4 id="转换流-1" tabindex="-1"><a class="header-anchor" href="#转换流-1" aria-hidden="true">#</a> 转换流</h4><p>用于组合可读流和可写流，数据块在两个流之间的转化是通过 transform()方法完成</p><p>创建 TransformStream 的实例</p><p>向 TransformStream 构造函数传入 transform()方法，并传入 chunk 和 controller 参数，获得转换器的实例</p><h4 id="通过管道连接流" tabindex="-1"><a class="header-anchor" href="#通过管道连接流" aria-hidden="true">#</a> 通过管道连接流</h4><p>pipeThrough()方法：把 ReadableStream 接入 TransformStream</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> pipedStream <span class="token operator">=</span> ReadableStream<span class="token punctuation">.</span><span class="token function">pipeThrough</span><span class="token punctuation">(</span>TransformStream<span class="token punctuation">)</span> <span class="token comment">//通过管道连接可读流和转换流</span>
<span class="token keyword">const</span> pipeStreamDefaultReader <span class="token operator">=</span> pipedStream<span class="token punctuation">.</span><span class="token function">getReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//从连接流的输出获得读取器</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>pipeTo()方法：和 pipeThrough 相同</p><h4 id="web-worker-工作者线程" tabindex="-1"><a class="header-anchor" href="#web-worker-工作者线程" aria-hidden="true">#</a> Web Worker 工作者线程</h4><p>JavaScript 环境实际上时运行在托管操作系统中的虚拟环境，浏览器每打开一个页面，就会分配一个它自己的环境，这样，每个页面都有自己的内存，事件循环，DOM 等等。每个页面并行执行</p><p>使用工作者线程，浏览器可以在原始页面环境之外再分配一个完全独立的二级子环境。</p><p>工作者线程和执行线程</p><ul><li>工作者线程是以实际线程实现的</li><li>工作者线程可以并行执行</li><li>工作者线程可以共享某些内存，但不会共享全部内存</li><li>工作者线程不一定在同一个进程里</li><li>创建工作者线程的开销更大，工作者线程相对比较重，不建议大量使用</li></ul><h4 id="工作者线程的类型" tabindex="-1"><a class="header-anchor" href="#工作者线程的类型" aria-hidden="true">#</a> 工作者线程的类型</h4><p>专用工作者线程</p><p>Web Worker 或 Worker，可以让脚本单独创建一个 JavaScript 线程，以执行委托的任务，只能被创建它的页面使用</p><p>共享工作者线程</p><p>服务工作者线程</p><h4 id="workerglobalscope" tabindex="-1"><a class="header-anchor" href="#workerglobalscope" aria-hidden="true">#</a> WorkerGlobalScope</h4><p><strong>在工作者线程内部，全局对象是 WorkerGlobalScope 的实例，通过 self 关键字暴露出来</strong></p><p>self 上的属性是 window 对象上属性的严格子集</p><table><thead><tr><th>self 属性</th><th>含义</th></tr></thead><tbody><tr><td>navigator</td><td>返回与工作者线程关联的 WorkerNavigator</td></tr><tr><td>self</td><td>返回 WorkerGlobalScope 对象</td></tr><tr><td>location</td><td>返回与工作者线程关联的 WorkerLocation</td></tr><tr><td>performance</td><td>返回 Performance 对象</td></tr><tr><td>console</td><td>返回 Console 对象</td></tr><tr><td>caches</td><td>返回与工作者线程关联的 CacheStorage 对象</td></tr><tr><td>indexDB</td><td>返回 IDBFactory 对象</td></tr><tr><td>isSecureContext</td><td>返回布尔值，表示工作者线程上下文是否安全</td></tr><tr><td>origin</td><td>返回 WorkerGlobScope 的源</td></tr></tbody></table><h4 id="workerglobalscope-的子类" tabindex="-1"><a class="header-anchor" href="#workerglobalscope-的子类" aria-hidden="true">#</a> WorkerGlobalScope 的子类</h4><p>专用工作者线程使用 DedicatedWorkerGlobalScope</p><p>共享工作者线程使用 SharedWorkerGlobalScope</p><p>服务工作者线程使用 ServiceWorkerGlobalScope</p><h4 id="专用工作者线程" tabindex="-1"><a class="header-anchor" href="#专用工作者线程" aria-hidden="true">#</a> 专用工作者线程</h4><p>简称为<strong>工作者线程</strong>，可以将专用工作者线程理解为<strong>后台脚本</strong></p><p>是最简单的 Web 工作者线程，用来执行在页面线程之外的其他任务，可以与父进程交换信息，发送网络请求，执行文件输入输出等</p><h4 id="创建专用工作者线程" tabindex="-1"><a class="header-anchor" href="#创建专用工作者线程" aria-hidden="true">#</a> 创建专用工作者线程</h4><p>向 Worker 构造函数中传入 Javascript 文件的文件路径，返回一个 Worker 对象</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>main<span class="token punctuation">.</span>js
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>worker<span class="token punctuation">)</span>
<span class="token comment">/*
Worker{
	onerror: (...)
	onmessage: (...)
	postMessage: ƒ postMessage()
	terminate: ƒ terminate()
}
*/</span>
worker<span class="token punctuation">.</span>js
<span class="token comment">//...</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>工作者线程的脚本文件只能从<strong>与父页面相同的源</strong>加载，否则会抛出错误</p></li><li><h4 id="worker-对象" tabindex="-1"><a class="header-anchor" href="#worker-对象" aria-hidden="true">#</a> Worker 对象</h4><p>Worker 对象是与刚创建的专用工作者线程通信的连接点，可用于在工作者线程和父级上下文之间传输信息，捕获专用工作者线程发出的事件</p><p>Worker 对象支持下列事件处理程序属性</p><ul><li><p><strong>onerror</strong>：在工作者线程中发生 EventError 的错误事件时触发</p></li><li><p><strong>onmessage</strong>：工作者线程中发生 MessageEvent 类型的消息事件时会调用指定该属性的事件处理程序</p></li><li><p>onmessageerror：在工作者线程中发生 MessageError 的错误事件时触发</p><p>还支持下列方法</p></li><li><p>postMessage（）：用于通过==<strong>异步消息事件</strong>向工作者线程发送消息</p></li><li><p>terminate（）：用于<strong>立即终止</strong>工作者线程，不会给其提供清理的机会，脚本会突然停止</p><p><strong>DedicatedWorkerGlobalScope 是继承自 WorkerGlobalScope 的实例，所以用于后者的所有属性和方法</strong></p><p><strong>同时，在此基础上，增加了以下属性和方法</strong></p><ol><li><p>name：可以提供给 Worker 构造函数的一个可选的字符串标识符</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Javascript&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>worker<span class="token punctuation">.</span>self<span class="token punctuation">)</span>
<span class="token comment">//DedicatedWorkerGlobalScope {name: &quot;Javascript&quot;, onmessage: null, onmessageerror: null, cancelAnimationFrame: ƒ, close: ƒ, …}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>postMessage（）：用于从工作者线程内部向父上下文发送消息</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;Javascript&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>worker<span class="token punctuation">.</span>self<span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&#39;self.addEventListener&#39;</span><span class="token punctuation">)</span>
<span class="token comment">//jiahua</span>
<span class="token comment">//self.addEventListener</span>

<span class="token comment">//worker.js</span>
self<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>close（）：用于<strong>立即终止</strong>工作者线程，不会给其提供清理的机会，脚本会突然停止</p></li><li><p>importScript（）：向工作者线程中导入任意数量的脚本</p></li></ol></li></ul></li><li><h4 id="专用工作者线程与隐式-messageports" tabindex="-1"><a class="header-anchor" href="#专用工作者线程与隐式-messageports" aria-hidden="true">#</a> 专用工作者线程与隐式 MessagePorts</h4><p>专用工作者线程隐式使用了 MessagePorts 在两个上下文之间通信</p></li></ul><h4 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h4><p>专用工作者线程可以<strong>非正式区分</strong>为下面三种状态：<strong>初始化，活动，终止</strong></p><ul><li><p><strong>初始化</strong>：调用 Worker（）构造函数是专用工作者线程生命的起点，但与之关联的工作者线程可能还没初始化（）请求脚本的网络延迟和初始化延迟）</p></li><li><p><strong>活动</strong>：虽然专用工作者线程脚本尚未执行，但可以将要发送给它的消息加入队列，待其状态变为活动，这些消息会添加到它的消息队列，专用工作者线程就会伴随页面整个生命周期存在，除非自我终止（self.close()）或通过外部终止（worker.terminate()）</p></li><li><h4 id="终止" tabindex="-1"><a class="header-anchor" href="#终止" aria-hidden="true">#</a> <strong>终止</strong></h4><ul><li><p><strong>自我终止 close（）</strong>：执行不会立即终止，会取消事件循环中的所有任务，阻止继续添加新任务。并将剩下的任务执行完</p></li><li><p><strong>外部终止 terminate（）</strong>：专用工作者线程的消息队列会被清理并锁住</p><p>在整个生命周期中，专用工作者线程只会关联一个网页（文档），除非明确终止它，否则只要关联文档存在，专用工作者线程就会存在，如果浏览器关闭，它会将与之关联的工作者线程标记为终止，它们的执行也会立即终止</p></li></ul></li></ul><h4 id="配置-worker-选项" tabindex="-1"><a class="header-anchor" href="#配置-worker-选项" aria-hidden="true">#</a> 配置 Worker 选项</h4><p>Worker（）构造函数允许将可选的配置作为第二个参数</p><ol><li>name：可在工作者线程中通过 self.name 读取到的字符串标识符</li><li>type：表示加载脚本的方式：classic 将脚本作为常规脚本执行，module 将脚本作为模块来执行</li><li>credentials： <ol><li>在 type 为 module 时，指定如何获取与传输凭证数据相关的工作者线程模块脚本，值可以是 omit，same-origin，include</li><li>在 type 为 classic 时，默认为 omit</li></ol></li></ol><h4 id="委托任务到子工作者线程" tabindex="-1"><a class="header-anchor" href="#委托任务到子工作者线程" aria-hidden="true">#</a> 委托任务到子工作者线程</h4><p>创建子工作者线程与创建普通工作者线程相同，但脚本路径是在父工作者线程下</p><p>使用子工作者线程，要考虑好同时运行多个子线程的计算成本和计算收益</p><h4 id="处理工作者线程错误" tabindex="-1"><a class="header-anchor" href="#处理工作者线程错误" aria-hidden="true">#</a> 处理工作者线程错误</h4><p>工作者线程脚本抛出了错误，不会打断父线程的执行，try/catch 不会捕获到错误</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;no error&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;caught error&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token comment">//no error			无法捕获到错误</span>

<span class="token comment">//worker.js</span>
<span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span> <span class="token comment">//工作者线程脚本抛出错误</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>相应的错误事件会冒泡到工作者线程的全局上下文，可以通过在 Worker 对象上设置错误监听事件侦听器访问</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span>onerror <span class="token operator">=</span> console<span class="token punctuation">.</span>log
<span class="token comment">//ErrorEvent {isTrusted: true, message: &quot;Uncaught Error: foo&quot;, filename: &quot;http://127.0.0.1:3000/Ajax/getObjHttp.js&quot;, lineno: 7, colno: 7, …}</span>

<span class="token comment">//worker.js</span>
<span class="token keyword">throw</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="与专用工作者线程通信" tabindex="-1"><a class="header-anchor" href="#与专用工作者线程通信" aria-hidden="true">#</a> 与专用工作者线程通信</h4><p>与工作者线程通信都是通过异步消息完成的</p><ol><li><p><strong>使用 postMessage()在主线程和工作者线程之间传递序列化消息（最简单也最常用的方式）</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">//工作者线程向父上下文发送消息时触发</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token comment">//向工作者线程发送消息</span>
<span class="token comment">//10!=3628800</span>

<span class="token comment">//worker.js		//由该工作者线程完成阶乘的计算工作</span>
<span class="token keyword">function</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">*=</span> n<span class="token operator">--</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//父上下文向工作者线程发送消息时触发</span>
  self<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">fact</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">//向父上下文发送消息</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>涉及调用全局对象上的方法，并定义一个临时的传输协议</p></li><li><p><strong>使用 MessageChannel()：可以在两个上下文间明确建立通信渠道</strong></p><ul><li><p>MessageChannel 实例有两个端口，分别代表两个通信端点，需要将一个端口传到工作者线程中</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MessageChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//MessageChannel实例有两个端口</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">)</span>
worker<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>channel<span class="token punctuation">.</span>port1<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//将其中一个端口传到工作者线程中</span>
channel<span class="token punctuation">.</span>port2<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">//通过两个端口的信道发送数据</span>
channel<span class="token punctuation">.</span>port2<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">//工作者线程通过信道响应</span>

<span class="token comment">//worker.js</span>
<span class="token keyword">let</span> messagePort <span class="token operator">=</span> <span class="token keyword">null</span>

<span class="token keyword">function</span> <span class="token function">fact</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">1</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">*=</span> n<span class="token operator">--</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res
<span class="token punctuation">}</span>

self<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> ports <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>messagePort<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    messagePort <span class="token operator">=</span> ports<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">//父上下文传递的一个端口</span>
    self<span class="token punctuation">.</span>onmessage <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">//全局的postMessage设为null</span>
    messagePort<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">//收到父上下文发送的消息后</span>
      messagePort<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">!=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">fact</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span> <span class="token comment">//向父上下文发送消息</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>父页面通过 postMessage 与工作者线程共享 MessagePort，工作者线程维护着对该端口的引用说，并使用它代替通过全局对象传递消息</p></li><li><p>工作者线程收到的第一条消息包含端口，后续的消息才是数据</p></li><li><p>真正有用的地方是让两个工作者线程之间直接通信，通过将端口转移给另一个工作者线程实现</p></li></ul></li><li><p><strong>使用 BroadcastChannel()</strong>：同源脚本可以通过 BroadcastChannel 相互之间发送和接收消息，不需要转移端口</p><p><strong>注意</strong>：页面在通过 BroadcastChannel 发送消息之前会先等 1 秒，因为这种信道没有端口所有权概念，如果不适用 setTimeOut()，由于初始化工作者线程的延迟，，会导致消息已经发送了，但工作者线程上的消息处理程序还没有就位</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//main.js</span>
<span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&#39;worker_channel&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> worker <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#39;./worker.js&#39;</span><span class="token punctuation">)</span>
channel<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">heard </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> on page</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> channel<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">//必须使用setTimeOut()</span>
<span class="token comment">//heard foo in worker</span>
<span class="token comment">//heard bar on page</span>

<span class="token comment">//worker.js</span>
<span class="token keyword">const</span> channel <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BroadcastChannel</span><span class="token punctuation">(</span><span class="token string">&#39;worker_channel&#39;</span><span class="token punctuation">)</span>
channel<span class="token punctuation">.</span><span class="token function-variable function">onmessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">heard </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>data<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in worker</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  channel<span class="token punctuation">.</span><span class="token function">postMessage</span><span class="token punctuation">(</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h4 id="工作者线程数据传输" tabindex="-1"><a class="header-anchor" href="#工作者线程数据传输" aria-hidden="true">#</a> 工作者线程数据传输</h4><p>工作者线程是独立的上下文，在上下文之间传输数据会产生消耗</p><ul><li><h4 id="三种在上下文之间转移信息的方式" tabindex="-1"><a class="header-anchor" href="#三种在上下文之间转移信息的方式" aria-hidden="true">#</a> 三种在上下文之间转移信息的方式</h4><ul><li><h5 id="结构化克隆算法" tabindex="-1"><a class="header-anchor" href="#结构化克隆算法" aria-hidden="true">#</a> 结构化克隆算法</h5></li><li><h5 id="可转移对象" tabindex="-1"><a class="header-anchor" href="#可转移对象" aria-hidden="true">#</a> 可转移对象</h5><p>使用可转移对象可以把一个上下文的所有权转移到另一个上下文，适用于不太可能在上下文间复制大量数据的情况下</p><p>只有下面几种可转移对象</p><ol><li><p>ArrayBuffer</p></li><li><p>MessagePort</p></li><li><p>ImageBitmap</p></li><li><p>OffscreenCanvas</p><p>postMessageI()的第二个可选参数是数组，它指定哪些对象转移到目标上下文。会删除对象的引用，从内存的层面进行该对象的转移</p><p>被转移的对象可以通过消息负载发送，消息负载本身会被复制（比如数组或对象）</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>main<span class="token punctuation">.</span>js <span class="token comment">//记得在VScode上运行</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ol></li><li><h5 id="共享数据缓冲区" tabindex="-1"><a class="header-anchor" href="#共享数据缓冲区" aria-hidden="true">#</a> 共享数据缓冲区</h5><p>SharedArrayBuffer</p></li></ul></li></ul><h4 id="线程池" tabindex="-1"><a class="header-anchor" href="#线程池" aria-hidden="true">#</a> 线程池</h4><h4 id="共享工作者线程" tabindex="-1"><a class="header-anchor" href="#共享工作者线程" aria-hidden="true">#</a> 共享工作者线程</h4><p>与专用工作者线程类似，但可以被多个可信任的执行上下文访问，从行为上看，可以看看作是专用工作者线程的一个扩展。可以在不同标签页，不同窗口，不同内嵌框架或同源的其他工作者线程之间共享</p><h4 id="创建共享工作者线程" tabindex="-1"><a class="header-anchor" href="#创建共享工作者线程" aria-hidden="true">#</a> 创建共享工作者线程</h4><ul><li><h4 id="sharedworker-标识与独占" tabindex="-1"><a class="header-anchor" href="#sharedworker-标识与独占" aria-hidden="true">#</a> SharedWorker 标识与独占</h4><p>与专用工作者线程不同的是，SharedWorker()只会在相同的标识不存在的情况下才会创建新实例，否则只会与已有的共享者线程建立新的连接</p><p>共享工作者线程标识源自于解析后的 URL、工作者线程名称和文档源</p></li><li><h4 id="使用-sharedworker-对象" tabindex="-1"><a class="header-anchor" href="#使用-sharedworker-对象" aria-hidden="true">#</a> 使用 SharedWorker 对象</h4><p>SharedWorker（）返回的对象被用作与新创建的共享工作者线程通信的连接点，可以用来通过 MessagePort 在共享工作者线程和父上下文之间传递消息，也可以<strong>用来捕获共享线程中发出的错误事件</strong></p></li><li><h4 id="sharedworkerglobalscope" tabindex="-1"><a class="header-anchor" href="#sharedworkerglobalscope" aria-hidden="true">#</a> SharedWorkerGlobalScope</h4><p>在共享线程内部，全局对象是 SharedWorkerGlobalScope 的实例，继承自 WorkerGlobalScope，所以包括了它所有的属性和方法</p><p>SharedWorkerGlobalScope 扩展了一下属性和方法</p><ol><li><p>name：：</p></li><li><p>importScripts()：</p></li><li><p>close()：</p></li><li><p>onconnect：与共享线程建立新连接时，应将其设置为处理程序，connect 事件包括了 MessagePort 实例的 ports 数组，可用于把消息发送回上下文</p><p>在通过 worker.port.onmessage 或 worker.port.start()与共享线程建立连接时触发</p></li></ol></li></ul><h4 id="生命周期-1" tabindex="-1"><a class="header-anchor" href="#生命周期-1" aria-hidden="true">#</a> 生命周期</h4><ul><li>活动：共享工作者线程只要还有一个上下文连接就会持续存在</li><li>终止：SharedWorker 对象上没有 terminate（）方法，在调用 close（）时，只要还有一个端口连接到该线程就不会真的终止线程，否则会在页面的生命周期内持续存在，只有页面销毁且没有连接时，才会终止共享线程</li></ul><h4 id="连接到共享工作者线程" tabindex="-1"><a class="header-anchor" href="#连接到共享工作者线程" aria-hidden="true">#</a> 连接到共享工作者线程</h4><p>每次调用 SharedWorker（）,无论是否创建了工作者线程，都会在共享线程内部触发 connect 事件</p><h4 id="服务工作者线程" tabindex="-1"><a class="header-anchor" href="#服务工作者线程" aria-hidden="true">#</a> 服务工作者线程</h4><p>是一种类似浏览器中代理服务器的线程，可以拦截外出请求和缓存响应，可以让网页在没有网络连接的情况下正常使用（全部或部分页面可以从服务工作者线程缓存中提供服务）</p><ul><li><strong>服务工作者线程主要任务</strong>：1. 充当网络请求的缓存层，2. 启用推送通知</li></ul><h4 id="服务工作者线程基础" tabindex="-1"><a class="header-anchor" href="#服务工作者线程基础" aria-hidden="true">#</a> 服务工作者线程基础</h4><h4 id="serviceworkercontainer" tabindex="-1"><a class="header-anchor" href="#serviceworkercontainer" aria-hidden="true">#</a> ServiceWorkerContainer</h4><ol><li>服务工作者线程没有全局构造函数，是通过 ServiceWorkerContainer 来管理的。其实例保存在 navigator.serviceWorker 属性中</li><li>服务工作者线程实例对象是个<strong>顶级接口，通过它可以让浏览器创建，更新，销毁或者与工作者线程交互</strong></li><li>创建方式和共享工作者线程相似，区别在于没有通过构造函数创建，暴露的 register（）方法，传递脚本 URL <ul><li>register（）方法返回一个期约，要么解决为 ServiceWorkerRegistration 对象，要么在注册失败时拒绝</li><li>在第一次调用 register（）激活服务工作者线程后，后续在同一个页面使用相同 URL 对 register（）调用时什么都不会执行，服务工作者线程本身对页面是不可见的。</li><li>常见的模式是基于特性检测，在 load 事件处理程序中注册</li></ul></li></ol><h4 id="使用-serviceworkercontainer-对象" tabindex="-1"><a class="header-anchor" href="#使用-serviceworkercontainer-对象" aria-hidden="true">#</a> 使用 ServiceWorkerContainer 对象</h4><p>ServiceWorkerContainer 接口是浏览器对服务工作者线程生态的顶部封装，始终可以在客户端上下文中访问。</p><p>支持以下事件处理程序</p><ul><li><p>oncontrollerchange:</p></li><li><p>onerror</p></li><li><p>onmessage</p><p>支持以下属性</p></li><li><p>ready</p></li><li><p>controller:</p><p>支持以下方法</p></li><li><p>register()</p></li><li><p>getRegisteration()</p></li><li><p>getRegisterations()</p></li><li><p>startMessage():</p></li></ul><h4 id="使用-serviceworkerregistration-对象" tabindex="-1"><a class="header-anchor" href="#使用-serviceworkerregistration-对象" aria-hidden="true">#</a> <strong>使用 ServiceWorkerRegistration 对象</strong></h4><p>支持以下事件处理程序</p><p>onupdatefound:</p><p>scope:</p><p>navigationPreload</p><p>pushManager</p><p>installing</p><p>waiting</p><p>active</p><p>支持下列方法</p><p>getNotifications()</p><p>showNotifications()</p><p>update()</p><p>unregister()</p><h4 id="使用-serviceworker-对象" tabindex="-1"><a class="header-anchor" href="#使用-serviceworker-对象" aria-hidden="true">#</a> 使用 ServiceWorker 对象</h4><p>支持下列事件处理程序</p><p>onstatechange</p><p>scriptURL</p><p>state</p><h4 id="serviceworkerglobalscope" tabindex="-1"><a class="header-anchor" href="#serviceworkerglobalscope" aria-hidden="true">#</a> ServiceWorkerGlobalScope</h4><p>在服务工作者线程内部，全局上下文是 ServiceWorkerGlobalScope 的实例，</p><p>ServiceWorkerGlobalScope 扩展了以下属性和方法</p><ul><li>caches</li><li>clients</li><li>registration</li><li>skipWaiting()</li><li>fetch()</li></ul><p><strong>服务工作者线程的全局作用域可以监听以下事件</strong></p><ul><li>服务工作者线程状态 <ul><li>install</li><li>activate</li></ul></li><li>Fetch API</li><li>Message API</li><li>Notification API</li><li>Push API</li></ul><p>服务工作者线程作用域限制</p><p>只能拦截其作用域内的客户端发送的请求，如果没有在 register（）中指定，作用域就是服务脚本的路径</p><h4 id="服务工作者线程缓存" tabindex="-1"><a class="header-anchor" href="#服务工作者线程缓存" aria-hidden="true">#</a> 服务工作者线程缓存</h4><p>可以通过编程方式实现真正的网络请求缓存机制，且服务工作者线程缓存非常简单</p><ul><li>不自动缓存任何请求：所有缓存都必须明确指定</li><li>没有到期失效的概念：除非明确删除，否则缓存内容一直有效</li><li>必须手动更新和删除</li><li>缓存版本必须手动管理</li><li>唯一的浏览器强制逐出策略基于服务工作者线程缓存占用的空间</li></ul><h4 id="cachestorage-对象" tabindex="-1"><a class="header-anchor" href="#cachestorage-对象" aria-hidden="true">#</a> CacheStorage 对象</h4><p>是映射到 Cache 对象的字符串键/值存储。类似于异步 Map</p><h4 id="cache-对象" tabindex="-1"><a class="header-anchor" href="#cache-对象" aria-hidden="true">#</a> Cache 对象</h4><h4 id="最大存储空间" tabindex="-1"><a class="header-anchor" href="#最大存储空间" aria-hidden="true">#</a> 最大存储空间</h4><h4 id="服务工作者线程客户端" tabindex="-1"><a class="header-anchor" href="#服务工作者线程客户端" aria-hidden="true">#</a> 服务工作者线程客户端</h4><h4 id="服务工作者线程与一致性" tabindex="-1"><a class="header-anchor" href="#服务工作者线程与一致性" aria-hidden="true">#</a> 服务工作者线程与一致性</h4><h4 id="生命周期-2" tabindex="-1"><a class="header-anchor" href="#生命周期-2" aria-hidden="true">#</a> 生命周期</h4><h4 id="控制反转与服务工作者线程持久化" tabindex="-1"><a class="header-anchor" href="#控制反转与服务工作者线程持久化" aria-hidden="true">#</a> 控制反转与服务工作者线程持久化</h4><h4 id="通过-updateviacache-管理服务文件缓存" tabindex="-1"><a class="header-anchor" href="#通过-updateviacache-管理服务文件缓存" aria-hidden="true">#</a> 通过 updateViaCache 管理服务文件缓存</h4><h4 id="强制性服务工作者线程操作" tabindex="-1"><a class="header-anchor" href="#强制性服务工作者线程操作" aria-hidden="true">#</a> 强制性服务工作者线程操作</h4><h4 id="服务工作者线程消息" tabindex="-1"><a class="header-anchor" href="#服务工作者线程消息" aria-hidden="true">#</a> 服务工作者线程消息</h4><h4 id="拦截-fetch-事件" tabindex="-1"><a class="header-anchor" href="#拦截-fetch-事件" aria-hidden="true">#</a> 拦截 fetch 事件</h4><h4 id="推送通知" tabindex="-1"><a class="header-anchor" href="#推送通知" aria-hidden="true">#</a> 推送通知</h4><ul><li>显示通知</li><li>处理通知事件</li><li>订阅推送事件</li><li>处理推送事件</li></ul><h2 id="二、dom-文档对象模型" tabindex="-1"><a class="header-anchor" href="#二、dom-文档对象模型" aria-hidden="true">#</a> 二、DOM(文档对象模型)</h2><p>一个页面就是一个文档</p><p><strong>节点层级</strong></p><blockquote><p><strong>docunment节点</strong>: 每个文档的根节点，根节点的唯一子节点是&lt; html&gt;元素，称为文档元素</p><p>一个网页中所有元素都是节点，例如标签，属性，文本，注释</p></blockquote><h3 id="一-node-类型" tabindex="-1"><a class="header-anchor" href="#一-node-类型" aria-hidden="true">#</a> (一) Node 类型</h3><ul><li><h4 id="节点关系" tabindex="-1"><a class="header-anchor" href="#节点关系" aria-hidden="true">#</a> 节点关系</h4><ol><li><h5 id="每个节点都有-childnodes-属性-属性值是包含一个-nodelist-的实例" tabindex="-1"><a class="header-anchor" href="#每个节点都有-childnodes-属性-属性值是包含一个-nodelist-的实例" aria-hidden="true">#</a> 每个节点都有 childNodes 属性，属性值是包含一个 NodeList 的实例</h5></li></ol><ul><li>NodeList 是一个类数组对象，存储按位置存取的有序节点，<strong>实质是对 DOM 结构的查询，DOM 结构的变化会在 Node List 中反映出来</strong><ul><li><p>可以使用<strong>中括号[]</strong>，或使用 item()方法访问 NodeList 中的元素，且具有 length 属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> firstChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">//倾向于使用中括号</span>
<span class="token keyword">let</span> secondChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span><span class="token function">item</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">.</span>length
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>使用 Array.prototype.slice()或<strong>Array.form()<strong>可以</strong>将 NodeList 对象转换为数组</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> arrayOfNodes <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">//可以使用Array.form()替代</span>
<span class="token keyword">let</span> arrayOfNodes <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">form</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>childNodes<span class="token punctuation">)</span> <span class="token comment">//推荐使用这种方法</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>previousSibling（上一个同胞节点）</p></li><li><p>nextSibling（下一个同胞节点）</p></li><li><p>hasChildNodes()，如果返回 true 则说明节点有一个或多子节点</p></li></ul></li></ul></li><li><h4 id="操纵节点" tabindex="-1"><a class="header-anchor" href="#操纵节点" aria-hidden="true">#</a> 操纵节点</h4><ul><li><p><strong>appendChild（）</strong>: 用于在 childNodes 列表末尾添加节点</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> LastNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">)</span>
<span class="token function">alert</span><span class="token punctuation">(</span>LastNode <span class="token operator">==</span> newNode<span class="token punctuation">)</span> <span class="token comment">//true</span>
<span class="token function">alert</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>lastchild <span class="token operator">==</span> newNode<span class="token punctuation">)</span> <span class="token comment">//true</span>

<span class="token comment">//若将文档中已存在的节点传给appendChild()，则会将这个节点从旧位置转移到新位置</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>insertBefore() : 在特定位置之前添加节点</p><h5 id="接收两个参数-要插入的节点-参照节点-插入到参照节点之前" tabindex="-1"><a class="header-anchor" href="#接收两个参数-要插入的节点-参照节点-插入到参照节点之前" aria-hidden="true">#</a> 接收两个参数：要插入的节点， 参照节点（插入到参照节点之前）</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> insert_Node <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">//在末尾添加节点</span>
<span class="token function">alert</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>lastChild <span class="token operator">==</span> newNode<span class="token punctuation">)</span> <span class="token comment">//true</span>

<span class="token keyword">let</span> insert_Node <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> otherNode<span class="token punctuation">)</span> <span class="token comment">//在特定节点前添加节点</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>replaceChild（）：插入并替换节点</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> returnNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">replaeChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span> <span class="token comment">//替换第一个子节点</span>

<span class="token keyword">let</span> returnNode <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>newNode<span class="token punctuation">,</span> someNode<span class="token punctuation">.</span>lastChild<span class="token punctuation">)</span> <span class="token comment">//替换最后一个子节点</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>removeChild（）： 移除节点</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> formerFirstChild <span class="token operator">=</span> someNode<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>someNode<span class="token punctuation">.</span>firstChild<span class="token punctuation">)</span> <span class="token comment">//移除第一个子节点</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li></ul></li></ul><h3 id="一-document-类型" tabindex="-1"><a class="header-anchor" href="#一-document-类型" aria-hidden="true">#</a> (一) Document 类型</h3><p><strong>DOM 的主要功能就是操纵元素</strong></p><ul><li><h4 id="_1-获取元素" tabindex="-1"><a class="header-anchor" href="#_1-获取元素" aria-hidden="true">#</a> 1.获取元素</h4><ol><li>getElementById(&#39;id&#39;)</li></ol><p>返回有着给定 Id 属性的元素节点对应的<strong>元素对象</strong></p><ul><li>console.dir()：打印 DOM 返回的元素对象的属性和方法</li></ul><ol start="2"><li>getElementByTagName(‘mark’)</li></ol><p>根据标签名，返回一个<strong>元素对象伪数组 HTMLCollection</strong>，数组中每个对象分别对应着文档里有着给定标签的一个元素</p><ul><li><p>可以获取父元素指定标签名的子元素</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> ob <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementByTagName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> ob1 <span class="token operator">=</span> ob<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getElementByTagName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><ol start="3"><li>getElementByClassName(‘class’) HTML5 中新增的方法</li></ol><p>返回一个具有相同类名的元素数组<strong>HTMLCollection</strong> 4. querySelector()</p><p><strong>接收 CSS 选择器参数，返回匹配的第一个后代元素，没有匹配则返回 null</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span> <span class="token comment">//&lt;div&gt;&lt;/div&gt;					取得&lt;div&gt;元素</span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#box&#39;</span><span class="token punctuation">)</span> <span class="token comment">//&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;  		取得ID为box的元素</span>
<span class="token keyword">let</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.area&#39;</span><span class="token punctuation">)</span> <span class="token comment">//&lt;div class=&quot;area&quot;&gt;&lt;/div&gt;  	取得类名为area的元素</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>在 Document 上使用时，会从文档元素开始搜索，在 Element 上使用时，会从当前元素的后代中查询</strong> 5. querySelectorAll()</p><p><strong>接受一个要查询的参数，返回一个 NodeList 的静态实例（包含所有匹配的节点）</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">/*
NodeList [div#new]
0: div#new
length: 1
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">HTMLCollection和NodeList的区别</p><p>HTMLCollection 是动态的</p><p>NodeList 静态的实例，是 DOM 节点的快照</p></div></li><li><h4 id="_2-设置元素" tabindex="-1"><a class="header-anchor" href="#_2-设置元素" aria-hidden="true">#</a> 2.设置元素</h4><p><strong>只能通过元素节点对象调用</strong></p><ol><li>getAttribute()：获取指定元素节点的属性（若属性不存在，则返回 null）</li><li>setAttribute()：设置指定元素节点的属性（若属性不存在，则创建该属性，再设置它的值）</li></ol></li><li><h4 id="_3-动态创建元素" tabindex="-1"><a class="header-anchor" href="#_3-动态创建元素" aria-hidden="true">#</a> 3.动态创建元素</h4><ol><li>document.write()</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">&#39;&lt;p style=&quot;color: #0ff;&quot;&gt; jiahua&lt;/p &gt; &#39;</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">//往HTML中写入&lt;p style=&quot;color: #0ff;&quot;&gt; jiahua&lt;/p &gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>innerHTML</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;ul&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>图片库<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

<span class="token keyword">let</span> str <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ul&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//输出</span>
<span class="token comment">/*&lt;ul id=&quot;ul&quot;&gt;
    &lt;h1&gt;图片库&lt;/h3&gt;
&lt;/ul&gt;
*/</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>createElement 创建元素节点</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;p&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>nodeName<span class="token punctuation">)</span> <span class="token comment">//P</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token comment">//1 （元素节点）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>createTextNode 创建文本节点</li></ol><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span><span class="token string">&#39;img&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>nodeType<span class="token punctuation">)</span> <span class="token comment">//3  (文本节点)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">innerText和innerHTML的区别</p><ul><li><strong>innerText不识别HTML标签</strong>（会将 HTML 标签当成字符串原封不动显示出来），非标准</li><li><strong>innerHTML能识别HTML标签</strong>（让 HTML 标签的语义或作用生效），W3C 标准</li><li>相同点：可读写，能获取元素里面的内容</li></ul></div></li></ul><h3 id="一-element-类型" tabindex="-1"><a class="header-anchor" href="#一-element-类型" aria-hidden="true">#</a> (一) Element 类型</h3><h3 id="一-元素节点属性" tabindex="-1"><a class="header-anchor" href="#一-元素节点属性" aria-hidden="true">#</a> (一) 元素节点属性</h3><ul><li><p>childNodes 属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;ul&quot;</span><span class="token operator">&gt;</span>			<span class="token comment">//childNodes[0]为空字符串的文本节点</span>
      <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>图片库<span class="token operator">&lt;</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">h3&gt;		</span><span class="token regex-delimiter">/</span></span><span class="token operator">/</span><span class="token operator">/</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>为<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li src<span class="token operator">=</span><span class="token string">&quot;images/1.jpg&quot;</span><span class="token operator">&gt;</span>图片<span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>		<span class="token comment">//childNodes[2]为&lt;li&gt;, childNodes[3]为文本节点“图片库”</span>
      <span class="token operator">&lt;</span>li src<span class="token operator">=</span><span class="token string">&quot;images/2.jpg&quot;</span><span class="token operator">&gt;</span>图片<span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li src<span class="token operator">=</span><span class="token string">&quot;images/3.jpg&quot;</span><span class="token operator">&gt;</span>图片<span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li src<span class="token operator">=</span><span class="token string">&quot;images/4.jpg&quot;</span><span class="token operator">&gt;</span>图片<span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>li src<span class="token operator">=</span><span class="token string">&quot;images/5.jpg&quot;</span><span class="token operator">&gt;</span>图片<span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

		<span class="token keyword">let</span> u <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;ul&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//&lt;h1&gt;图片库&lt;/h3&gt;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//&lt;li src=&quot;images/1.jpg&quot;&gt;图片1&lt;/li&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>nodeType 属性</p><ol><li>元素节点 nodeType=1</li><li>属性节点 nodeType=2</li><li>文本节点 nodeType =3</li></ol></li><li><p>nodeValue 属性</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;ul&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>图片库<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
		<span class="token keyword">let</span> u <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&quot;h1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>u<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>childNodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>nodeValue<span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">//图片库（文本节点）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>firstChild 和 lastChild 属性</p><ol><li>firstChild 等价于 childNodes[0]</li><li>lastChild 等价于 childNodes[node.length-1];</li></ol></li></ul><h3 id="一-事件" tabindex="-1"><a class="header-anchor" href="#一-事件" aria-hidden="true">#</a> (一) 事件</h3><p>事件代表文档或浏览器窗口中某个有意义的时刻，可以使用仅在事件发生时执行的监听器订阅事件，这个模型也叫“观察者模式”</p><h4 id="_1-事件冒泡" tabindex="-1"><a class="header-anchor" href="#_1-事件冒泡" aria-hidden="true">#</a> 1.事件冒泡</h4><p>事件从最具体的元素（文档中最深的节点）开始触发，并向上传播到没那么具体的元素（如 window 对象）</p><h4 id="_2-事件捕获" tabindex="-1"><a class="header-anchor" href="#_2-事件捕获" aria-hidden="true">#</a> 2.事件捕获</h4><p>最不具体的节点应该最先收到事件，最具体的节点应该最后收到事件，事件捕获实际上是为了事件到达最终目标前拦截事件</p><h4 id="_3-事件处理程序" tabindex="-1"><a class="header-anchor" href="#_3-事件处理程序" aria-hidden="true">#</a> 3.事件处理程序</h4><p>为响应事件而调用的函数被称为<strong>事件处理程序</strong>（或事件监听器），名字以“on”开头</p><ul><li><h4 id="html-事件处理程序" tabindex="-1"><a class="header-anchor" href="#html-事件处理程序" aria-hidden="true">#</a> HTML 事件处理程序</h4><table><thead><tr><th style="text-align:left;">事件</th><th style="text-align:left;">描述</th></tr></thead><tbody><tr><td style="text-align:left;">onchange</td><td style="text-align:left;">HTML 元素改变</td></tr><tr><td style="text-align:left;">onclick</td><td style="text-align:left;">用户点击 HTML 元素</td></tr><tr><td style="text-align:left;">onmouseover</td><td style="text-align:left;">鼠标指针移动到指定的元素上时发生</td></tr><tr><td style="text-align:left;">onmouseout</td><td style="text-align:left;">用户从一个 HTML 元素上移开鼠标时发生</td></tr><tr><td style="text-align:left;">onkeydown</td><td style="text-align:left;">用户按下键盘按键</td></tr><tr><td style="text-align:left;">onload</td><td style="text-align:left;">浏览器已完成页面的加载</td></tr></tbody></table><p>将事件处理程序直接在元素中添加为属性</p><ul><li>作为事件处理程序的代码可以访问全局作用域中的一切</li><li>this 的值相当于事件的目标元素</li></ul></li><li><h4 id="dom0-事件处理程序" tabindex="-1"><a class="header-anchor" href="#dom0-事件处理程序" aria-hidden="true">#</a> DOM0 事件处理程序</h4><p>在使用 DOM0 方式为事件处理程序赋值时，所赋函数被视为元素的方法，会在元素的作用域中运行（即 this 等于元素）</p><ul><li><p>每个元素（包括 window 和 document）都有通常小写的事件处理程序属性，为这个属性赋值为一个函数，即设置该事件处理程序</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;mybtn&#39;</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token comment">//mybtn</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>移除事件处理程序：把事件处理程序的值设置为 null</p></li></ul></li><li><h4 id="dom2-事件处理程序" tabindex="-1"><a class="header-anchor" href="#dom2-事件处理程序" aria-hidden="true">#</a> DOM2 事件处理程序</h4><ul><li><p>事件处理程序的赋值和移除 addEventListener（）和 removeEventListener（）</p><p>接收 3 个参数：事件名（不需要加 on），事件处理函数，布尔值（true 表示捕获阶段调用，false 表示在冒泡阶段调用（默认为 false））</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&#39;mybtn&#39;</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>通过 addEventListener()添加的事件处理程序，<strong>只能使用 removeEventListener()并传入与添加时同样的参数来移除</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>btn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//无效，与添加时传入的参数不同，function声明的函数与箭头函数不同</span>

btn<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//有效</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li></ul><h4 id="_4-事件对象" tabindex="-1"><a class="header-anchor" href="#_4-事件对象" aria-hidden="true">#</a> 4.事件对象</h4><p>在 DOM 中发生事件时，所有相关信息都会被收集并存储在一个名为 event 的对象中</p><ul><li><h5 id="dom-事件对象" tabindex="-1"><a class="header-anchor" href="#dom-事件对象" aria-hidden="true">#</a> DOM 事件对象</h5><p>不论是 DOM0 还是 DOM2 方式指定事件处理程序，event 对象都是传给事件处理程序的唯一参数</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;mybtn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
btn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token punctuation">{</span>					<span class="token comment">//DOM0方式</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//click</span>
<span class="token punctuation">}</span>


btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>		<span class="token comment">//DOM2方式</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event，type<span class="token punctuation">)</span><span class="token punctuation">;</span>			<span class="token comment">//click</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><strong>preventDefault()方法</strong>：阻止特定事件的默认动作</li><li><strong>stopPropagation()方法</strong>：用于立即阻止事件流在 DOM 结构中传播，取消后续的事件捕获或冒泡</li></ul></li></ul><h4 id="_5-事件类型" tabindex="-1"><a class="header-anchor" href="#_5-事件类型" aria-hidden="true">#</a> 5.事件类型</h4><p>DOM3 定义了以下事件类型</p><table><thead><tr><th>事件</th><th>含义</th></tr></thead><tbody><tr><td>用户界面事件</td><td>涉及与 BOM 交互的通用浏览器事件</td></tr><tr><td>焦点事件</td><td>在元素获得和失去焦点时触发</td></tr><tr><td>鼠标事件</td><td>使用鼠标在页面上执行某些操作时触发</td></tr><tr><td>滚轮事件</td><td>使用鼠标滚轮时触发</td></tr><tr><td>输入事件</td><td>向文档中输入文本时触发</td></tr><tr><td>键盘事件</td><td>使用键盘在页面上执行某些操作时触发</td></tr><tr><td>合成事件</td><td>在使用某种输入法编辑器输入字符时触发</td></tr></tbody></table><ul><li><h4 id="_6-常见的鼠标事件" tabindex="-1"><a class="header-anchor" href="#_6-常见的鼠标事件" aria-hidden="true">#</a> 6.常见的鼠标事件</h4><p>鼠标事件对象 mouseEvent</p><p>禁用鼠标右键菜单 ‘contextmenu’</p><p>禁止选中文字 ’selectstart‘</p><p>获得鼠标相对于浏览器可视窗口的坐标</p><p>clientX 返回 x 坐标</p><p>clientY 返回 y 坐标</p><p>获取鼠标相对于文档页面中的 x 坐标</p><p><strong>pageX 返回 x 坐标</strong></p><p><strong>pageY 返回 y 坐标</strong></p><p>鼠标移动事件</p><p>mousemove</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">mouseover和mouseenter的区别</p><p>mouseover 经过自身会触发，经过子盒子还会触发（<strong>会往上冒泡</strong>），mouseenter 只在经过自身盒子才触发，经过子盒子不会触发（<strong>不会冒泡</strong>）</p><p><strong>同理</strong>：mouseout 离开自身会触发，离开子盒子也会触发，mouseleave 离开自身盒子触发，离开子盒子不会触发</p></div></li><li><h4 id="_7-常用的键盘事件" tabindex="-1"><a class="header-anchor" href="#_7-常用的键盘事件" aria-hidden="true">#</a> 7.常用的键盘事件</h4><p>onkeyup 键盘（按下后）弹起时触发</p><p>onkeydown 键盘按下时触发</p><p>onkeypress 键盘按下时触发（不能识别功能键 ctrl shift 方向键）</p><p>同时写了三个事件时，执行顺序为 keydown keypress keyup</p><p><strong>键盘事件对象 keyBoardEvent</strong></p><p>keyCode 返回按下的键的 ASCII 码值</p><p><strong>keyup 和 keydown 不区分大小写，得到的都是大写字母的 ASCII 值</strong></p><p>keypress 区分大小写</p></li></ul><h2 id="三、bom-浏览器对象模型" tabindex="-1"><a class="header-anchor" href="#三、bom-浏览器对象模型" aria-hidden="true">#</a> 三、BOM(浏览器对象模型)</h2><h3 id="一-定时器" tabindex="-1"><a class="header-anchor" href="#一-定时器" aria-hidden="true">#</a> (一) 定时器</h3><ol><li><p>setTimeout()</p><p>用于指定在<strong>一段时间后</strong>执行某些代码</p></li><li><p>setInterval()</p><p>用于指定在<strong>每隔一段时间</strong>执行某些代码</p></li></ol><h3 id="一-系统对话框" tabindex="-1"><a class="header-anchor" href="#一-系统对话框" aria-hidden="true">#</a> (一) 系统对话框</h3><ol><li><p>alert()警告框：弹出后只有一个 OK 按钮</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;Hello World&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></li><li><p>confirm()确认框：有两个按钮，确认 OK 和取消 Cancel</p><ul><li>按下 OK 按钮，confirm（）返回 true，否则 confirm（）返回 false</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token string">&#39;你要去吃饭吗&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;现在就去&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;不去也得去&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>prompt()提示框：提示用户输入消息，显示一个文本框，以及确认 OK 和取消 Cancel 按钮</p><ul><li>按下 OK 按钮，prompt（）会返回文本框中的值，可以用变量保存这个值，否则 prompt（）返回 null</li></ul><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">prompt</span><span class="token punctuation">(</span><span class="token string">&#39;你是谁&#39;</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;欢迎你&#39;</span> <span class="token operator">+</span> result<span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&#39;你个臭傻逼居然不填&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ol><h3 id="一-location-对象" tabindex="-1"><a class="header-anchor" href="#一-location-对象" aria-hidden="true">#</a> (一) location 对象</h3><p>既是 window 的属性，也是 document 的属性，window.location 和 document.location 指向同一个对象</p><p>保存了当前加载文档的信息，把 URL 解析为离散片段后能够通过属性访问的信息</p><ul><li><h4 id="查询字符串" tabindex="-1"><a class="header-anchor" href="#查询字符串" aria-hidden="true">#</a> 查询字符串</h4><p>location.search：URL 的查询字符串，以？开头，以&amp;连接</p></li><li><h5 id="urlsearchparams" tabindex="-1"><a class="header-anchor" href="#urlsearchparams" aria-hidden="true">#</a> URLSearchParams</h5><p>URLSearchParams 提供了一组标准 API 方法，可以检查和修改查询字符串</p><ul><li><p>通过给 URLSearchParams 构造函数传入一个查询字符串，可以创建一个实例，这个实例上暴露了 get()、has()、set()和 delete()方法</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">let</span> qs <span class="token operator">=</span> <span class="token string">&#39;?q=javascript&amp;num=10&#39;</span> <span class="token comment">//定义一个查询字符串</span>
<span class="token keyword">let</span> serchParams <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span>qs<span class="token punctuation">)</span> <span class="token comment">//创建一个URLSearchParams实例</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serchParams<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//?q=javascript&amp;num=10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serchParams<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;num&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//10</span>

serchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;jiahua&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;jiayu&#39;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>serchParams<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">//?q=javascript&amp;num=10&amp;jiahua=jiayu</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><h4 id="操作地址" tabindex="-1"><a class="header-anchor" href="#操作地址" aria-hidden="true">#</a> 操作地址</h4><p>最常使用 location.href() 修改浏览器地址</p></li></ul><h3 id="一-navigator-对象" tabindex="-1"><a class="header-anchor" href="#一-navigator-对象" aria-hidden="true">#</a> (一) navigator 对象</h3><ul><li><h4 id="检测插件" tabindex="-1"><a class="header-anchor" href="#检测插件" aria-hidden="true">#</a> 检测插件</h4></li><li><h4 id="注册处理程序" tabindex="-1"><a class="header-anchor" href="#注册处理程序" aria-hidden="true">#</a> 注册处理程序</h4></li></ul><h3 id="一-screen-对象" tabindex="-1"><a class="header-anchor" href="#一-screen-对象" aria-hidden="true">#</a> (一) screen 对象</h3><h3 id="一-history-对象" tabindex="-1"><a class="header-anchor" href="#一-history-对象" aria-hidden="true">#</a> (一) history 对象</h3><ul><li><h4 id="导航" tabindex="-1"><a class="header-anchor" href="#导航" aria-hidden="true">#</a> 导航</h4><p>history.foward() 和 history.back()</p></li><li><h4 id="历史状态管理" tabindex="-1"><a class="header-anchor" href="#历史状态管理" aria-hidden="true">#</a> 历史状态管理</h4><p>haschange 事件：在页面 URL 的散列变化时触发</p></li><li><h4 id="状态管理-api-可以让开发者改变浏览器-url-而不会加载页面" tabindex="-1"><a class="header-anchor" href="#状态管理-api-可以让开发者改变浏览器-url-而不会加载页面" aria-hidden="true">#</a> 状态管理 API 可以让开发者改变浏览器 URL 而不会加载页面</h4><p>pushState()：将状态信息推到历史记录中，接收三个参数：1.state 对象，2.新状态的标题，3.相对 URL（可选）</p></li></ul><h3 id="一-客户端检测" tabindex="-1"><a class="header-anchor" href="#一-客户端检测" aria-hidden="true">#</a> (一) 客户端检测</h3></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:inherit;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->最近一次修改: 2023/11/5 14:12:26<!--]--></span></span></div></footer><nav class="page-nav"><p class="hasPrev hasNext inner"><span class="page-nav-item prev"> ← CSS</span><span class="page-nav-item next">TypeScript → </span></p></nav><!----></main><!--]--><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/frontend/Javascript.html#一、ecmascript" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="一、ECMAScript"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->一、ECMAScript<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-js运行机制" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) JS运行机制"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) JS运行机制<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#二-内存与性能" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(二) 内存与性能"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(二) 内存与性能<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#三-执行上下文和作用域" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(三) 执行上下文和作用域"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(三) 执行上下文和作用域<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#五-模块化" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(五) 模块化"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(五) 模块化<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#六-变量" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(六) 变量"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(六) 变量<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#七-数据类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(七) 数据类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(七) 数据类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#八-解构赋值" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(八) 解构赋值"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(八) 解构赋值<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#九-操作符" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(九) 操作符"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(九) 操作符<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十-语句" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十) 语句"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十) 语句<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十一-函数" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十一) 函数"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十一) 函数<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十二-迭代器与生成器" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十二) 迭代器与生成器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十二) 迭代器与生成器<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十三-面向对象编程" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十三) 面向对象编程"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十三) 面向对象编程<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十四-proxy代理和reflect反射" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十四) Proxy代理和Reflect反射"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十四) Proxy代理和Reflect反射<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十五-promise与async-await" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十五) Promise与async/await"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十五) Promise与async/await<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十六-动画与canvas图形" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十六) 动画与Canvas图形"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十六) 动画与Canvas图形<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十七-表单脚本" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十七) 表单脚本"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十七) 表单脚本<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十八-json" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十八) JSON"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十八) JSON<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#十九-ajax" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(十九) Ajax"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(十九) Ajax<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#二十-fetch-api" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(二十) Fetch API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(二十) Fetch API<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#二十一-javascript-api" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(二十一) Javascript API"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(二十一) Javascript API<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/frontend/Javascript.html#二、dom-文档对象模型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="二、DOM(文档对象模型)"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->二、DOM(文档对象模型)<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-node-类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) Node 类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) Node 类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-document-类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) Document 类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) Document 类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-element-类型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) Element 类型"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) Element 类型<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-元素节点属性" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) 元素节点属性"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) 元素节点属性<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-事件" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) 事件"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) 事件<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/docs/frontend/Javascript.html#三、bom-浏览器对象模型" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="三、BOM(浏览器对象模型)"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->三、BOM(浏览器对象模型)<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-定时器" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) 定时器"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) 定时器<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-系统对话框" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) 系统对话框"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) 系统对话框<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-location-对象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) location 对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) location 对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-navigator-对象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) navigator 对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) navigator 对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-screen-对象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) screen 对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) screen 对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-history-对象" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) history 对象"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) history 对象<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/docs/frontend/Javascript.html#一-客户端检测" class="router-link-active router-link-exact-active link page-catalog-item" aria-label="(一) 客户端检测"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:inherit;font-size:14px;"><!--[-->(一) 客户端检测<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></div></div><!----><!----><!--]--></div>
    <script type="module" src="/assets/app-52249f43.js" defer></script>
  </body>
</html>
